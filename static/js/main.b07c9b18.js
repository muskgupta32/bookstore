/*! For license information please see main.b07c9b18.js.LICENSE.txt */
(()=>{var e={888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},758:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function u(e){return a.get(e)||a.set(e,h(e).map((function(e){return e.replace(o,"$2")})))}function h(e){return e.match(n)||[""]}function d(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!d(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,s=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;s=s[t[r++]]}s[t[r]]=n}))},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(d(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,s,o,a=e.length;for(i=0;i<a;i++)(r=e[i])&&(f(r)&&(r='"'+r+'"'),s=!(o=d(r))&&/^\d+$/.test(r),t.call(n,r,o,s,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var F,M=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function xe(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ie)&&(Ne(),xe())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Re=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Me=null,je=!1,Ue=null,Ve={onError:function(e){Fe=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Fe=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,It,Tt,kt=!1,xt=[],Ct=null,Nt=null,At=null,Ot=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ft(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Ot.forEach(Ut),Dt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Ot.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Ft(Nt,e,t,n,r,i),!0;case"mouseover":return At=Ft(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ot.set(s,Ft(Ot.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Ft(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return In}var kn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(On),Rn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Fn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Pn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Ir={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Sr[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),xr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Or.length;Rr++){var Pr=Or[Rr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(xr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var u=Me;Fe=!1,Me=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Oe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case xr:case Cr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Wn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=De(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ii(e){return{current:e}}function Ti(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var xi={},Ci=Ii(xi),Ni=Ii(!1),Ai=xi;function Oi(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ni),Ti(Ci)}function Pi(e,t,n){if(Ci.current!==xi)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ai=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),ki(Ci,e)):Ti(Ni),ki(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Es(e){var t=ys.current;Ti(ys),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function xs(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,xs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ps(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ps(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ps(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Di(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Os(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Di(t)?Ai:Ci.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Ms(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function $s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case E:return(t=Uc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Hs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Fc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Hs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=$s(!0),Js=$s(!1),Xs={},Zs=Ii(Xs),eo=Ii(Xs),to=Ii(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function xo(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Do(e,t){var n=mo,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Po.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Mo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return xo().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}mo.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return xo().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,xs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Al.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(xo(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],xo().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=xo();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],xo().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),da(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Ps(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Pl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Rl),Rl|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Di(n)?Ai:Ci.current;return s=Oi(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Di(n)){var s=!0;Fi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Oi(t,c=Di(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Ms(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||Bs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ds(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Oi(t,l=Di(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Ms(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||Bs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Oa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Da,Ra,Pa,La,Fa={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Fa,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Fa,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Di(t.type)&&Ri(),Ga(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Ra(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Es(t.type._context),Ga(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $a(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Za=l):Sl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ya=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Il,Tl=Math.ceil,kl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Nl=0,Al=null,Ol=null,Dl=0,Rl=0,Pl=Ii(0),Ll=0,Fl=null,Ml=0,jl=0,Ul=0,Vl=null,zl=null,Bl=0,ql=1/0,Wl=null,Kl=!1,Hl=null,Gl=null,Ql=!1,$l=null,Yl=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(jl|=n),4===Ll&&lc(e,Dl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=Je()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Al===e&&Dl===t||(Wl=null,ql=Je()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),kl.current=o,Nl=i,null!==Ol?t=0:(Al=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Fl,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fl,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,zl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,zl,Wl),t);break}Ec(e,zl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,zl,Wl),r);break}Ec(e,zl,Wl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Sc();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fl,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,zl,Wl),ic(e,Je()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=Je()+500,Ui&&Bi())}}function hc(e){null!==$l&&0===$l.tag&&0===(6&Nl)&&Sc();var t=Nl;Nl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Nl=t))&&Bi()}}function dc(){Rl=Pl.current,Ti(Pl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ti(Ni),Ti(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Ol=e=Pc(e.current,null),Dl=Rl=t,Ll=0,Fl=null,Ul=jl=Ml=0,zl=Vl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Ol;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,xl.current=null,null===n||null===n.return){Ll=1,Fl=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gl||!Gl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Ml)&&0===(268435455&jl)||lc(Al,Dl)}function yc(e,t){var n=Nl;Nl|=2;var r=mc();for(Al===e&&Dl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_s(),Nl=n,kl.current=r,null!==Ol)throw Error(s(261));return Al=null,Dl=0,Ll}function vc(){for(;null!==Ol;)bc(Ol)}function wc(){for(;null!==Ol&&!$e();)bc(Ol)}function bc(e){var t=Il(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_c(e):Ol=t,xl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Rl)))return void(Ol=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Ll=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Sc()}while(null!==$l);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Ol=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,xl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Ye(),Nl=l,wt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,$l=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Sc(){if(null!==$l){var e=bt(Yl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Yl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Ic(e,t,n){e=Ps(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ps(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>Je()-Bl?fc(e,0):Ul|=n),ic(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xc(e,n)}function Ac(e,t){return Ge(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Oc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Fc(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Dc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case O:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function Bc(e){if(!e)return xi;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Rs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ps(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ps(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Di(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(ki(ao,1&ao.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Os(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=gs(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ds(e,t),Ms(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Rs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Di(r)?(e=!0,Fi(t)):e=!1,Is(t,n),qs(t,r,i),Ks(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Nl)&&(ql=Je()+500,Bi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,xe,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(E);else{var t=r(u);null!==t&&P(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&P(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,k=-1,x=5,C=-1;function N(){return!(t.unstable_now()-C<x)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?S():(I=!1,T=null)}}else I=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,D=O.port2;O.port1.onmessage=A,S=function(){D.postMessage(null)}}else S=function(){y(A,0)};function R(e){T=e,I||(I=!0,S())}function P(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,P(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},564:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),i=(e,t)=>n(e).join(t).toLowerCase(),s=e=>n(e).reduce(((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())),"");e.exports={words:n,upperFirst:r,camelCase:s,pascalCase:e=>r(s(e)),snakeCase:e=>i(e,"_"),kebabCase:e=>i(e,"-"),sentenceCase:e=>r(i(e," ")),titleCase:e=>n(e).map(r).join(" ")}},514:e=>{function t(e,t){var n=e.length,r=new Array(n),i={},s=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));s--;)i[s]||l(e[s],s,new Set);return r;function l(e,t,s){if(s.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(d){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var u=o.get(e)||new Set;if(t=(u=Array.from(u)).length){s.add(e);do{var h=u[--t];l(h,a.get(h),s)}while(t);s.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},637:(e,t,n)=>{"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},995:(e,t,n)=>{"use strict";e.exports=n(637)},418:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Ue,hasStandardBrowserEnv:()=>Ve,hasStandardBrowserWebWorkerEnv:()=>Be});var t={};n.r(t),n.d(t,{FirebaseError:()=>vr,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>ci,_addComponent:()=>fi,_addOrOverwriteComponent:()=>pi,_apps:()=>hi,_clearComponents:()=>vi,_components:()=>di,_getProvider:()=>gi,_registerComponent:()=>mi,_removeServiceInstance:()=>yi,deleteApp:()=>Ti,getApp:()=>Si,getApps:()=>Ii,initializeApp:()=>Ei,onLog:()=>xi,registerVersion:()=>ki,setLogLevel:()=>Ci});var r=n(791),i=n.t(r,2),s=n(164),o=n.t(s,2),a=n(995);var l=function(e){e()},c=()=>l,u=r,h=Symbol.for("react-redux-context"),d="undefined"!==typeof globalThis?globalThis:{};function f(){var e;if(!u.createContext)return{};const t=null!==(e=d[h])&&void 0!==e?e:d[h]=new Map;let n=t.get(u.createContext);return n||(n=u.createContext(null),t.set(u.createContext,n)),n}var p=f(),m=()=>{throw new Error("uSES not initialized!")};function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(){return u.useContext(e)}}var y=g(),v=m,w=(e,t)=>e===t;function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?y:g(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=w,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),h=(u.useRef(!0),u.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),d=v(o.addNestedSub,s.getState,a||s.getState,h,r);return u.useDebugValue(d),d}}var _=b();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var E={notify(){},get:()=>[]};function S(e,t){let n,r=E,i=0,s=!1;function o(){u.onStateChange&&u.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){const e=c();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=E)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return u}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?u.useLayoutEffect:u.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var T=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=u.useMemo((()=>{const e=S(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),l=u.useMemo((()=>t.getState()),[t]);I((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||p;return u.createElement(c.Provider,{value:a},r)};function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?y:g(e);return function(){const{store:e}=t();return e}}var x=k();function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?x:k(e);return function(){return t().dispatch}}var N,A,O=C();N=a.useSyncExternalStoreWithSelector,v=N,(e=>{e})(r.useSyncExternalStore),A=s.unstable_batchedUpdates,l=A;function D(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var R=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),P=()=>Math.random().toString(36).substring(7).split("").join("."),L={INIT:"@@redux/INIT".concat(P()),REPLACE:"@@redux/REPLACE".concat(P()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(P())};function F(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function M(e,t,n){if("function"!==typeof e)throw new Error(D(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(D(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(D(1));return n(M)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(D(3));return i}function h(e){if("function"!==typeof e)throw new Error(D(4));if(l)throw new Error(D(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(D(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!F(e))throw new Error(D(7));if("undefined"===typeof e.type)throw new Error(D(8));if("string"!==typeof e.type)throw new Error(D(17));if(l)throw new Error(D(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:L.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(D(10));r=e,d({type:L.REPLACE})},[R]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(D(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[R](){return this}}}}}function j(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var U=j();function V(e,t){return function(){return e.apply(t,arguments)}}const{toString:z}=Object.prototype,{getPrototypeOf:B}=Object,q=(W=Object.create(null),e=>{const t=z.call(e);return W[t]||(W[t]=t.slice(8,-1).toLowerCase())});var W;const K=e=>(e=e.toLowerCase(),t=>q(t)===e),H=e=>t=>typeof t===e,{isArray:G}=Array,Q=H("undefined");const $=K("ArrayBuffer");const Y=H("string"),J=H("function"),X=H("number"),Z=e=>null!==e&&"object"===typeof e,ee=e=>{if("object"!==q(e))return!1;const t=B(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},te=K("Date"),ne=K("File"),re=K("Blob"),ie=K("FileList"),se=K("URLSearchParams");function oe(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),G(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function ae(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const le="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ce=e=>!Q(e)&&e!==le;const ue=(he="undefined"!==typeof Uint8Array&&B(Uint8Array),e=>he&&e instanceof he);var he;const de=K("HTMLFormElement"),fe=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),pe=K("RegExp"),me=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};oe(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},ge="abcdefghijklmnopqrstuvwxyz",ye="0123456789",ve={DIGIT:ye,ALPHA:ge,ALPHA_DIGIT:ge+ge.toUpperCase()+ye};const we=K("AsyncFunction"),be={isArray:G,isArrayBuffer:$,isBuffer:function(e){return null!==e&&!Q(e)&&null!==e.constructor&&!Q(e.constructor)&&J(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||J(e.append)&&("formdata"===(t=q(e))||"object"===t&&J(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$(e.buffer),t},isString:Y,isNumber:X,isBoolean:e=>!0===e||!1===e,isObject:Z,isPlainObject:ee,isUndefined:Q,isDate:te,isFile:ne,isBlob:re,isRegExp:pe,isFunction:J,isStream:e=>Z(e)&&J(e.pipe),isURLSearchParams:se,isTypedArray:ue,isFileList:ie,forEach:oe,merge:function e(){const{caseless:t}=ce(this)&&this||{},n={},r=(r,i)=>{const s=t&&ae(n,i)||i;ee(n[s])&&ee(r)?n[s]=e(n[s],r):ee(r)?n[s]=e({},r):G(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&oe(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return oe(t,((t,r)=>{n&&J(t)?e[r]=V(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&B(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:q,kindOfTest:K,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(G(e))return e;let t=e.length;if(!X(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:de,hasOwnProperty:fe,hasOwnProp:fe,reduceDescriptors:me,freezeMethods:e=>{me(e,((t,n)=>{if(J(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];J(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return G(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:ae,global:le,isContextDefined:ce,ALPHABET:ve,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&J(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Z(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=G(e)?[]:{};return oe(e,((e,t)=>{const s=n(e,r+1);!Q(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:we,isThenable:e=>e&&(Z(e)||J(e))&&J(e.then)&&J(e.catch)};function _e(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}be.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ee=_e.prototype,Se={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Se[e]={value:e}})),Object.defineProperties(_e,Se),Object.defineProperty(Ee,"isAxiosError",{value:!0}),_e.from=(e,t,n,r,i,s)=>{const o=Object.create(Ee);return be.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),_e.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Ie=_e;function Te(e){return be.isPlainObject(e)||be.isArray(e)}function ke(e){return be.endsWith(e,"[]")?e.slice(0,-2):e}function xe(e,t,n){return e?e.concat(t).map((function(e,t){return e=ke(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Ce=be.toFlatObject(be,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ne=function(e,t,n){if(!be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!be.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&be.isSpecCompliantForm(t);if(!be.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(be.isDate(e))return e.toISOString();if(!a&&be.isBlob(e))throw new Ie("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(e)||be.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(be.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(be.isArray(e)&&function(e){return be.isArray(e)&&!e.some(Te)}(e)||(be.isFileList(e)||be.endsWith(n,"[]"))&&(a=be.toArray(e)))return n=ke(n),a.forEach((function(e,r){!be.isUndefined(e)&&null!==e&&t.append(!0===o?xe([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!Te(e)||(t.append(xe(i,n,s),l(e)),!1)}const u=[],h=Object.assign(Ce,{defaultVisitor:c,convertValue:l,isVisitable:Te});if(!be.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!be.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),be.forEach(n,(function(n,s){!0===(!(be.isUndefined(n)||null===n)&&i.call(t,n,be.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function Ae(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Oe(e,t){this._pairs=[],e&&Ne(e,this,t)}const De=Oe.prototype;De.append=function(e,t){this._pairs.push([e,t])},De.toString=function(e){const t=e?function(t){return e.call(this,t,Ae)}:Ae;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Re=Oe;function Pe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Le(e,t,n){if(!t)return e;const r=n&&n.encode||Pe,i=n&&n.serialize;let s;if(s=i?i(t,n):be.isURLSearchParams(t)?t.toString():new Re(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Fe=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){be.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Me={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},je={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Re,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ue="undefined"!==typeof window&&"undefined"!==typeof document,Ve=(ze="undefined"!==typeof navigator&&navigator.product,Ue&&["ReactNative","NativeScript","NS"].indexOf(ze)<0);var ze;const Be="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,qe={...e,...je};const We=function(e){function t(e,n,r,i){let s=e[i++];const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&be.isArray(r)?r.length:s,a)return be.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&be.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&be.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(be.isFormData(e)&&be.isFunction(e.entries)){const n={};return be.forEachEntry(e,((e,r)=>{t(function(e){return be.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Ke={transitional:Me,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=be.isObject(e);i&&be.isHTMLForm(e)&&(e=new FormData(e));if(be.isFormData(e))return r&&r?JSON.stringify(We(e)):e;if(be.isArrayBuffer(e)||be.isBuffer(e)||be.isStream(e)||be.isFile(e)||be.isBlob(e))return e;if(be.isArrayBufferView(e))return e.buffer;if(be.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ne(e,new qe.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return qe.isNode&&be.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=be.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ne(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(be.isString(e))try{return(t||JSON.parse)(e),be.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ke.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&be.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw Ie.from(i,Ie.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],(e=>{Ke.headers[e]={}}));const He=Ke,Ge=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qe=Symbol("internals");function $e(e){return e&&String(e).trim().toLowerCase()}function Ye(e){return!1===e||null==e?e:be.isArray(e)?e.map(Ye):String(e)}function Je(e,t,n,r,i){return be.isFunction(r)?r.call(this,t,n):(i&&(t=n),be.isString(t)?be.isString(r)?-1!==t.indexOf(r):be.isRegExp(r)?r.test(t):void 0:void 0)}class Xe{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=$e(t);if(!i)throw new Error("header name must be a non-empty string");const s=be.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Ye(e))}const s=(e,t)=>be.forEach(e,((e,n)=>i(e,n,t)));return be.isPlainObject(e)||e instanceof this.constructor?s(e,t):be.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Ge[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=$e(e)){const n=be.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(be.isFunction(t))return t.call(this,e,n);if(be.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$e(e)){const n=be.findKey(this,e);return!(!n||void 0===this[n]||t&&!Je(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=$e(e)){const i=be.findKey(n,e);!i||t&&!Je(0,n[i],i,t)||(delete n[i],r=!0)}}return be.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Je(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return be.forEach(this,((r,i)=>{const s=be.findKey(n,i);if(s)return t[s]=Ye(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Ye(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return be.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&be.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Qe]=this[Qe]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=$e(e);t[r]||(!function(e,t){const n=be.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return be.isArray(e)?e.forEach(r):r(e),this}}Xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),be.reduceDescriptors(Xe.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),be.freezeMethods(Xe);const Ze=Xe;function et(e,t){const n=this||He,r=t||n,i=Ze.from(r.headers);let s=r.data;return be.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function tt(e){return!(!e||!e.__CANCEL__)}function nt(e,t,n){Ie.call(this,null==e?"canceled":e,Ie.ERR_CANCELED,t,n),this.name="CanceledError"}be.inherits(nt,Ie,{__CANCEL__:!0});const rt=nt;const it=qe.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];be.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),be.isString(r)&&o.push("path="+r),be.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function st(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ot=qe.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=be.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const at=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function lt(e,t){let n=0;const r=at(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a);n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const ct="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Ze.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(be.isFormData(r))if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=st(e.baseURL,e.url);function d(){if(!u)return;const r=Ze.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ie("Request failed with status code "+n.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Le(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new Ie("Request aborted",Ie.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Ie("Network Error",Ie.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Me;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Ie(t,r.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,e,u)),u=null},qe.hasStandardBrowserEnv&&(l&&be.isFunction(l)&&(l=l(e)),l||!1!==l&&ot(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&it.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&be.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),be.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",lt(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",lt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new rt(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===qe.protocols.indexOf(f)?n(new Ie("Unsupported protocol "+f+":",Ie.ERR_BAD_REQUEST,e)):u.send(r||null)}))},ut={http:null,xhr:ct};be.forEach(ut,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const ht=e=>"- ".concat(e),dt=e=>be.isFunction(e)||null===e||!1===e,ft=e=>{e=be.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!dt(n)&&(r=ut[(t=String(n)).toLowerCase()],void 0===r))throw new Ie("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ht).join("\n"):" "+ht(e[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function pt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rt(null,e)}function mt(e){pt(e),e.headers=Ze.from(e.headers),e.data=et.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ft(e.adapter||He.adapter)(e).then((function(t){return pt(e),t.data=et.call(e,e.transformResponse,t),t.headers=Ze.from(t.headers),t}),(function(t){return tt(t)||(pt(e),t&&t.response&&(t.response.data=et.call(e,e.transformResponse,t.response),t.response.headers=Ze.from(t.response.headers))),Promise.reject(t)}))}const gt=e=>e instanceof Ze?e.toJSON():e;function yt(e,t){t=t||{};const n={};function r(e,t,n){return be.isPlainObject(e)&&be.isPlainObject(t)?be.merge.call({caseless:n},e,t):be.isPlainObject(t)?be.merge({},t):be.isArray(t)?t.slice():t}function i(e,t,n){return be.isUndefined(t)?be.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!be.isUndefined(t))return r(void 0,t)}function o(e,t){return be.isUndefined(t)?be.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(gt(e),gt(t),!0)};return be.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);be.isUndefined(o)&&s!==a||(n[r]=o)})),n}const vt="1.6.2",wt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{wt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const bt={};wt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Ie(r(i," has been removed"+(t?" in "+t:"")),Ie.ERR_DEPRECATED);return t&&!bt[i]&&(bt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const _t={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Ie("option "+s+" must be "+n,Ie.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ie("Unknown option "+s,Ie.ERR_BAD_OPTION)}},validators:wt},Et=_t.validators;class St{constructor(e){this.defaults=e,this.interceptors={request:new Fe,response:new Fe}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=yt(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&_t.assertOptions(n,{silentJSONParsing:Et.transitional(Et.boolean),forcedJSONParsing:Et.transitional(Et.boolean),clarifyTimeoutError:Et.transitional(Et.boolean)},!1),null!=r&&(be.isFunction(r)?t.paramsSerializer={serialize:r}:_t.assertOptions(r,{encode:Et.function,serialize:Et.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&be.merge(i.common,i[t.method]);i&&be.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Ze.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[mt.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=mt.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Le(st((e=yt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}be.forEach(["delete","get","head","options"],(function(e){St.prototype[e]=function(t,n){return this.request(yt(n||{},{method:e,url:t,data:(n||{}).data}))}})),be.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(yt(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}St.prototype[e]=t(),St.prototype[e+"Form"]=t(!0)}));const It=St;class Tt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new rt(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Tt((function(t){e=t})),cancel:e}}}const kt=Tt;const xt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xt).forEach((e=>{let[t,n]=e;xt[n]=t}));const Ct=xt;const Nt=function e(t){const n=new It(t),r=V(It.prototype.request,n);return be.extend(r,It.prototype,n,{allOwnKeys:!0}),be.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(yt(t,n))},r}(He);Nt.Axios=It,Nt.CanceledError=rt,Nt.CancelToken=kt,Nt.isCancel=tt,Nt.VERSION=vt,Nt.toFormData=Ne,Nt.AxiosError=Ie,Nt.Cancel=Nt.CanceledError,Nt.all=function(e){return Promise.all(e)},Nt.spread=function(e){return function(t){return e.apply(null,t)}},Nt.isAxiosError=function(e){return be.isObject(e)&&!0===e.isAxiosError},Nt.mergeConfig=yt,Nt.AxiosHeaders=Ze,Nt.formToJSON=e=>We(be.isHTMLForm(e)?new FormData(e):e),Nt.getAdapter=ft,Nt.HttpStatusCode=Ct,Nt.default=Nt;const At=Nt;function Ot(){return e=>{At.get("https://example-data.draftbit.com/books?_limit=20").then((function(t){e({type:"FETCH_PRODUCTS",payload:t.data})})).catch((function(e){console.log(e)}))}}const Dt={productDetails:[]};function Rt(e){return{type:"ADD_PRODUCTS",payload:e}}const Pt=e=>({type:"SET_USER",payload:e}),Lt=function(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:L.INIT}))throw new Error(D(12));if("undefined"===typeof n(void 0,{type:L.PROBE_UNKNOWN_ACTION()}))throw new Error(D(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(D(14))}o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}({bookstore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;return"FETCH_PRODUCTS"===t.type?{productDetails:t.payload}:e},shoppingCart:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartProducts:[]},t=arguments.length>1?arguments[1]:void 0;const n=t.payload;if("ADD_PRODUCTS"===t.type){const t=e.cartProducts.find((e=>e.id===n.id));return t?{...e,cartProducts:e.cartProducts.map((e=>e.id===n.id?{...e,qty:e.qty+1}:e))}:{...e,cartProducts:[...e.cartProducts,{...n,qty:1}]}}if("DELETE_PRODUCTS"===t.type){const t=e.cartProducts.find((e=>e.id===n.id));if(t)return 1===t.qty?{...e,cartProducts:e.cartProducts.filter((e=>{if(e.id===t.id)return console.log("working"),!1}))}:{...e,cartProducts:e.cartProducts.map((e=>e.id===n.id?{...e,qty:e.qty-1}:e))}}return e},user:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?t.payload:e}});function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}var Mt;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Mt||(Mt={}));const jt="popstate";function Ut(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Vt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function zt(e,t){return{usr:e.state,key:e.key,idx:t}}function Bt(e,t,n,r){return void 0===n&&(n=null),Ft({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Wt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function qt(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Wt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Kt(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Mt.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=Mt.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:qt(e);return Ut(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(Ft({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jt,h),l=e,()=>{i.removeEventListener(jt,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Mt.Push;let r=Bt(f.location,e,t);n&&n(r,e),c=u()+1;let h=zt(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=Mt.Replace;let r=Bt(f.location,e,t);n&&n(r,e),c=u();let i=zt(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var Ht;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ht||(Ht={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Gt(e,t,n){void 0===n&&(n="/");let r=ln(("string"===typeof t?Wt(t):t).pathname||"/",n);if(null==r)return null;let i=Qt(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=sn(i[o],an(r));return s}function Qt(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Ut(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=dn([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(Ut(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Qt(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:rn(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of $t(e.path))i(e,t,r);else i(e,t)})),t}function $t(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=$t(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Yt=/^:\w+$/,Jt=3,Xt=2,Zt=1,en=10,tn=-2,nn=e=>"*"===e;function rn(e,t){let n=e.split("/"),r=n.length;return n.some(nn)&&(r+=tn),t&&(r+=Xt),n.filter((e=>!nn(e))).reduce(((e,t)=>e+(Yt.test(t)?Jt:""===t?Zt:en)),r)}function sn(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=on({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:dn([i,c.pathname]),pathnameBase:fn(dn([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=dn([i,c.pathnameBase]))}return s}function on(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Vt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return Vt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function an(e){try{return decodeURI(e)}catch(t){return Vt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ln(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function cn(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function un(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function hn(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Wt(e):(i=Ft({},e),Ut(!i.pathname||!i.pathname.includes("?"),cn("?","pathname","search",i)),Ut(!i.pathname||!i.pathname.includes("#"),cn("#","pathname","hash",i)),Ut(!i.search||!i.search.includes("#"),cn("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Wt(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:pn(r),hash:mn(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const dn=e=>e.join("/").replace(/\/\/+/g,"/"),fn=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",mn=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function gn(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const yn=["post","put","patch","delete"],vn=(new Set(yn),["get",...yn]);new Set(vn),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wn.apply(this,arguments)}const bn=r.createContext(null);const _n=r.createContext(null);const En=r.createContext(null);const Sn=r.createContext(null);const In=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Tn=r.createContext(null);function kn(){return null!=r.useContext(Sn)}function xn(){return kn()||Ut(!1),r.useContext(Sn).location}function Cn(e){r.useContext(En).static||r.useLayoutEffect(e)}function Nn(){let{isDataRoute:e}=r.useContext(In);return e?function(){let{router:e}=Un(Mn.UseNavigateStable),t=zn(jn.UseNavigateStable),n=r.useRef(!1);Cn((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,wn({fromRouteId:t},i)))}),[e,t]);return i}():function(){kn()||Ut(!1);let e=r.useContext(bn),{basename:t,navigator:n}=r.useContext(En),{matches:i}=r.useContext(In),{pathname:s}=xn(),o=JSON.stringify(un(i).map((e=>e.pathnameBase))),a=r.useRef(!1);Cn((()=>{a.current=!0}));let l=r.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=hn(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:dn([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,o,s,e]);return l}()}function An(e,t){let{relative:n}=void 0===t?{}:t,{matches:i}=r.useContext(In),{pathname:s}=xn(),o=JSON.stringify(un(i).map((e=>e.pathnameBase)));return r.useMemo((()=>hn(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function On(e,t,n){kn()||Ut(!1);let{navigator:i}=r.useContext(En),{matches:s}=r.useContext(In),o=s[s.length-1],a=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let c,u=xn();if(t){var h;let e="string"===typeof t?Wt(t):t;"/"===l||(null==(h=e.pathname)?void 0:h.startsWith(l))||Ut(!1),c=e}else c=u;let d=c.pathname||"/",f=Gt(e,{pathname:"/"===l?d:d.slice(l.length)||"/"});let p=Fn(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:dn([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:dn([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n);return t&&p?r.createElement(Sn.Provider,{value:{location:wn({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Mt.Pop}},p):p}function Dn(){let e=function(){var e;let t=r.useContext(Tn),n=Vn(jn.UseRouteError),i=zn(jn.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=gn(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const Rn=r.createElement(Dn,null);class Pn extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?r.createElement(In.Provider,{value:this.props.routeContext},r.createElement(Tn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ln(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(bn);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(In.Provider,{value:t},i)}function Fn(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||Ut(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,i,s)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Rn);let u=t.concat(o.slice(0,s+1)),h=()=>{let t;return t=l?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ln,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(Pn,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var Mn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mn||{}),jn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jn||{});function Un(e){let t=r.useContext(bn);return t||Ut(!1),t}function Vn(e){let t=r.useContext(_n);return t||Ut(!1),t}function zn(e){let t=function(e){let t=r.useContext(In);return t||Ut(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Ut(!1),n.route.id}i.startTransition;function Bn(e){Ut(!1)}function qn(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Mt.Pop,navigator:o,static:a=!1}=e;kn()&&Ut(!1);let l=t.replace(/^\/*/,"/"),c=r.useMemo((()=>({basename:l,navigator:o,static:a})),[l,o,a]);"string"===typeof i&&(i=Wt(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,m=r.useMemo((()=>{let e=ln(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}}),[l,u,h,d,f,p,s]);return null==m?null:r.createElement(En.Provider,{value:c},r.createElement(Sn.Provider,{children:n,value:m}))}function Wn(e){let{children:t,location:n}=e;return On(Kn(t),n)}new Promise((()=>{}));r.Component;function Kn(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Kn(e.props.children,s));e.type!==Bn&&Ut(!1),e.props.index&&e.props.children&&Ut(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Kn(e.props.children,s)),n.push(o)})),n}function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(this,arguments)}function Gn(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Qn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const $n=i.startTransition;o.flushSync;function Yn(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),Kt((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Bt("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:qt(t)}),null,e)}({window:s,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=r.useCallback((e=>{u&&$n?$n((()=>c(e))):c(e)}),[c,u]);return r.useLayoutEffect((()=>a.listen(h)),[a,h]),r.createElement(qn,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}const Jn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Xn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Gn(e,Qn),{basename:p}=r.useContext(En),m=!1;if("string"===typeof u&&Xn.test(u)&&(n=u,Jn))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=ln(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(v){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;kn()||Ut(!1);let{basename:i,navigator:s}=r.useContext(En),{hash:o,pathname:a,search:l}=An(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:dn([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),y=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=Nn(),u=xn(),h=An(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:qt(u)===qt(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});return r.createElement("a",Hn({},f,{href:n||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var er,tr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(er||(er={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(tr||(tr={}));const nr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},rr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ir;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ir extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sr=function(e){return function(e){const t=nr(e);return rr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},or=function(e){try{return rr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ar(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ar(e[n],t[n]));return e}const lr=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,cr=()=>{try{return lr()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/bookstore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&or(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ur=()=>{var e;return null===(e=cr())||void 0===e?void 0:e.config};class hr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function dr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function fr(){var e;const t=null===(e=cr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function pr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function mr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function gr(){const e=dr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yr(){try{return"object"===typeof indexedDB}catch(e){return!1}}class vr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wr.prototype.create)}}class wr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(br,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new vr(n,s,t)}}const br=/\{\$([^}]+)}/g;function _r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Er(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Sr(n)&&Sr(s)){if(!Er(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sr(e){return null!==e&&"object"===typeof e}function Ir(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Tr(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function kr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function xr(e,t){const n=new Cr(e,t);return n.subscribe.bind(n)}class Cr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Nr),void 0===r.error&&(r.error=Nr),void 0===r.complete&&(r.complete=Nr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Nr(){}function Ar(e){return e&&e._delegate?e._delegate:e}class Or{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Dr="[DEFAULT]";class Rr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Dr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Lr=[];var Fr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Fr||(Fr={}));const Mr={debug:Fr.DEBUG,verbose:Fr.VERBOSE,info:Fr.INFO,warn:Fr.WARN,error:Fr.ERROR,silent:Fr.SILENT},jr=Fr.INFO,Ur={[Fr.DEBUG]:"log",[Fr.VERBOSE]:"log",[Fr.INFO]:"info",[Fr.WARN]:"warn",[Fr.ERROR]:"error"},Vr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ur[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class zr{constructor(e){this.name=e,this._logLevel=jr,this._logHandler=Vr,this._userLogHandler=null,Lr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fr.DEBUG,...t),this._logHandler(this,Fr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fr.VERBOSE,...t),this._logHandler(this,Fr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fr.INFO,...t),this._logHandler(this,Fr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fr.WARN,...t),this._logHandler(this,Fr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fr.ERROR,...t),this._logHandler(this,Fr.ERROR,...t)}}const Br=(e,t)=>t.some((t=>e instanceof t));let qr,Wr;const Kr=new WeakMap,Hr=new WeakMap,Gr=new WeakMap,Qr=new WeakMap,$r=new WeakMap;let Yr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Wr||(Wr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ei(this),n),Zr(Kr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zr(e.apply(ei(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ei(this),t,...r);return Gr.set(s,t.sort?t.sort():[t]),Zr(s)}}function Xr(e){return"function"===typeof e?Jr(e):(e instanceof IDBTransaction&&function(e){if(Hr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Hr.set(e,t)}(e),Br(e,qr||(qr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Yr):e)}function Zr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Zr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Kr.set(t,e)})).catch((()=>{})),$r.set(t,e),t}(e);if(Qr.has(e))return Qr.get(e);const t=Xr(e);return t!==e&&(Qr.set(e,t),$r.set(t,e)),t}const ei=e=>$r.get(e);const ti=["get","getKey","getAll","getAllKeys","count"],ni=["put","add","delete","clear"],ri=new Map;function ii(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ri.get(t))return ri.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ni.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ti.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ri.set(t,s),s}Yr=(e=>({...e,get:(t,n,r)=>ii(t,n)||e.get(t,n,r),has:(t,n)=>!!ii(t,n)||e.has(t,n)}))(Yr);class si{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const oi="@firebase/app",ai="0.9.25",li=new zr("@firebase/app"),ci="[DEFAULT]",ui={[oi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hi=new Map,di=new Map;function fi(e,t){try{e.container.addComponent(t)}catch(n){li.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function pi(e,t){e.container.addOrOverwriteComponent(t)}function mi(e){const t=e.name;if(di.has(t))return li.debug("There were multiple attempts to register component ".concat(t,".")),!1;di.set(t,e);for(const n of hi.values())fi(n,e);return!0}function gi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;gi(e,t).clearInstance(n)}function vi(){di.clear()}const wi=new wr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Or("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}const _i="10.7.1";function Ei(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ci,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wi.create("bad-app-name",{appName:String(i)});if(n||(n=ur()),!n)throw wi.create("no-options");const s=hi.get(i);if(s){if(Er(n,s.options)&&Er(r,s.config))return s;throw wi.create("duplicate-app",{appName:i})}const o=new Pr(i);for(const l of di.values())o.addComponent(l);const a=new bi(n,r,o);return hi.set(i,a),a}function Si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;const t=hi.get(e);if(!t&&e===ci&&ur())return Ei();if(!t)throw wi.create("no-app",{appName:e});return t}function Ii(){return Array.from(hi.values())}async function Ti(e){const t=e.name;hi.has(t)&&(hi.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ki(e,t,n){var r;let i=null!==(r=ui[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void li.warn(e.join(" "))}mi(new Or("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function xi(e,t){if(null!==e&&"function"!==typeof e)throw wi.create("invalid-log-argument");!function(e,t){for(const n of Lr){let r=null;t&&t.level&&(r=Mr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Fr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Ci(e){var t;t=e,Lr.forEach((e=>{e.setLogLevel(t)}))}const Ni="firebase-heartbeat-database",Ai=1,Oi="firebase-heartbeat-store";let Di=null;function Ri(){return Di||(Di=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Zr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Zr(o.result),e.oldVersion,e.newVersion,Zr(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ni,Ai,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Oi)}}).catch((e=>{throw wi.create("idb-open",{originalErrorMessage:e.message})}))),Di}async function Pi(e,t){try{const n=(await Ri()).transaction(Oi,"readwrite"),r=n.objectStore(Oi);await r.put(t,Li(e)),await n.done}catch(n){if(n instanceof vr)li.warn(n.message);else{const e=wi.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});li.warn(e.message)}}}function Li(e){return"".concat(e.name,"!").concat(e.options.appId)}class Fi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ji(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mi();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Mi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ui(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ui(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=sr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Mi(){return(new Date).toISOString().substring(0,10)}class ji{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!yr()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ri();return await t.transaction(Oi).objectStore(Oi).get(Li(e))}catch(t){if(t instanceof vr)li.warn(t.message);else{const e=wi.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});li.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Pi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ui(e){return sr(JSON.stringify({version:2,heartbeats:e})).length}var Vi;Vi="",mi(new Or("platform-logger",(e=>new si(e)),"PRIVATE")),mi(new Or("heartbeat",(e=>new Fi(e)),"PRIVATE")),ki(oi,ai,Vi),ki(oi,ai,"esm2017"),ki("fire-js","");class zi{constructor(e,t){this._delegate=e,this.firebase=t,fi(e,new Or("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ti(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){fi(this._delegate,e)}_addOrOverwriteComponent(e){pi(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Bi=new wr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const qi=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Ei(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(_r(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:ki,setLogLevel:Ci,onLog:xi,apps:null,SDK_VERSION:_i,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(mi(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Bi.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&ar(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!_r(n,e=e||ci))throw Bi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(zi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){ar(n,e)},createSubscribe:xr,ErrorFactory:wr,deepExtend:ar}),n}(),Wi=new zr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Wi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Wi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ki=qi;!function(e){ki("@firebase/app-compat","0.2.25",e)}();Ki.registerVersion("firebase","10.7.1","app-compat");var Hi,Gi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qi={},$i=$i||{},Yi=Gi||self;function Ji(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Zi="closure_uid_"+(1e9*Math.random()>>>0),es=0;function ts(e,t,n){return e.call.apply(e.bind,arguments)}function ns(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function rs(e,t,n){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ts:ns).apply(null,arguments)}function is(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ss(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function os(){this.s=this.s,this.o=this.o}os.prototype.s=!1,os.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Zi)&&e[Zi]||(e[Zi]=++es))},os.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const as=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ls(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function cs(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Ji(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function us(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}us.prototype.h=function(){this.defaultPrevented=!0};var hs=function(){if(!Yi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Yi.addEventListener("test",e,t),Yi.removeEventListener("test",e,t)}catch(n){}return e}();function ds(e){return/^[\s\xa0]*$/.test(e)}function fs(){var e=Yi.navigator;return e&&(e=e.userAgent)?e:""}function ps(e){return-1!=fs().indexOf(e)}function ms(e){return ms[" "](e),e}ms[" "]=function(){};var gs,ys,vs=ps("Opera"),ws=ps("Trident")||ps("MSIE"),bs=ps("Edge"),_s=bs||ws,Es=ps("Gecko")&&!(-1!=fs().toLowerCase().indexOf("webkit")&&!ps("Edge"))&&!(ps("Trident")||ps("MSIE"))&&!ps("Edge"),Ss=-1!=fs().toLowerCase().indexOf("webkit")&&!ps("Edge");function Is(){var e=Yi.document;return e?e.documentMode:void 0}e:{var Ts="",ks=function(){var e=fs();return Es?/rv:([^\);]+)(\)|;)/.exec(e):bs?/Edge\/([\d\.]+)/.exec(e):ws?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ss?/WebKit\/(\S+)/.exec(e):vs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ks&&(Ts=ks?ks[1]:""),ws){var xs=Is();if(null!=xs&&xs>parseFloat(Ts)){gs=String(xs);break e}}gs=Ts}if(Yi.document&&ws){var Cs=Is();ys=Cs||(parseInt(gs,10)||void 0)}else ys=void 0;var Ns=ys;function As(e,t){if(us.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Es){e:{try{ms(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Os[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&As.$.h.call(this)}}ss(As,us);var Os={2:"touch",3:"pen",4:"mouse"};As.prototype.h=function(){As.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ds="closure_listenable_"+(1e6*Math.random()|0),Rs=0;function Ps(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Rs,this.fa=this.ia=!1}function Ls(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Fs(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ms(e){const t={};for(const n in e)t[n]=e[n];return t}const js="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Us(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<js.length;t++)n=js[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vs(e){this.src=e,this.g={},this.h=0}function zs(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=as(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ls(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Vs.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Bs(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ps(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var qs="closure_lm_"+(1e6*Math.random()|0),Ws={};function Ks(e,t,n,r,i){if(r&&r.once)return Gs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ks(e,t[s],n,r,i);return null}return n=eo(n),e&&e[Ds]?e.O(t,n,Xi(r)?!!r.capture:!!r,i):Hs(e,t,n,!1,r,i)}function Hs(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Xi(i)?!!i.capture:!!i,a=Xs(e);if(a||(e[qs]=a=new Vs(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Js;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hs||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ys(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Gs(e,t[s],n,r,i);return null}return n=eo(n),e&&e[Ds]?e.P(t,n,Xi(r)?!!r.capture:!!r,i):Hs(e,t,n,!0,r,i)}function Qs(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Qs(e,t[s],n,r,i);else r=Xi(r)?!!r.capture:!!r,n=eo(n),e&&e[Ds]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bs(s=e.g[t],n,r,i))&&(Ls(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Xs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bs(t,n,r,i)),(n=-1<e?t[e]:null)&&$s(n))}function $s(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ds])zs(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ys(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xs(t))?(zs(n,e),0==n.h&&(n.src=null,t[qs]=null)):Ls(e)}}}function Ys(e){return e in Ws?Ws[e]:Ws[e]="on"+e}function Js(e,t){if(e.fa)e=!0;else{t=new As(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$s(e),e=n.call(r,t)}return e}function Xs(e){return(e=e[qs])instanceof Vs?e:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function eo(e){return"function"===typeof e?e:(e[Zs]||(e[Zs]=function(t){return e.handleEvent(t)}),e[Zs])}function to(){os.call(this),this.i=new Vs(this),this.S=this,this.J=null}function no(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new us(t,e);else if(t instanceof us)t.target=t.target||e;else{var i=t;Us(t=new us(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ro(o,r,!0,t)&&i}if(i=ro(o=t.g=e,r,!0,t)&&i,i=ro(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ro(o=t.g=n[s],r,!1,t)&&i}function ro(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&zs(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ss(to,os),to.prototype[Ds]=!0,to.prototype.removeEventListener=function(e,t,n,r){Qs(this,e,t,n,r)},to.prototype.N=function(){if(to.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ls(n[r]);delete t.g[e],t.h--}}this.J=null},to.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},to.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var io=Yi.JSON.stringify;function so(){var e=fo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var oo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ao),(e=>e.reset()));class ao{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lo(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function co(e){Yi.setTimeout((()=>{throw e}),0)}let uo,ho=!1,fo=new class{constructor(){this.h=this.g=null}add(e,t){const n=oo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},po=()=>{const e=Yi.Promise.resolve(void 0);uo=()=>{e.then(mo)}};var mo=()=>{for(var e;e=so();){try{e.h.call(e.g)}catch(n){co(n)}var t=oo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ho=!1};function go(e,t){to.call(this),this.h=e||1,this.g=t||Yi,this.j=rs(this.qb,this),this.l=Date.now()}function yo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function vo(e,t,n){if("function"===typeof e)n&&(e=rs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=rs(e.handleEvent,e)}return 2147483647<Number(t)?-1:Yi.setTimeout(e,t||0)}function wo(e){e.g=vo((()=>{e.g=null,e.i&&(e.i=!1,wo(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ss(go,to),(Hi=go.prototype).ga=!1,Hi.T=null,Hi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),no(this,"tick"),this.ga&&(yo(this),this.start()))}},Hi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hi.N=function(){go.$.N.call(this),yo(this),delete this.g};class bo extends os{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wo(this)}N(){super.N(),this.g&&(Yi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(e){os.call(this),this.h=e,this.g={}}ss(_o,os);var Eo=[];function So(e,t,n,r){Array.isArray(n)||(n&&(Eo[0]=n.toString()),n=Eo);for(var i=0;i<n.length;i++){var s=Ks(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Io(e){Fs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$s(e)}),e),e.g={}}function To(){this.g=!0}function ko(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return io(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_o.prototype.N=function(){_o.$.N.call(this),Io(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},To.prototype.Ea=function(){this.g=!1},To.prototype.info=function(){};var xo={},Co=null;function No(){return Co=Co||new to}function Ao(e){us.call(this,xo.Ta,e)}function Oo(e){const t=No();no(t,new Ao(t))}function Do(e,t){us.call(this,xo.STAT_EVENT,e),this.stat=t}function Ro(e){const t=No();no(t,new Do(t,e))}function Po(e,t){us.call(this,xo.Ua,e),this.size=t}function Lo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Yi.setTimeout((function(){e()}),t)}xo.Ta="serverreachability",ss(Ao,us),xo.STAT_EVENT="statevent",ss(Do,us),xo.Ua="timingevent",ss(Po,us);var Fo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Mo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jo(){}function Uo(e){return e.h||(e.h=e.i())}function Vo(){}jo.prototype.h=null;var zo,Bo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qo(){us.call(this,"d")}function Wo(){us.call(this,"c")}function Ko(){}function Ho(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new _o(this),this.P=Qo,e=_s?125:void 0,this.V=new go(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Go}function Go(){this.i=null,this.g="",this.h=!1}ss(qo,us),ss(Wo,us),ss(Ko,jo),Ko.prototype.g=function(){return new XMLHttpRequest},Ko.prototype.i=function(){return{}},zo=new Ko;var Qo=45e3,$o={},Yo={};function Jo(e,t,n){e.L=1,e.A=ga(ha(t)),e.u=n,e.S=!0,Xo(e,null)}function Xo(e,t){e.G=Date.now(),na(e),e.B=ha(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Na(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Go,e.g=Al(e.l,n?t:null,!e.u),0<e.O&&(e.M=new bo(rs(e.Pa,e,e.g),e.O)),So(e.U,e.g,"readystatechange",e.nb),t=e.I?Ms(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Oo(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Zo(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ea(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ta(e,n),r==Yo){4==t&&(e.s=4,Ro(14),i=!1),ko(e.j,e.m,null,"[Incomplete Response]");break}if(r==$o){e.s=4,Ro(15),ko(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ko(e.j,e.m,r,null),aa(e,r)}Zo(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ro(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),El(t),t.M=!0,Ro(11))):(ko(e.j,e.m,n,"[Invalid Chunked Response]"),oa(e),sa(e))}function ta(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Yo:(n=Number(t.substring(n,r)),isNaN(n)?$o:(r+=1)+n>t.length?Yo:(t=t.slice(r,r+n),e.o=r+n,t))}function na(e){e.Y=Date.now()+e.P,ra(e,e.P)}function ra(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Lo(rs(e.lb,e),t)}function ia(e){e.C&&(Yi.clearTimeout(e.C),e.C=null)}function sa(e){0==e.l.H||e.J||Tl(e.l,e)}function oa(e){ia(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,yo(e.V),Io(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function aa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Fa(n.i,e)))if(!e.K&&Fa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Il(n),pl(n)}_l(n),Ro(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Lo(rs(n.ib,n),6e3));if(1>=La(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else xl(n,11)}else if((e.K||n.g==e)&&Il(n),!ds(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ma(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ma(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Nl(r,r.J?r.pa:null,r.Y),o.K){ja(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ia(a),na(a)),r.g=o}else bl(r);0<n.j.length&&gl(n)}else"stop"!=c[0]&&"close"!=c[0]||xl(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xl(n,7):fl(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Oo()}catch(c){}}function la(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ji(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ji(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ji(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Hi=Ho.prototype).setTimeout=function(e){this.P=e},Hi.nb=function(e){e=e.target;const t=this.M;t&&3==al(e)?t.l():this.Pa(e)},Hi.Pa=function(e){try{if(e==this.g)e:{const u=al(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||_s||this.g&&(this.h.h||this.g.ja()||ll(this.g)))){this.J||4!=u||7==t||Oo(),ia(this);var n=this.g.da();this.ca=n;t:if(Zo(this)){var r=ll(this.g);e="";var i=r.length,s=4==al(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){oa(this),sa(this);var o="";break t}this.h.i=new Yi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ds(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Ro(12),oa(this),sa(this);break e}ko(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,n)}this.S?(ea(this,u,o),_s&&this.i&&3==u&&(So(this.U,this.V,"tick",this.mb),this.V.start())):(ko(this.j,this.m,o,null),aa(this,o)),4==u&&oa(this),this.i&&!this.J&&(4==u?Tl(this.l,this):(this.i=!1,na(this)))}else(function(e){const t={};e=(e.g&&2<=al(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ds(e[r]))continue;var n=lo(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ro(12)):(this.s=0,Ro(13)),oa(this),sa(this)}}}catch(u){}},Hi.mb=function(){if(this.g){var e=al(this.g),t=this.g.ja();this.o<t.length&&(ia(this),ea(this,e,t),this.i&&4!=e&&na(this))}},Hi.cancel=function(){this.J=!0,oa(this)},Hi.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Oo(),Ro(17)),oa(this),this.s=2,sa(this)):ra(this,this.Y-e)};var ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ua(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ua){this.h=e.h,da(this,e.j),this.s=e.s,this.g=e.g,fa(this,e.m),this.l=e.l;var t=e.i,n=new Ta;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pa(this,n),this.o=e.o}else e&&(t=String(e).match(ca))?(this.h=!1,da(this,t[1]||"",!0),this.s=ya(t[2]||""),this.g=ya(t[3]||"",!0),fa(this,t[4]),this.l=ya(t[5]||"",!0),pa(this,t[6]||"",!0),this.o=ya(t[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}function ha(e){return new ua(e)}function da(e,t,n){e.j=n?ya(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pa(e,t,n){t instanceof Ta?(e.i=t,function(e,t){t&&!e.j&&(ka(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xa(this,t),Na(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=va(t,Sa)),e.i=new Ta(t,e.h))}function ma(e,t,n){e.i.set(t,n)}function ga(e){return ma(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ya(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function va(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ua.prototype.toString=function(){var e=[],t=this.j;t&&e.push(va(t,ba,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(va(t,ba,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(va(n,"/"==n.charAt(0)?Ea:_a,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",va(n,Ia)),e.join("")};var ba=/[#\/\?@]/g,_a=/[#\?:]/g,Ea=/[#\?]/g,Sa=/[#\?@]/g,Ia=/#/g;function Ta(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ka(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xa(e,t){ka(e),t=Aa(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ca(e,t){return ka(e),t=Aa(e,t),e.g.has(t)}function Na(e,t,n){xa(e,t),0<n.length&&(e.i=null,e.g.set(Aa(e,t),ls(n)),e.h+=n.length)}function Aa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hi=Ta.prototype).add=function(e,t){ka(this),this.i=null,e=Aa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hi.forEach=function(e,t){ka(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Hi.ta=function(){ka(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Hi.Z=function(e){ka(this);let t=[];if("string"===typeof e)Ca(this,e)&&(t=t.concat(this.g.get(Aa(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Hi.set=function(e,t){return ka(this),this.i=null,Ca(this,e=Aa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Hi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Oa=class{constructor(e,t){this.g=e,this.map=t}};function Da(e){this.l=e||Ra,Yi.PerformanceNavigationTiming?e=0<(e=Yi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Yi.g&&Yi.g.Ka&&Yi.g.Ka()&&Yi.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ra=10;function Pa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function La(e){return e.h?1:e.g?e.g.size:0}function Fa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ma(e,t){e.g?e.g.add(t):e.h=t}function ja(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ua(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ls(e.i)}Da.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Va,za=class{stringify(e){return Yi.JSON.stringify(e,void 0)}parse(e){return Yi.JSON.parse(e,void 0)}};function Ba(){this.g=new za}function qa(e,t,n){const r=n||"";try{la(e,(function(e,n){let i=e;Xi(e)&&(i=io(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Ka(e){this.l=e.ec||null,this.j=e.ob||!1}function Ha(e,t){to.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ss(Ka,jo),Ka.prototype.g=function(){return new Ha(this.l,this.j)},Ka.prototype.i=(Va={},function(){return Va}),ss(Ha,to);var Ga=0;function Qa(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function $a(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ya(e)}function Ya(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hi=Ha.prototype).open=function(e,t){if(this.readyState!=Ga)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ya(this)},Hi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Yi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Hi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$a(this)),this.readyState=Ga},Hi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Yi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qa(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Hi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$a(this):Ya(this),3==this.readyState&&Qa(this)}},Hi.Za=function(e){this.g&&(this.response=this.responseText=e,$a(this))},Hi.Ya=function(e){this.g&&(this.response=e,$a(this))},Hi.ka=function(){this.g&&$a(this)},Hi.setRequestHeader=function(e,t){this.v.append(e,t)},Hi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ja=Yi.JSON.parse;function Xa(e){to.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Za,this.L=this.M=!1}ss(Xa,to);var Za="",el=/^https?$/i,tl=["POST","PUT"];function nl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rl(e),sl(e)}function rl(e){e.F||(e.F=!0,no(e,"complete"),no(e,"error"))}function il(e){if(e.h&&"undefined"!=typeof $i&&(!e.C[1]||4!=al(e)||2!=e.da()))if(e.v&&4==al(e))vo(e.La,0,e);else if(no(e,"readystatechange"),4==al(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(ca)[1]||null;!i&&Yi.self&&Yi.self.location&&(i=Yi.self.location.protocol.slice(0,-1)),r=!el.test(i?i.toLowerCase():"")}n=r}if(n)no(e,"complete"),no(e,"success");else{e.m=6;try{var s=2<al(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",rl(e)}}finally{sl(e)}}}function sl(e,t){if(e.g){ol(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||no(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ol(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Yi.clearTimeout(e.A),e.A=null)}function al(e){return e.g?e.g.readyState:0}function ll(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Za:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(mc){return null}}function cl(e){let t="";return Fs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ul(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=cl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ma(e,t,n))}function hl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function dl(e){this.Ga=0,this.j=[],this.l=new To,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hl("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hl("baseRetryDelayMs",5e3,e),this.hb=hl("retryDelaySeedMs",1e4,e),this.eb=hl("forwardChannelMaxRetries",2,e),this.xa=hl("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Da(e&&e.concurrentRequestLimit),this.Ja=new Ba,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fl(e){if(ml(e),3==e.H){var t=e.W++,n=ha(e.I);if(ma(n,"SID",e.K),ma(n,"RID",t),ma(n,"TYPE","terminate"),vl(e,n),(t=new Ho(e,e.l,t)).L=2,t.A=ga(ha(n)),n=!1,Yi.navigator&&Yi.navigator.sendBeacon)try{n=Yi.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Yi.Image&&((new Image).src=t.A,n=!0),n||(t.g=Al(t.l,null),t.g.ha(t.A)),t.G=Date.now(),na(t)}Cl(e)}function pl(e){e.g&&(El(e),e.g.cancel(),e.g=null)}function ml(e){pl(e),e.u&&(Yi.clearTimeout(e.u),e.u=null),Il(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Yi.clearTimeout(e.m),e.m=null)}function gl(e){if(!Pa(e.i)&&!e.m){e.m=!0;var t=e.Na;uo||po(),ho||(uo(),ho=!0),fo.add(t,e),e.C=0}}function yl(e,t){var n;n=t?t.m:e.W++;const r=ha(e.I);ma(r,"SID",e.K),ma(r,"RID",n),ma(r,"AID",e.V),vl(e,r),e.o&&e.s&&ul(r,e.o,e.s),n=new Ho(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=wl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ma(e.i,n),Jo(n,r,t)}function vl(e,t){e.na&&Fs(e.na,(function(e,n){ma(t,n,e)})),e.h&&la({},(function(e,n){ma(t,n,e)}))}function wl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?rs(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{qa(a,e,"req"+n+"_")}catch(Du){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function bl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;uo||po(),ho||(uo(),ho=!0),fo.add(t,e),e.A=0}}function _l(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Lo(rs(e.Ma,e),kl(e,e.A)),e.A++,!0)}function El(e){null!=e.B&&(Yi.clearTimeout(e.B),e.B=null)}function Sl(e){e.g=new Ho(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ha(e.wa);ma(t,"RID","rpc"),ma(t,"SID",e.K),ma(t,"AID",e.V),ma(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ma(t,"TO",e.qa),ma(t,"TYPE","xmlhttp"),vl(e,t),e.o&&e.s&&ul(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=ga(ha(t)),n.u=null,n.S=!0,Xo(n,e)}function Il(e){null!=e.v&&(Yi.clearTimeout(e.v),e.v=null)}function Tl(e,t){var n=null;if(e.g==t){Il(e),El(e),e.g=null;var r=2}else{if(!Fa(e.i,t))return;n=t.F,ja(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;no(r=No(),new Po(r,n)),gl(e)}else bl(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(La(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Lo(rs(e.Na,e,t),kl(e,e.C)),e.C++,!0))}(e,t)||2==r&&_l(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xl(e,5);break;case 4:xl(e,10);break;case 3:xl(e,6);break;default:xl(e,2)}}function kl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function xl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=rs(e.pb,e);n||(n=new ua("//www.google.com/images/cleardot.gif"),Yi.location&&"http"==Yi.location.protocol||da(n,"https"),ga(n)),function(e,t){const n=new To;if(Yi.Image){const r=new Image;r.onload=is(Wa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=is(Wa,n,r,"TestLoadImage: error",!1,t),r.onabort=is(Wa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=is(Wa,n,r,"TestLoadImage: timeout",!1,t),Yi.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ro(2);e.H=0,e.h&&e.h.za(t),Cl(e),ml(e)}function Cl(e){if(e.H=0,e.ma=[],e.h){const t=Ua(e.i);0==t.length&&0==e.j.length||(cs(e.ma,t),cs(e.ma,e.j),e.i.i.length=0,ls(e.j),e.j.length=0),e.h.ya()}}function Nl(e,t,n){var r=n instanceof ua?ha(n):new ua(n);if(""!=r.g)t&&(r.g=t+"."+r.g),fa(r,r.m);else{var i=Yi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ua(null);r&&da(s,r),t&&(s.g=t),i&&fa(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ma(r,n,t),ma(r,"VER",e.ra),vl(e,r),r}function Al(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Xa(new Ka({ob:n})):new Xa(e.va)).Oa(e.J),t}function Ol(){}function Dl(){if(ws&&!(10<=Number(Ns)))throw Error("Environmental error: no available transport.")}function Rl(e,t){to.call(this),this.g=new dl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ds(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ds(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Fl(this)}function Pl(e){qo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ll(){Wo.call(this),this.status=1}function Fl(e){this.g=e}function Ml(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function jl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ul(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Hi=Xa.prototype).Oa=function(e){this.M=e},Hi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zo.g(),this.C=this.u?Uo(this.u):Uo(zo),this.g.onreadystatechange=rs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void nl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Yi.FormData&&e instanceof Yi.FormData,!(0<=as(tl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ol(this),0<this.B&&((this.L=function(e){return ws&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.ua,this)):this.A=vo(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){nl(this,s)}},Hi.ua=function(){"undefined"!=typeof $i&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,no(this,"timeout"),this.abort(8))},Hi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,no(this,"complete"),no(this,"abort"),sl(this))},Hi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sl(this,!0)),Xa.$.N.call(this)},Hi.La=function(){this.s||(this.G||this.v||this.l?il(this):this.kb())},Hi.kb=function(){il(this)},Hi.isActive=function(){return!!this.g},Hi.da=function(){try{return 2<al(this)?this.g.status:-1}catch(Va){return-1}},Hi.ja=function(){try{return this.g?this.g.responseText:""}catch(Va){return""}},Hi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ja(t)}},Hi.Ia=function(){return this.m},Hi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Hi=dl.prototype).ra=8,Hi.H=1,Hi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ho(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ms(s),Us(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=wl(this,i,t),ma(n=ha(this.I),"RID",e),ma(n,"CVER",22),this.F&&ma(n,"X-HTTP-Session-Id",this.F),vl(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(cl(s)))+"&"+t:this.o&&ul(n,this.o,s)),Ma(this.i,i),this.bb&&ma(n,"TYPE","init"),this.P?(ma(n,"$req",t),ma(n,"SID","null"),i.aa=!0,Jo(i,n,null)):Jo(i,n,t),this.H=2}}else 3==this.H&&(e?yl(this,e):0==this.j.length||Pa(this.i)||yl(this))},Hi.Ma=function(){if(this.u=null,Sl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Lo(rs(this.jb,this),e)}},Hi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ro(10),pl(this),Sl(this))},Hi.ib=function(){null!=this.v&&(this.v=null,pl(this),_l(this),Ro(19))},Hi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ro(2)):(this.l.info("Failed to ping google.com"),Ro(1))},Hi.isActive=function(){return!!this.h&&this.h.isActive(this)},(Hi=Ol.prototype).Ba=function(){},Hi.Aa=function(){},Hi.za=function(){},Hi.ya=function(){},Hi.isActive=function(){return!0},Hi.Va=function(){},Dl.prototype.g=function(e,t){return new Rl(e,t)},ss(Rl,to),Rl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ro(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Nl(e,null,e.Y),gl(e)},Rl.prototype.close=function(){fl(this.g)},Rl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=io(e),e=n);t.j.push(new Oa(t.fb++,e)),3==t.H&&gl(t)},Rl.prototype.N=function(){this.g.h=null,delete this.j,fl(this.g),delete this.g,Rl.$.N.call(this)},ss(Pl,qo),ss(Ll,Wo),ss(Fl,Ol),Fl.prototype.Ba=function(){no(this.g,"a")},Fl.prototype.Aa=function(e){no(this.g,new Pl(e))},Fl.prototype.za=function(e){no(this.g,new Ll)},Fl.prototype.ya=function(){no(this.g,"b")},ss(Ml,(function(){this.blockSize=-1})),Ml.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ml.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)jl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){jl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){jl(this,r),i=0;break}}this.h=i,this.i+=t},Ml.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Vl={};function zl(e){return-128<=e&&128>e?function(e,t){var n=Vl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ul([0|e],0>e?-1:0)})):new Ul([0|e],0>e?-1:0)}function Bl(e){if(isNaN(e)||!isFinite(e))return Wl;if(0>e)return $l(Bl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ql;return new Ul(t,0)}var ql=4294967296,Wl=zl(0),Kl=zl(1),Hl=zl(16777216);function Gl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ql(e){return-1==e.h}function $l(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ul(n,~e.h).add(Kl)}function Yl(e,t){return e.add($l(t))}function Jl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xl(e,t){this.g=e,this.h=t}function Zl(e,t){if(Gl(t))throw Error("division by zero");if(Gl(e))return new Xl(Wl,Wl);if(Ql(e))return t=Zl($l(e),t),new Xl($l(t.g),$l(t.h));if(Ql(t))return t=Zl(e,$l(t)),new Xl($l(t.g),t.h);if(30<e.g.length){if(Ql(e)||Ql(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Kl,r=t;0>=r.X(e);)n=ec(n),r=ec(r);var i=tc(n,1),s=tc(r,1);for(r=tc(r,2),n=tc(n,2);!Gl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=tc(r,1),n=tc(n,1)}return t=Yl(e,i.R(t)),new Xl(i,t)}for(i=Wl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Bl(n)).R(t);Ql(o)||0<o.X(e);)o=(s=Bl(n-=r)).R(t);Gl(s)&&(s=Kl),i=i.add(s),e=Yl(e,o)}return new Xl(i,e)}function ec(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ul(n,e.h)}function tc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ul(i,e.h)}(Hi=Ul.prototype).ea=function(){if(Ql(this))return-$l(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ql+r)*t,t*=ql}return e},Hi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Gl(this))return"0";if(Ql(this))return"-"+$l(this).toString(e);for(var t=Bl(Math.pow(e,6)),n=this,r="";;){var i=Zl(n,t).g,s=((0<(n=Yl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Gl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Hi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Hi.X=function(e){return Ql(e=Yl(this,e))?-1:Gl(e)?0:1},Hi.abs=function(){return Ql(this)?$l(this):this},Hi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ul(n,-2147483648&n[n.length-1]?-1:0)},Hi.R=function(e){if(Gl(this)||Gl(e))return Wl;if(Ql(this))return Ql(e)?$l(this).R($l(e)):$l($l(this).R(e));if(Ql(e))return $l(this.R($l(e)));if(0>this.X(Hl)&&0>e.X(Hl))return Bl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Jl(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Jl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Jl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Jl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ul(n,0)},Hi.gb=function(e){return Zl(this,e).h},Hi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ul(n,this.h&e.h)},Hi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ul(n,this.h|e.h)},Hi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ul(n,this.h^e.h)},Dl.prototype.createWebChannel=Dl.prototype.g,Rl.prototype.send=Rl.prototype.u,Rl.prototype.open=Rl.prototype.m,Rl.prototype.close=Rl.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Mo.COMPLETE="complete",Vo.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",to.prototype.listen=to.prototype.O,Xa.prototype.listenOnce=Xa.prototype.P,Xa.prototype.getLastError=Xa.prototype.Sa,Xa.prototype.getLastErrorCode=Xa.prototype.Ia,Xa.prototype.getStatus=Xa.prototype.da,Xa.prototype.getResponseJson=Xa.prototype.Wa,Xa.prototype.getResponseText=Xa.prototype.ja,Xa.prototype.send=Xa.prototype.ha,Xa.prototype.setWithCredentials=Xa.prototype.Oa,Ml.prototype.digest=Ml.prototype.l,Ml.prototype.reset=Ml.prototype.reset,Ml.prototype.update=Ml.prototype.j,Ul.prototype.add=Ul.prototype.add,Ul.prototype.multiply=Ul.prototype.R,Ul.prototype.modulo=Ul.prototype.gb,Ul.prototype.compare=Ul.prototype.X,Ul.prototype.toNumber=Ul.prototype.ea,Ul.prototype.toString=Ul.prototype.toString,Ul.prototype.getBits=Ul.prototype.D,Ul.fromNumber=Bl,Ul.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return $l(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Bl(Math.pow(n,8)),i=Wl,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Bl(Math.pow(n,o)),i=i.R(o).add(Bl(a))):i=(i=i.R(r)).add(Bl(a))}return i};var nc=Qi.createWebChannelTransport=function(){return new Dl},rc=Qi.getStatEventTarget=function(){return No()},ic=Qi.ErrorCode=Fo,sc=Qi.EventType=Mo,oc=Qi.Event=xo,ac=Qi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lc=(Qi.FetchXmlHttpFactory=Ka,Qi.WebChannel=Vo),cc=Qi.XhrIo=Xa,uc=Qi.Md5=Ml,hc=Qi.Integer=Ul;const dc="@firebase/firestore";class fc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fc.UNAUTHENTICATED=new fc(null),fc.GOOGLE_CREDENTIALS=new fc("google-credentials-uid"),fc.FIRST_PARTY=new fc("first-party-uid"),fc.MOCK_USER=new fc("mock-user");let pc="10.7.0";const mc=new zr("@firebase/firestore");function gc(){return mc.logLevel}function yc(e){if(mc.logLevel<=Fr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(bc);mc.debug("Firestore (".concat(pc,"): ").concat(e),...i)}}function vc(e){if(mc.logLevel<=Fr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(bc);mc.error("Firestore (".concat(pc,"): ").concat(e),...i)}}function wc(e){if(mc.logLevel<=Fr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(bc);mc.warn("Firestore (".concat(pc,"): ").concat(e),...i)}}function bc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function _c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(pc,") INTERNAL ASSERTION FAILED: ")+e;throw vc(t),new Error(t)}function Ec(e,t){e||_c()}function Sc(e,t){return e}const Ic={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tc extends vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class kc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Cc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fc.UNAUTHENTICATED)))}shutdown(){}}class Nc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ac{constructor(e){this.t=e,this.currentUser=fc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new kc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{yc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(yc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(yc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ec("string"==typeof t.accessToken),new xc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ec(null===e||"string"==typeof e),new fc(e)}}class Oc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=fc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Oc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(fc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&yc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,yc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{yc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):yc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ec("string"==typeof e.token),this.R=e.token,new Rc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Lc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Fc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Lc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Mc(e,t){return e<t?-1:e>t?1:0}function jc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Uc(e){return e+"\0"}class Vc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vc.fromMillis(Date.now())}static fromDate(e){return Vc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Vc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mc(this.nanoseconds,e.nanoseconds):Mc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zc(e)}static min(){return new zc(new Vc(0,0))}static max(){return new zc(new Vc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bc{constructor(e,t,n){void 0===t?t=0:t>e.length&&_c(),void 0===n?n=e.length-t:n>e.length-t&&_c(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qc extends Bc{construct(e,t,n){return new qc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new qc(e)}static emptyPath(){return new qc([])}}const Wc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kc extends Bc{construct(e,t,n){return new Kc(e,t,n)}static isValidIdentifier(e){return Wc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Tc(Ic.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Tc(Ic.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Tc(Ic.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kc(t)}static emptyPath(){return new Kc([])}}class Hc{constructor(e){this.path=e}static fromPath(e){return new Hc(qc.fromString(e))}static fromName(e){return new Hc(qc.fromString(e).popFirst(5))}static empty(){return new Hc(qc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Hc(new qc(e.slice()))}}class Gc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Qc(e){return e.fields.find((e=>2===e.kind))}function $c(e){return e.fields.filter((e=>2!==e.kind))}Gc.UNKNOWN_ID=-1;class Yc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jc(0,eu.min())}}function Xc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=zc.fromTimestamp(1e9===r?new Vc(n+1,0):new Vc(n,r));return new eu(i,Hc.empty(),t)}function Zc(e){return new eu(e.readTime,e.key,-1)}class eu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new eu(zc.min(),Hc.empty(),-1)}static max(){return new eu(zc.max(),Hc.empty(),-1)}}function tu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Hc.comparator(e.documentKey,t.documentKey),0!==n?n:Mc(e.largestBatchId,t.largestBatchId))}const nu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ru{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function iu(e){if(e.code!==Ic.FAILED_PRECONDITION||e.message!==nu)throw e;yc("LocalStore","Unexpectedly lost primary lease")}class su{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_c(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new su(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof su?t:su.resolve(t)}catch(e){return su.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):su.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):su.reject(t)}static resolve(e){return new su(((t,n)=>{t(e)}))}static reject(e){return new su(((t,n)=>{n(e)}))}static waitFor(e){return new su(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=su.resolve(!1);for(const n of e)t=t.next((e=>e?su.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new su(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new su(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ou{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new kc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new cu(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=pu(t.target.error);this.V.reject(new cu(e,n))}}static open(e,t,n,r){try{return new ou(t,e.transaction(r,n))}catch(e){throw new cu(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(yc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hu(t)}}class au{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===au.S(dr())&&vc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yc("SimpleDb","Removing database:",e),du(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yr())return!1;if(au.C())return!0;const e=dr(),t=au.S(e),n=0<t&&t<10,r=au.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/bookstore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(yc("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Tc(Ic.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Tc(Ic.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new cu(e,r))},r.onupgradeneeded=e=>{yc("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{yc("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=ou.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),su.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(yc("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class lu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return du(this.k.delete())}}class cu extends Tc{constructor(e,t){super(Ic.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function uu(e){return"IndexedDbTransactionError"===e.name}class hu{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(yc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(yc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),du(n)}add(e){return yc("SimpleDb","ADD",this.store.name,e,e),du(this.store.add(e))}get(e){return du(this.store.get(e)).next((t=>(void 0===t&&(t=null),yc("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return yc("SimpleDb","DELETE",this.store.name,e),du(this.store.delete(e))}count(){return yc("SimpleDb","COUNT",this.store.name),du(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new su(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new su(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){yc("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new su(((n,r)=>{t.onerror=e=>{const t=pu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new su(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new lu(i),o=t(i.primaryKey,i.value,s);if(o instanceof su){const e=o.catch((e=>(s.done(),su.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>su.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function du(e){return new su(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=pu(e.target.error);n(t)}}))}let fu=!1;function pu(e){const t=au.S(dr());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Tc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fu||(fu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class mu{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){yc("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{yc("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){uu(e)?yc("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await iu(e)}await this.ee(6e4)}))}}class gu{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return su.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return yc("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(yc("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Zc(t);tu(r,n)>0&&(n=r)})),new eu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class yu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function vu(e){return null==e}function wu(e){return 0===e&&1/e==-1/0}function bu(e){return"number"==typeof e&&Number.isInteger(e)&&!wu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function _u(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Su(t)),t=Eu(e.get(n),t);return Su(t)}function Eu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Su(e){return e+"\x01\x01"}function Iu(e){const t=e.length;if(Ec(t>=2),2===t)return Ec("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),qc.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&_c(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:_c()}s=t+2}return new qc(r)}yu._e=-1;const Tu=["userId","batchId"];function ku(e,t){return[e,_u(t)]}function xu(e,t,n){return[e,_u(t),n]}const Cu={},Nu=["prefixPath","collectionGroup","readTime","documentId"],Au=["prefixPath","collectionGroup","documentId"],Ou=["collectionGroup","readTime","prefixPath","documentId"],Du=["canonicalId","targetId"],Ru=["targetId","path"],Pu=["path","targetId"],Lu=["collectionId","parent"],Fu=["indexId","uid"],Mu=["uid","sequenceNumber"],ju=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Uu=["indexId","uid","orderedDocumentKey"],Vu=["userId","collectionPath","documentId"],zu=["userId","collectionPath","largestBatchId"],Bu=["userId","collectionGroup","largestBatchId"],qu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wu=[...qu,"documentOverlays"],Ku=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hu=Ku,Gu=[...Hu,"indexConfiguration","indexState","indexEntries"];class Qu extends ru{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function $u(e,t){const n=Sc(e);return au.M(n.ae,t)}function Yu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ju(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zu{constructor(e,t){this.comparator=e,this.root=t||th.EMPTY}insert(e,t){return new Zu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,th.BLACK,null,null))}remove(e){return new Zu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,th.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class th{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:th.RED,this.left=null!=r?r:th.EMPTY,this.right=null!=i?i:th.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new th(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return th.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return th.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,th.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,th.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _c();if(this.right.isRed())throw _c();const e=this.left.check();if(e!==this.right.check())throw _c();return e+(this.isRed()?0:1)}}th.EMPTY=null,th.RED=!0,th.BLACK=!1,th.EMPTY=new class{constructor(){this.size=0}get key(){throw _c()}get value(){throw _c()}get color(){throw _c()}get left(){throw _c()}get right(){throw _c()}copy(e,t,n,r,i){return this}insert(e,t,n){return new th(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nh{constructor(e){this.comparator=e,this.data=new Zu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof nh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nh(this.comparator);return t.data=e,t}}class rh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ih(e){return e.hasNext()?e.getNext():void 0}class sh{constructor(e){this.fields=e,e.sort(Kc.comparator)}static empty(){return new sh([])}unionWith(e){let t=new nh(Kc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class oh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ah{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new oh("Invalid base64 string: "+e):e}}(e);return new ah(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ah(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ah.EMPTY_BYTE_STRING=new ah("");const lh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ch(e){if(Ec(!!e),"string"==typeof e){let t=0;const n=lh.exec(e);if(Ec(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:uh(e.seconds),nanos:uh(e.nanos)}}function uh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function hh(e){return"string"==typeof e?ah.fromBase64String(e):ah.fromUint8Array(e)}function dh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fh(e){const t=e.mapValue.fields.__previous_value__;return dh(t)?fh(t):t}function ph(e){const t=ch(e.mapValue.fields.__local_write_time__.timestampValue);return new Vc(t.seconds,t.nanos)}class mh{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class gh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gh&&e.projectId===this.projectId&&e.database===this.database}}const yh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vh={nullValue:"NULL_VALUE"};function wh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dh(e)?4:Rh(e)?9007199254740991:10:_c()}function bh(e,t){if(e===t)return!0;const n=wh(e);if(n!==wh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ph(e).isEqual(ph(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ch(e.timestampValue),r=ch(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return hh(e.bytesValue).isEqual(hh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uh(e.geoPointValue.latitude)===uh(t.geoPointValue.latitude)&&uh(e.geoPointValue.longitude)===uh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return uh(e.integerValue)===uh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=uh(e.doubleValue),r=uh(t.doubleValue);return n===r?wu(n)===wu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return jc(e.arrayValue.values||[],t.arrayValue.values||[],bh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yu(n)!==Yu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bh(n[i],r[i])))return!1;return!0}(e,t);default:return _c()}}function _h(e,t){return void 0!==(e.values||[]).find((e=>bh(e,t)))}function Eh(e,t){if(e===t)return 0;const n=wh(e),r=wh(t);if(n!==r)return Mc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=uh(e.integerValue||e.doubleValue),r=uh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sh(e.timestampValue,t.timestampValue);case 4:return Sh(ph(e),ph(t));case 5:return Mc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=hh(e),r=hh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Mc(n[i],r[i]);if(0!==e)return e}return Mc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Mc(uh(e.latitude),uh(t.latitude));return 0!==n?n:Mc(uh(e.longitude),uh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Eh(n[i],r[i]);if(e)return e}return Mc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yh.mapValue&&t===yh.mapValue)return 0;if(e===yh.mapValue)return 1;if(t===yh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Mc(r[o],s[o]);if(0!==e)return e;const t=Eh(n[r[o]],i[s[o]]);if(0!==t)return t}return Mc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw _c()}}function Sh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mc(e,t);const n=ch(e),r=ch(t),i=Mc(n.seconds,r.seconds);return 0!==i?i:Mc(n.nanos,r.nanos)}function Ih(e){return Th(e)}function Th(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ch(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return hh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Hc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Th(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Th(e.fields[i]));return n+"}"}(e.mapValue):_c()}function kh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function xh(e){return!!e&&"integerValue"in e}function Ch(e){return!!e&&"arrayValue"in e}function Nh(e){return!!e&&"nullValue"in e}function Ah(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Oh(e){return!!e&&"mapValue"in e}function Dh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ju(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Dh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Dh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Rh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ph(e){return"nullValue"in e?vh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?kh(gh.empty(),Hc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:_c()}function Lh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?kh(gh.empty(),Hc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?yh:_c()}function Fh(e,t){const n=Eh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Mh(e,t){const n=Eh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class jh{constructor(e){this.value=e}static empty(){return new jh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(t)}setAll(e){let t=Kc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Dh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Oh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ju(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new jh(Dh(this.value))}}function Uh(e){const t=[];return Ju(e.fields,((e,n)=>{const r=new Kc([e]);if(Oh(n)){const e=Uh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new sh(t)}class Vh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Vh(e,0,zc.min(),zc.min(),zc.min(),jh.empty(),0)}static newFoundDocument(e,t,n,r){return new Vh(e,1,t,zc.min(),n,r,0)}static newNoDocument(e,t){return new Vh(e,2,t,zc.min(),zc.min(),jh.empty(),0)}static newUnknownDocument(e,t){return new Vh(e,3,t,zc.min(),zc.min(),jh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class zh{constructor(e,t){this.position=e,this.inclusive=t}}function Bh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Hc.comparator(Hc.fromName(o.referenceValue),n.key):Eh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function qh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bh(e.position[n],t.position[n]))return!1;return!0}class Wh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Kh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hh{}class Gh extends Hh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rd(e,t,n):"array-contains"===t?new ad(e,n):"in"===t?new ld(e,n):"not-in"===t?new cd(e,n):"array-contains-any"===t?new ud(e,n):new Gh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new id(e,n):new sd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Eh(t,this.value)):null!==t&&wh(this.value)===wh(t)&&this.matchesComparison(Eh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _c()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qh extends Hh{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Qh(e,t)}matches(e){return $h(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function $h(e){return"and"===e.op}function Yh(e){return"or"===e.op}function Jh(e){return Xh(e)&&$h(e)}function Xh(e){for(const t of e.filters)if(t instanceof Qh)return!1;return!0}function Zh(e){if(e instanceof Gh)return e.field.canonicalString()+e.op.toString()+Ih(e.value);if(Jh(e))return e.filters.map((e=>Zh(e))).join(",");{const t=e.filters.map((e=>Zh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ed(e,t){return e instanceof Gh?function(e,t){return t instanceof Gh&&e.op===t.op&&e.field.isEqual(t.field)&&bh(e.value,t.value)}(e,t):e instanceof Qh?function(e,t){return t instanceof Qh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ed(n,t.filters[r])),!0)}(e,t):void _c()}function td(e,t){const n=e.filters.concat(t);return Qh.create(n,e.op)}function nd(e){return e instanceof Gh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ih(e.value))}(e):e instanceof Qh?function(e){return e.op.toString()+" {"+e.getFilters().map(nd).join(" ,")+"}"}(e):"Filter"}class rd extends Gh{constructor(e,t,n){super(e,t,n),this.key=Hc.fromName(n.referenceValue)}matches(e){const t=Hc.comparator(e.key,this.key);return this.matchesComparison(t)}}class id extends Gh{constructor(e,t){super(e,"in",t),this.keys=od("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sd extends Gh{constructor(e,t){super(e,"not-in",t),this.keys=od("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function od(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Hc.fromName(e.referenceValue)))}class ad extends Gh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ch(t)&&_h(t.arrayValue,this.value)}}class ld extends Gh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_h(this.value.arrayValue,t)}}class cd extends Gh{constructor(e,t){super(e,"not-in",t)}matches(e){if(_h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_h(this.value.arrayValue,t)}}class ud extends Gh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_h(this.value.arrayValue,e)))}}class hd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function dd(e){return new hd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fd(e){const t=Sc(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Zh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),vu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ih(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ih(e))).join(",")),t.ce=e}return t.ce}function pd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Kh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ed(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qh(e.startAt,t.startAt)&&qh(e.endAt,t.endAt)}function md(e){return Hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gd(e,t){return e.filters.filter((e=>e instanceof Gh&&e.field.isEqual(t)))}function yd(e,t,n){let r=vh,i=!0;for(const s of gd(e,t)){let e=vh,t=!0;switch(s.op){case"<":case"<=":e=Ph(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=vh}Fh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Fh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function vd(e,t,n){let r=yh,i=!0;for(const s of gd(e,t)){let e=yh,t=!0;switch(s.op){case">=":case">":e=Lh(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=yh}Mh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Mh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class wd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function bd(e,t,n,r,i,s,o,a){return new wd(e,t,n,r,i,s,o,a)}function _d(e){return new wd(e)}function Ed(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sd(e){return null!==e.collectionGroup}function Id(e){const t=Sc(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new nh(Kc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Wh(r,n))})),e.has(Kc.keyField().canonicalString())||t.le.push(new Wh(Kc.keyField(),n))}return t.le}function Td(e){const t=Sc(e);return t.he||(t.he=kd(t,Id(e))),t.he}function kd(e,t){if("F"===e.limitType)return dd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Wh(e.field,t)}));const n=e.endAt?new zh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new zh(e.startAt.position,e.startAt.inclusive):null;return dd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xd(e,t){const n=e.filters.concat([t]);return new wd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cd(e,t,n){return new wd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nd(e,t){return pd(Td(e),Td(t))&&e.limitType===t.limitType}function Ad(e){return"".concat(fd(Td(e)),"|lt:").concat(e.limitType)}function Od(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>nd(e))).join(", "),"]")),vu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ih(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ih(e))).join(",")),"Target(".concat(t,")")}(Td(e)),"; limitType=").concat(e.limitType,")")}function Dd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Hc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Id(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Id(e),t))&&!(e.endAt&&!function(e,t,n){const r=Bh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Id(e),t))}(e,t)}function Rd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pd(e){return(t,n)=>{let r=!1;for(const i of Id(e)){const e=Ld(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ld(e,t,n){const r=e.field.isKeyField()?Hc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Eh(r,i):_c()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return _c()}}class Fd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ju(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Xu(this.inner)}size(){return this.innerSize}}const Md=new Zu(Hc.comparator);function jd(){return Md}const Ud=new Zu(Hc.comparator);function Vd(){let e=Ud;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function zd(e){let t=Ud;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Bd(){return Wd()}function qd(){return Wd()}function Wd(){return new Fd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Kd=new Zu(Hc.comparator),Hd=new nh(Hc.comparator);function Gd(){let e=Hd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Qd=new nh(Mc);function $d(){return Qd}function Yd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(t)?"-0":t}}function Jd(e){return{integerValue:""+e}}function Xd(e,t){return bu(t)?Jd(t):Yd(e,t)}class Zd{constructor(){this._=void 0}}function ef(e,t,n){return e instanceof rf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&dh(t)&&(t=fh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof sf?of(e,t):e instanceof af?lf(e,t):function(e,t){const n=nf(e,t),r=uf(n)+uf(e.Ie);return xh(n)&&xh(e.Ie)?Jd(r):Yd(e.serializer,r)}(e,t)}function tf(e,t,n){return e instanceof sf?of(e,t):e instanceof af?lf(e,t):n}function nf(e,t){return e instanceof cf?function(e){return xh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rf extends Zd{}class sf extends Zd{constructor(e){super(),this.elements=e}}function of(e,t){const n=hf(t);for(const r of e.elements)n.some((e=>bh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class af extends Zd{constructor(e){super(),this.elements=e}}function lf(e,t){let n=hf(t);for(const r of e.elements)n=n.filter((e=>!bh(e,r)));return{arrayValue:{values:n}}}class cf extends Zd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function uf(e){return uh(e.integerValue||e.doubleValue)}function hf(e){return Ch(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class df{constructor(e,t){this.field=e,this.transform=t}}class ff{constructor(e,t){this.version=e,this.transformResults=t}}class pf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pf}static exists(e){return new pf(void 0,e)}static updateTime(e){return new pf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gf{}function yf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xf(e.key,pf.none()):new Ef(e.key,e.data,pf.none());{const n=e.data,r=jh.empty();let i=new nh(Kc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Sf(e.key,r,new sh(i.toArray()),pf.none())}}function vf(e,t,n){e instanceof Ef?function(e,t,n){const r=e.value.clone(),i=Tf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Sf?function(e,t,n){if(!mf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Tf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(If(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wf(e,t,n,r){return e instanceof Ef?function(e,t,n,r){if(!mf(e.precondition,t))return n;const i=e.value.clone(),s=kf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Sf?function(e,t,n,r){if(!mf(e.precondition,t))return n;const i=kf(e.fieldTransforms,r,t),s=t.data;return s.setAll(If(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return mf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=nf(r.transform,e||null);null!=i&&(null===n&&(n=jh.empty()),n.set(r.field,i))}return n||null}function _f(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&jc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof sf&&t instanceof sf||e instanceof af&&t instanceof af?jc(e.elements,t.elements,bh):e instanceof cf&&t instanceof cf?bh(e.Ie,t.Ie):e instanceof rf&&t instanceof rf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ef extends gf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sf extends gf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function If(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Tf(e,t,n){const r=new Map;Ec(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,tf(o,a,n[i]))}return r}function kf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ef(e,s,t))}return r}class xf extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cf extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=wf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=wf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qd();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=yf(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(zc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gd())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,((e,t)=>_f(e,t)))&&jc(this.baseMutations,e.baseMutations,((e,t)=>_f(e,t)))}}class Af{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ec(e.mutations.length===n.length);let r=Kd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Af(e,t,n,r)}}class Of{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Df{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rf,Pf;function Lf(e){switch(e){default:return _c();case Ic.CANCELLED:case Ic.UNKNOWN:case Ic.DEADLINE_EXCEEDED:case Ic.RESOURCE_EXHAUSTED:case Ic.INTERNAL:case Ic.UNAVAILABLE:case Ic.UNAUTHENTICATED:return!1;case Ic.INVALID_ARGUMENT:case Ic.NOT_FOUND:case Ic.ALREADY_EXISTS:case Ic.PERMISSION_DENIED:case Ic.FAILED_PRECONDITION:case Ic.ABORTED:case Ic.OUT_OF_RANGE:case Ic.UNIMPLEMENTED:case Ic.DATA_LOSS:return!0}}function Ff(e){if(void 0===e)return vc("GRPC error has no .code"),Ic.UNKNOWN;switch(e){case Rf.OK:return Ic.OK;case Rf.CANCELLED:return Ic.CANCELLED;case Rf.UNKNOWN:return Ic.UNKNOWN;case Rf.DEADLINE_EXCEEDED:return Ic.DEADLINE_EXCEEDED;case Rf.RESOURCE_EXHAUSTED:return Ic.RESOURCE_EXHAUSTED;case Rf.INTERNAL:return Ic.INTERNAL;case Rf.UNAVAILABLE:return Ic.UNAVAILABLE;case Rf.UNAUTHENTICATED:return Ic.UNAUTHENTICATED;case Rf.INVALID_ARGUMENT:return Ic.INVALID_ARGUMENT;case Rf.NOT_FOUND:return Ic.NOT_FOUND;case Rf.ALREADY_EXISTS:return Ic.ALREADY_EXISTS;case Rf.PERMISSION_DENIED:return Ic.PERMISSION_DENIED;case Rf.FAILED_PRECONDITION:return Ic.FAILED_PRECONDITION;case Rf.ABORTED:return Ic.ABORTED;case Rf.OUT_OF_RANGE:return Ic.OUT_OF_RANGE;case Rf.UNIMPLEMENTED:return Ic.UNIMPLEMENTED;case Rf.DATA_LOSS:return Ic.DATA_LOSS;default:return _c()}}(Pf=Rf||(Rf={}))[Pf.OK=0]="OK",Pf[Pf.CANCELLED=1]="CANCELLED",Pf[Pf.UNKNOWN=2]="UNKNOWN",Pf[Pf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pf[Pf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pf[Pf.NOT_FOUND=5]="NOT_FOUND",Pf[Pf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pf[Pf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pf[Pf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pf[Pf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pf[Pf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pf[Pf.ABORTED=10]="ABORTED",Pf[Pf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pf[Pf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pf[Pf.INTERNAL=13]="INTERNAL",Pf[Pf.UNAVAILABLE=14]="UNAVAILABLE",Pf[Pf.DATA_LOSS=15]="DATA_LOSS";let Mf=null;function jf(){return new TextEncoder}const Uf=new hc([4294967295,4294967295],0);function Vf(e){const t=jf().encode(e),n=new uc;return n.update(t),new Uint8Array(n.digest())}function zf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hc([n,r],0),new hc([i,s],0)]}class Bf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qf("Invalid padding: ".concat(t));if(n<0)throw new qf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qf("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=hc.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(hc.fromNumber(n)));return 1===r.compare(Uf)&&(r=new hc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Vf(e),[n,r]=zf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Bf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Vf(e),[n,r]=zf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wf(zc.min(),r,new Zu(Mc),jd(),Gd())}}class Kf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kf(n,t,Gd(),Gd(),Gd())}}class Hf{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Gf{constructor(e,t){this.targetId=e,this.fe=t}}class Qf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ah.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class $f{constructor(){this.ge=0,this.pe=Xf(),this.ye=ah.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Gd(),t=Gd(),n=Gd();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:_c()}})),new Kf(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Xf()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ec(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Yf{constructor(e){this.Le=e,this.ke=new Map,this.qe=jd(),this.Qe=Jf(),this.Ke=new Zu(Mc)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:_c()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(md(i))if(0===n){const e=new Hc(i.path);this.We(t,e,Vh.newNoDocument(e,zc.min()))}else Ec(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Mf||Mf.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=hh(n).toUint8Array()}catch(e){if(e instanceof oh)return wc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Bf(s,r,i)}catch(e){return wc(e instanceof qf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&md(i.target)){const t=new Hc(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Vh.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Gd();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Wf(e,t,this.Ke,this.qe,n);return this.qe=jd(),this.Qe=Jf(),this.Ke=new Zu(Mc),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new $f,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nh(Mc),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||yc("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new $f),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Jf(){return new Zu(Hc.comparator)}function Xf(){return new Zu(Hc.comparator)}const Zf={asc:"ASCENDING",desc:"DESCENDING"},ep={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tp={and:"AND",or:"OR"};class np{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rp(e,t){return e.useProto3Json||vu(t)?t:{value:t}}function ip(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function sp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function op(e,t){return ip(e,t.toTimestamp())}function ap(e){return Ec(!!e),zc.fromTimestamp(function(e){const t=ch(e);return new Vc(t.seconds,t.nanos)}(e))}function lp(e,t){return function(e){return new qc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cp(e){const t=qc.fromString(e);return Ec(Op(t)),t}function up(e,t){return lp(e.databaseId,t.path)}function hp(e,t){const n=cp(t);if(n.get(1)!==e.databaseId.projectId)throw new Tc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Hc(mp(n))}function dp(e,t){return lp(e.databaseId,t)}function fp(e){const t=cp(e);return 4===t.length?qc.emptyPath():mp(t)}function pp(e){return new qc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mp(e){return Ec(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gp(e,t,n){return{name:up(e,t),fields:n.value.mapValue.fields}}function yp(e,t,n){const r=hp(e,t.name),i=ap(t.updateTime),s=t.createTime?ap(t.createTime):zc.min(),o=new jh({mapValue:{fields:t.fields}}),a=Vh.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function vp(e,t){let n;if(t instanceof Ef)n={update:gp(e,t.key,t.value)};else if(t instanceof xf)n={delete:up(e,t.key)};else if(t instanceof Sf)n={update:gp(e,t.key,t.data),updateMask:Ap(t.fieldMask)};else{if(!(t instanceof Cf))return _c();n={verify:up(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof af)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw _c()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:op(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_c()}(e,t.precondition)),n}function wp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?pf.updateTime(ap(e.updateTime)):void 0!==e.exists?pf.exists(e.exists):pf.none()}(t.currentDocument):pf.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ec("REQUEST_TIME"===t.setToServerValue),n=new rf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new sf(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new af(e)}else"increment"in t?n=new cf(e,t.increment):_c();const r=Kc.fromServerFormat(t.fieldPath);return new df(r,n)}(e,t))):[];if(t.update){t.update.name;const i=hp(e,t.update.name),s=new jh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new sh(t.map((e=>Kc.fromServerFormat(e))))}(t.updateMask);return new Sf(i,s,e,n,r)}return new Ef(i,s,n,r)}if(t.delete){const r=hp(e,t.delete);return new xf(r,n)}if(t.verify){const r=hp(e,t.verify);return new Cf(r,n)}return _c()}function bp(e,t){return{documents:[dp(e,t.path)]}}function _p(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=dp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=dp(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Np(Qh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:xp(e.field),direction:Ip(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=rp(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ep(e){let t=fp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ec(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Sp(e);return t instanceof Qh&&Jh(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Wh(Cp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,vu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new zh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new zh(n,t)}(n.endAt)),bd(t,i,o,s,a,"F",l,c)}function Sp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cp(e.unaryFilter.field);return Gh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Cp(e.unaryFilter.field);return Gh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cp(e.unaryFilter.field);return Gh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cp(e.unaryFilter.field);return Gh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _c()}}(e):void 0!==e.fieldFilter?function(e){return Gh.create(Cp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _c()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Qh.create(e.compositeFilter.filters.map((e=>Sp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return _c()}}(e.compositeFilter.op))}(e):_c()}function Ip(e){return Zf[e]}function Tp(e){return ep[e]}function kp(e){return tp[e]}function xp(e){return{fieldPath:e.canonicalString()}}function Cp(e){return Kc.fromServerFormat(e.fieldPath)}function Np(e){return e instanceof Gh?function(e){if("=="===e.op){if(Ah(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NAN"}};if(Nh(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ah(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NOT_NAN"}};if(Nh(e.value))return{unaryFilter:{field:xp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xp(e.field),op:Tp(e.op),value:e.value}}}(e):e instanceof Qh?function(e){const t=e.getFilters().map((e=>Np(e)));return 1===t.length?t[0]:{compositeFilter:{op:kp(e.op),filters:t}}}(e):_c()}function Ap(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Op(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Dp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zc.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ah.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Dp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Dp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rp{constructor(e){this.ut=e}}function Pp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:up(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ip(e,t.version.toTimestamp()),createTime:ip(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fp(t.version)};else{if(!t.isUnknownDocument())return _c();r.unknownDocument={path:n.path.toArray(),version:Fp(t.version)}}return r}function Lp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Mp(e){const t=new Vc(e.seconds,e.nanoseconds);return zc.fromTimestamp(t)}function jp(e,t){const n=(t.baseMutations||[]).map((t=>wp(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>wp(e.ut,t))),i=Vc.fromMillis(t.localWriteTimeMs);return new Nf(t.batchId,i,n,r)}function Up(e){const t=Mp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Mp(e.lastLimboFreeSnapshotVersion):zc.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ec(1===e.documents.length),Td(_d(fp(e.documents[0])))}(e.query):function(e){return Td(Ep(e))}(e.query),new Dp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ah.fromBase64String(e.resumeToken))}function Vp(e,t){const n=Fp(t.snapshotVersion),r=Fp(t.lastLimboFreeSnapshotVersion);let i;i=md(t.target)?bp(e.ut,t.target):_p(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fd(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zp(e){const t=Ep({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cd(t,t.limit,"L"):t}function Bp(e,t){return new Of(t.largestBatchId,wp(e.ut,t.overlayMutation))}function qp(e,t){const n=t.path.lastSegment();return[e,_u(t.path.popLast()),n]}function Wp(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fp(r.readTime),documentKey:_u(r.documentKey.path),largestBatchId:r.largestBatchId}}class Kp{getBundleMetadata(e,t){return Hp(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Mp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Hp(e).put(function(e){return{bundleId:e.id,createTime:Fp(ap(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Gp(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:zp(e.bundledQuery),readTime:Mp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Gp(e).put(function(e){return{name:e.name,readTime:Fp(ap(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Hp(e){return $u(e,"bundles")}function Gp(e){return $u(e,"namedQueries")}class Qp{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Qp(e,n)}getOverlay(e,t){return $p(e).get(qp(this.userId,t)).next((e=>e?Bp(this.serializer,e):null))}getOverlays(e,t){const n=Bd();return su.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Of(t,i);r.push(this.lt(e,s))})),su.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(_u(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push($p(e).H("collectionPathOverlayIndex",r))})),su.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Bd(),i=_u(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return $p(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Bp(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Bd();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $p(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Bp(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return $p(e).put(function(e,t,n){const[r,i,s]=qp(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:vp(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function $p(e){return $u(e,"documentOverlays")}class Yp{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(uh(e.integerValue));else if("doubleValue"in e){const n=uh(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),wu(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(hh(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Rh(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):_c()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Hc.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Jp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Xp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Jp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Yp.St=new Yp;class Zp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=Xp(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=Xp(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class em{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class tm{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class nm{constructor(){this.Wt=new Zp,this.Gt=new em(this.Wt),this.zt=new tm(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class rm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new rm(this.indexId,this.documentKey,this.arrayValue,n)}}function im(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=sm(e.arrayValue,t.arrayValue),0!==n?n:(n=sm(e.directionalValue,t.directionalValue),0!==n?n:Hc.comparator(e.documentKey,t.documentKey)))}function sm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class om{constructor(e){this.Jt=new nh(((e,t)=>Kc.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Ec(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Qc(e);if(void 0!==t&&!this.tn(t))return!1;const n=$c(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new nh(Kc.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Yc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Yc(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Yc(n.field,"asc"===n.dir?0:1)));return new Gc(Gc.UNKNOWN_ID,this.collectionId,t,Jc.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function am(e){var t,n;if(Ec(e instanceof Gh||e instanceof Qh),e instanceof Gh){if(e instanceof ld){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Gh.create(e.field,"==",t))))||[];return Qh.create(r,"or")}return e}const r=e.filters.map((e=>am(e)));return Qh.create(r,e.op)}function lm(e){if(0===e.getFilters().length)return[];const t=dm(am(e));return Ec(hm(t)),cm(t)||um(t)?[t]:t.getFilters()}function cm(e){return e instanceof Gh}function um(e){return e instanceof Qh&&Jh(e)}function hm(e){return cm(e)||um(e)||function(e){if(e instanceof Qh&&Yh(e)){for(const t of e.getFilters())if(!cm(t)&&!um(t))return!1;return!0}return!1}(e)}function dm(e){if(Ec(e instanceof Gh||e instanceof Qh),e instanceof Gh)return e;if(1===e.filters.length)return dm(e.filters[0]);const t=e.filters.map((e=>dm(e)));let n=Qh.create(t,e.op);return n=mm(n),hm(n)?n:(Ec(n instanceof Qh),Ec($h(n)),Ec(n.filters.length>1),n.filters.reduce(((e,t)=>fm(e,t))))}function fm(e,t){let n;return Ec(e instanceof Gh||e instanceof Qh),Ec(t instanceof Gh||t instanceof Qh),n=e instanceof Gh?t instanceof Gh?function(e,t){return Qh.create([e,t],"and")}(e,t):pm(e,t):t instanceof Gh?pm(t,e):function(e,t){if(Ec(e.filters.length>0&&t.filters.length>0),$h(e)&&$h(t))return td(e,t.getFilters());const n=Yh(e)?e:t,r=Yh(e)?t:e,i=n.filters.map((e=>fm(e,r)));return Qh.create(i,"or")}(e,t),mm(n)}function pm(e,t){if($h(t))return td(t,e.getFilters());{const n=t.filters.map((t=>fm(e,t)));return Qh.create(n,"or")}}function mm(e){if(Ec(e instanceof Gh||e instanceof Qh),e instanceof Gh)return e;const t=e.getFilters();if(1===t.length)return mm(t[0]);if(Xh(e))return e;const n=t.map((e=>mm(e))),r=[];return n.forEach((t=>{t instanceof Gh?r.push(t):t instanceof Qh&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Qh.create(r,e.op)}class gm{constructor(){this.on=new ym}addToCollectionParentIndex(e,t){return this.on.add(t),su.resolve()}getCollectionParents(e,t){return su.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return su.resolve()}deleteFieldIndex(e,t){return su.resolve()}deleteAllFieldIndexes(e){return su.resolve()}createTargetIndexes(e,t){return su.resolve()}getDocumentsMatchingTarget(e,t){return su.resolve(null)}getIndexType(e,t){return su.resolve(0)}getFieldIndexes(e,t){return su.resolve([])}getNextCollectionGroupToUpdate(e){return su.resolve(null)}getMinOffset(e,t){return su.resolve(eu.min())}getMinOffsetFromCollectionGroup(e,t){return su.resolve(eu.min())}updateCollectionGroup(e,t,n){return su.resolve()}updateIndexEntries(e,t){return su.resolve()}}class ym{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nh(qc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nh(qc.comparator)).toArray()}}const vm=new Uint8Array(0);class wm{constructor(e,t){this.user=e,this.databaseId=t,this._n=new ym,this.an=new Fd((e=>fd(e)),((e,t)=>pd(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:_u(r)};return bm(e).put(i)}return su.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Uc(t),""],!1,!0);return bm(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Iu(r.parent))}return n}))}addFieldIndex(e,t){const n=Em(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Sm(e);return i.next((e=>{n.put(Wp(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Em(e),r=Sm(e),i=_m(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Em(e),n=_m(e),r=Sm(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return su.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new om(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=_m(e);let r=!0;const i=new Map;return su.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Gd();const r=[];return su.forEach(i,((i,s)=>{yc("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(fd(t)));const o=function(e,t){const n=Qc(t);if(void 0===n)return null;for(const r of gd(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of $c(t))for(const t of gd(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of $c(t)){const t=0===i.kind?yd(e,i.fieldPath,e.startAt):vd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new zh(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of $c(t)){const t=0===i.kind?vd(e,i.fieldPath,e.endAt):yd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new zh(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return su.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Hc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return su.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:lm(Qh.create(e.filters,"and")).map((t=>dd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):vm,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new rm(e,Hc.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new rm(e,Hc.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new om(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return su.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new nh(Kc.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new nm;for(const r of $c(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Yp.St.ht(e,i)}return n.Ut()}In(e){const t=new nm;return Yp.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new nm;return Yp.St.ht(kh(this.databaseId,t),n.jt(function(e){const t=$c(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new nm);let i=0;for(const s of $c(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&Ch(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);Yp.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new nm;n.seed(e.Ut()),Yp.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Gh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Em(e),r=Sm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return su.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Jc(t.sequenceNumber,new eu(Mp(t.readTime),new Hc(Iu(t.documentKey)),t.largestBatchId)):Jc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Yc(Kc.fromServerFormat(t),n)}));return new Gc(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Mc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Em(e),i=Sm(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>su.forEach(t,(t=>i.put(Wp(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return su.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?su.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),su.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?su.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return _m(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return _m(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=_m(e);let i=new nh(im);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new rm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new nh(im);const r=this.dn(t,e);if(null==r)return n;const i=Qc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ch(s))for(const i of s.arrayValue.values||[])n=n.add(new rm(t.indexId,e.key,this.In(i),r))}else n=n.add(new rm(t.indexId,e.key,vm,r));return n}yn(e,t,n,r,i){yc("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ih(s),l=ih(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ih(o)):t?(i(a),a=ih(s)):(a=ih(s),l=ih(o))}}(r,i,im,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),su.waitFor(s)}fn(e){let t=1;return Sm(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>im(e,t))).filter(((e,t,n)=>!t||0!==im(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=im(s,e),i=im(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,vm,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,vm,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return im(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Im)}getMinOffset(e,t){return su.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||_c())))).next(Im)}}function bm(e){return $u(e,"collectionParents")}function _m(e){return $u(e,"indexEntries")}function Em(e){return $u(e,"indexConfiguration")}function Sm(e){return $u(e,"indexState")}function Im(e){Ec(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;tu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new eu(t.readTime,t.documentKey,n)}const Tm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class km{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new km(e,km.DEFAULT_COLLECTION_PERCENTILE,km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Ec(1===a)})));const c=[];for(const u of n.mutations){const e=xu(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return su.waitFor(s).next((()=>c))}function Cm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw _c();t=e.noDocument}return JSON.stringify(t).length}km.DEFAULT_COLLECTION_PERCENTILE=10,km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,km.DEFAULT=new km(41943040,km.DEFAULT_COLLECTION_PERCENTILE,km.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),km.DISABLED=new km(-1,0,0);class Nm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Ec(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Nm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Om(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Dm(e),s=Om(e);return s.add({}).next((o=>{Ec("number"==typeof o);const a=new Nf(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>vp(e.ut,t))),i=n.mutations.map((t=>vp(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new nh(((e,t)=>Mc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=xu(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Cu))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),su.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Om(e).get(t).next((e=>e?(Ec(e.userId===this.userId),jp(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?su.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Om(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ec(t.batchId>=n),i=jp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Om(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Om(e).W("userMutationsIndex",t).next((e=>e.map((e=>jp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ku(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Dm(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Iu(a);if(o===this.userId&&t.path.isEqual(c))return Om(e).get(l).next((e=>{if(!e)throw _c();Ec(e.userId===this.userId),i.push(jp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nh(Mc);const r=[];return t.forEach((t=>{const i=ku(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Dm(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Iu(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),su.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ku(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new nh(Mc);return Dm(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Iu(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Om(e).get(t).next((e=>{if(null===e)throw _c();Ec(e.userId===this.userId),n.push(jp(this.serializer,e))})))})),su.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return xm(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),su.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return su.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Dm(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Iu(e[1]);r.push(t)}else n.done()})).next((()=>{Ec(0===r.length)}))}))}containsKey(e,t){return Am(e,this.userId,t)}Mn(e){return Rm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Am(e,t,n){const r=ku(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Dm(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Om(e){return $u(e,"mutations")}function Dm(e){return $u(e,"documentMutations")}function Rm(e){return $u(e,"mutationQueues")}class Pm{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Pm(0)}static Nn(){return new Pm(-1)}}class Lm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Pm(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>zc.fromTimestamp(new Vc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fm(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Ec(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Fm(e).Y(((s,o)=>{const a=Up(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>su.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Fm(e).Y(((e,n)=>{const r=Up(n);t(r)}))}Bn(e){return Mm(e).get("targetGlobalKey").next((e=>(Ec(null!==e),e)))}Ln(e,t){return Mm(e).put("targetGlobalKey",t)}kn(e,t){return Fm(e).put(Vp(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=fd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Fm(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Up(n);pd(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=jm(e);return t.forEach((t=>{const s=_u(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),su.waitFor(r)}removeMatchingKeys(e,t,n){const r=jm(e);return su.forEach(t,(t=>{const i=_u(t.path);return su.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=jm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=jm(e);let i=Gd();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Iu(e[1]),s=new Hc(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=_u(t.path),r=IDBKeyRange.bound([n],[Uc(n)],!1,!0);let i=0;return jm(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Fm(e).get(t).next((e=>e?Up(e):null))}}function Fm(e){return $u(e,"targets")}function Mm(e){return $u(e,"targetGlobal")}function jm(e){return $u(e,"targetDocuments")}function Um(e,t){let[n,r]=e,[i,s]=t;const o=Mc(n,i);return 0===o?Mc(r,s):o}class Vm{constructor(e){this.Qn=e,this.buffer=new nh(Um),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Um(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){yc("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){uu(e)?yc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await iu(e)}await this.Gn(3e5)}))}}class Bm{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return su.resolve(yu._e);const n=new Vm(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yc("LruGarbageCollector","Garbage collection skipped; disabled"),su.resolve(Tm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(yc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Tm):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(yc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),gc()<=Fr.DEBUG&&yc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),su.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function qm(e,t){return new Bm(e,t)}class Wm{constructor(e,t){this.db=e,this.garbageCollector=qm(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return Km(e,n)}removeReference(e,t,n){return Km(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Km(e,t)}Xn(e,t){return function(e,t){let n=!1;return Rm(e).Z((r=>Am(e,r,t).next((e=>(e&&(n=!0),su.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,zc.min()),jm(e).delete(function(e){return[0,_u(e.path)]}(s)))))}));r.push(t)}})).next((()=>su.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Km(e,t)}Zn(e,t){const n=jm(e);let r,i=yu._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==yu._e&&t(new Hc(Iu(r)),i),i=l,r=a):i=yu._e})).next((()=>{i!==yu._e&&t(new Hc(Iu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Km(e,t){return jm(e).put(function(e,t){return{targetId:0,path:_u(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Hm{constructor(){this.changes=new Fd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?su.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Jm(e).put(n)}removeEntry(e,t,n){return Jm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Lp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Vh.newInvalidDocument(t);return Jm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Xm(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Vh.newInvalidDocument(t)};return Jm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Xm(t))},((e,r)=>{n={document:this.tr(t,r),size:Cm(r)}})).next((()=>n))}getEntries(e,t){let n=jd();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=jd(),r=new Zu(Hc.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Cm(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return su.resolve();let r=new nh(eg);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Xm(r.first()),Xm(r.last())),s=r.getIterator();let o=s.getNext();return Jm(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Hc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&eg(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Xm(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Lp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jm(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=jd();for(const i of e){const e=this.tr(Hc.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Dd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=jd();const s=Zm(t,n),o=Zm(t,eu.max());return Jm(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(Hc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new $m(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Ym(e).get("remoteDocumentGlobalKey").next((e=>(Ec(!!e),e)))}er(e,t){return Ym(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=yp(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Hc.fromSegments(t.noDocument.path),r=Mp(t.noDocument.readTime);n=Vh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return _c();{const e=Hc.fromSegments(t.unknownDocument.path),r=Mp(t.unknownDocument.version);n=Vh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Vc(e[0],e[1]);return zc.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(zc.min()))return e}return Vh.newInvalidDocument(e)}}function Qm(e){return new Gm(e)}class $m extends Hm{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Fd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new nh(((e,t)=>Mc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Pp(this._r.serializer,s);r=r.add(i.path.popLast());const l=Cm(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Pp(this._r.serializer,s.convertToNoDocument(zc.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),su.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Ym(e){return $u(e,"remoteDocumentGlobal")}function Jm(e){return $u(e,"remoteDocumentsV14")}function Xm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Zm(e,t){const n=t.documentKey.path.toArray();return[e,Lp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eg(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Mc(n[s],r[s]),i)return i;return i=Mc(n.length,r.length),i||(i=Mc(n[n.length-2],r[r.length-2]),i||Mc(n[n.length-1],r[r.length-1]))}class tg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ng{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&wf(n.mutation,e,sh.empty(),Vc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gd();const r=Bd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Bd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=jd();const s=Wd(),o=Wd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Sf)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),wf(o.mutation,t,o.mutation.getFieldMask(),Vc.now())):s.set(t.key,sh.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new tg(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Wd();let r=new Zu(((e,t)=>e-t)),i=Gd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||sh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Gd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=qd();l.forEach((e=>{if(!i.has(e)){const r=yf(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return su.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):su.resolve(Bd());let o=-1,a=i;return s.next((t=>su.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?su.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Gd()))).next((e=>({batchId:o,changes:zd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Hc(t)).next((e=>{let t=Vd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Vd();return this.indexManager.getCollectionParents(e,i).next((o=>su.forEach(o,(o=>{const a=function(e,t){return new wd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vh.newInvalidDocument(r)))}));let n=Vd();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&wf(s.mutation,r,sh.empty(),Vc.now()),Dd(t,r)&&(n=n.insert(e,r))})),n}))}}class rg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return su.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ap(e.createTime)}}(t)),su.resolve()}getNamedQuery(e,t){return su.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:zp(e.bundledQuery),readTime:ap(e.readTime)}}(t)),su.resolve()}}class ig{constructor(){this.overlays=new Zu(Hc.comparator),this.lr=new Map}getOverlay(e,t){return su.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bd();return su.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),su.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),su.resolve()}getOverlaysForCollection(e,t,n){const r=Bd(),i=t.length+1,s=new Hc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return su.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Bd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return su.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Of(t,n));let i=this.lr.get(t);void 0===i&&(i=Gd(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class sg{constructor(){this.hr=new nh(og.Pr),this.Ir=new nh(og.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new og(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new og(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Hc(new qc([])),n=new og(t,e),r=new og(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Hc(new qc([])),n=new og(t,e),r=new og(t,e+1);let i=Gd();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new og(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class og{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Hc.comparator(e.key,t.key)||Mc(e.gr,t.gr)}static Tr(e,t){return Mc(e.gr,t.gr)||Hc.comparator(e.key,t.key)}}class ag{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new nh(og.Pr)}checkEmpty(e){return su.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Nf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new og(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return su.resolve(s)}lookupMutationBatch(e,t){return su.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return su.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return su.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return su.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new og(t,0),r=new og(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),su.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nh(Mc);return t.forEach((e=>{const t=new og(e,0),r=new og(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),su.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Hc.isDocumentKey(i)||(i=i.child(""));const s=new og(new Hc(i),0);let o=new nh(Mc);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),su.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ec(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return su.forEach(t.mutations,(r=>{const i=new og(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new og(t,0),r=this.yr.firstAfterOrEqual(n);return su.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,su.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lg{constructor(e){this.Cr=e,this.docs=new Zu(Hc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return su.resolve(n?n.document.mutableCopy():Vh.newInvalidDocument(t))}getEntries(e,t){let n=jd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vh.newInvalidDocument(e))})),su.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=jd();const s=t.path,o=new Hc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||tu(Zc(o),n)<=0||(r.has(o.key)||Dd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return su.resolve(i)}getAllFromCollectionGroup(e,t,n,r){_c()}vr(e,t){return su.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new cg(this)}getSize(e){return su.resolve(this.size)}}class cg extends Hm{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),su.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class ug{constructor(e){this.persistence=e,this.Fr=new Fd((e=>fd(e)),pd),this.lastRemoteSnapshotVersion=zc.min(),this.highestTargetId=0,this.Mr=0,this.Or=new sg,this.targetCount=0,this.Nr=Pm.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),su.resolve()}getLastRemoteSnapshotVersion(e){return su.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return su.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),su.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),su.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Pm(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,su.resolve()}updateTargetData(e,t){return this.kn(t),su.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,su.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),su.waitFor(i).next((()=>r))}getTargetCount(e){return su.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return su.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),su.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),su.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),su.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return su.resolve(n)}containsKey(e,t){return su.resolve(this.Or.containsKey(t))}}class hg{constructor(e,t){this.Br={},this.overlays={},this.Lr=new yu(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ug(this),this.indexManager=new gm,this.remoteDocumentCache=function(e){return new lg(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Rp(t),this.Kr=new rg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ig,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new ag(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){yc("MemoryPersistence","Starting transaction:",e);const r=new dg(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return su.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class dg extends ru{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Gr=new sg,this.zr=null}static jr(e){return new fg(e)}get Hr(){if(this.zr)return this.zr;throw _c()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),su.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),su.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),su.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return su.forEach(this.Hr,(n=>{const r=Hc.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,zc.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return su.or([()=>su.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class pg{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ou("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tu,{unique:!0}),e.createObjectStore("documentMutations")}(e),mg(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=su.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mg(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zc.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return su.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Vu});t.createIndex("collectionPathOverlayIndex",zu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Bu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Nu});t.createIndex("documentKeyIndex",Au),t.createIndex("collectionGroupIndex",Ou)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Fu}).createIndex("sequenceNumberIndex",Mu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ju}).createIndex("documentKeyIndex",Uu,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Cm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>su.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>su.forEach(n,(n=>{Ec(n.userId===t.userId);const r=jp(this.serializer,n);return xm(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new qc(n),o=function(e){return[0,_u(e)]}(s);r.push(t.get(o).next((n=>n?su.resolve():(n=>t.put({targetId:0,path:_u(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>su.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Lu});const n=t.store("collectionParents"),r=new ym,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:_u(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new qc(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Iu(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Up(n),i=Vp(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Hc(qc.fromString(e.document.name).popFirst(5)):e.noDocument?Hc.fromSegments(e.noDocument.path):e.unknownDocument?Hc.fromSegments(e.unknownDocument.path):_c()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>su.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Qm(this.serializer),i=new hg(fg.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Gd();jp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),su.forEach(n,((e,n)=>{const s=new fc(n),o=Qp.ct(this.serializer,s),a=i.getIndexManager(s),l=Nm.ct(s,this.serializer,a,i.referenceDelegate);return new ng(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Qu(t,yu._e),e).next()}))}))}}function mg(e){e.createObjectStore("targetDocuments",{keyPath:Ru}).createIndex("documentTargetsIndex",Pu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Du,{unique:!0}),e.createObjectStore("targetGlobal")}const gg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yg{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!yg.D())throw new Tc(Ic.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wm(this,r),this.Ii=t+"main",this.serializer=new Rp(a),this.Ti=new au(this.Ii,this.ai,new pg(this.serializer)),this.qr=new Lm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qm(this.serializer),this.Kr=new Kp,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&vc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tc(Ic.FAILED_PRECONDITION,gg);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new yu(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>wg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(uu(e))return yc("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return vg(e).get("owner").next((e=>su.resolve(this.wi(e))))}Si(e){return wg(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=$u(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return su.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?su.resolve(!0):vg(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Tc(Ic.FAILED_PRECONDITION,gg);return!1}}return!(!this.networkEnabled||!this.inForeground)||wg(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&yc("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Qu(e,yu._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>wg(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return Nm.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wm(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Qp.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){yc("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Gu:14===e?Hu:13===e?Ku:12===e?Wu:11===e?qu:void _c()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new Qu(r,this.Lr?this.Lr.next():yu._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw vc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Tc(Ic.FAILED_PRECONDITION,nu);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return vg(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Tc(Ic.FAILED_PRECONDITION,gg)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vg(e).put("owner",t)}static D(){return au.D()}pi(e){const t=vg(e);return t.get("owner").next((e=>this.wi(e)?(yc("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):su.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(vc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!fr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return yc("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return vc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){vc("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function vg(e){return $u(e,"owner")}function wg(e){return $u(e,"clientMetadata")}function bg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class _g{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Gd(),r=Gd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _g(e,t.fromCache,n,r)}}class Eg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Sg{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Eg;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(gc()<=Fr.DEBUG&&yc("QueryEngine","SDK will not create cache indexes for query:",Od(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),su.resolve()):(gc()<=Fr.DEBUG&&yc("QueryEngine","Query:",Od(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(gc()<=Fr.DEBUG&&yc("QueryEngine","The SDK decides to create cache indexes for query:",Od(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Td(t))):su.resolve())}zi(e,t){if(Ed(t))return su.resolve(null);let n=Td(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Cd(t,null,"F"),n=Td(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gd(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Cd(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ed(t)||r.isEqual(zc.min())?su.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?su.resolve(null):(gc()<=Fr.DEBUG&&yc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Od(t)),this.Xi(e,s,t,Xc(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new nh(Pd(e));return t.forEach(((t,r)=>{Dd(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return gc()<=Fr.DEBUG&&yc("QueryEngine","Using full collection scan to execute query:",Od(t)),this.Gi.getDocumentsMatchingQuery(e,t,eu.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ig{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Zu(Mc),this.ns=new Fd((e=>fd(e)),pd),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Tg(e,t,n,r){return new Ig(e,t,n,r)}async function kg(e,t){const n=Sc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Gd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function xg(e){const t=Sc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Cg(e,t,n){let r=Gd(),i=Gd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=jd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(zc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):yc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function Ng(e,t){const n=Sc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ag(e,t){const n=Sc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,su.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new Dp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function Og(e,t,n){const r=Sc(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!uu(e))throw e;yc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Dg(e,t,n){const r=Sc(e);let i=zc.min(),s=Gd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Sc(e),i=r.ns.get(n);return void 0!==i?su.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Td(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:zc.min(),n?s:Gd()))).next((e=>(Lg(r,Rd(t),e),{documents:e,ls:s})))))}function Rg(e,t){const n=Sc(e),r=Sc(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Pg(e,t){const n=Sc(e),r=n.rs.get(t)||zc.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Xc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Lg(n,t,e),e)))}function Lg(e,t,n){let r=e.rs.get(t)||zc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function Fg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gd();const r=await Ag(e,Td(zp(t.bundledQuery))),i=Sc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=ap(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(ah.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function Mg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ug(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Vg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Tc(r.error.code,r.error.message))),s?new Vg(e,t,r.state,i):(vc("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Tc(n.error.code,n.error.message))),i?new zg(e,n.state,r):(vc("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=$d();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=bu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Bg(e,i):(vc("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class qg{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qg(t.clientId,t.onlineState):(vc("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Wg{constructor(){this.activeTargetIds=$d()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kg{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Zu(Mc),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=Mg(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Wg),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(Mg(this.persistenceKey,n));if(e){const t=Bg.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ug(this.persistenceKey,e));if(n){const r=zg.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return yc("SharedClientState","READ",e,t),t}setItem(e,t){yc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){yc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(yc("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void vc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=yu._e;if(null!=e)try{const n=JSON.parse(e);Ec("number"==typeof n),t=n}catch(e){vc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==yu._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new Vg(this.currentUser,e,t,n),i=jg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=jg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Ug(this.persistenceKey,e),i=new zg(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return Bg.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Vg.Ts(new fc(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return zg.Ts(r,t)}Ms(e){return qg.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);yc("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=$d();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Hg{constructor(){this.eo=new Wg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Wg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gg{ro(e){}shutdown(){}}class Qg{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){yc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){yc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $g=null;function Yg(){return null===$g?$g=268435456+Math.round(2147483648*Math.random()):$g++,"0x"+$g.toString(16)}const Jg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xg{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Zg="WebChannelConnection";class ey extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=Yg(),o=this.So(e,t);yc("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(yc("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw wc("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Jg[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Yg();return new Promise(((s,o)=>{const a=new cc;a.setWithCredentials(!0),a.listenOnce(sc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ic.NO_ERROR:const t=a.getResponseJson();yc(Zg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ic.TIMEOUT:yc(Zg,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Tc(Ic.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const n=a.getStatus();if(yc(Zg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ic).indexOf(t)>=0?t:Ic.UNKNOWN}(t.status);o(new Tc(e,t.message))}else o(new Tc(Ic.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Tc(Ic.UNAVAILABLE,"Connection failed."));break;default:_c()}}finally{yc(Zg,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);yc(Zg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=Yg(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nc(),o=rc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");yc(Zg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Xg({co:t=>{d?yc(Zg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(yc(Zg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),yc(Zg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,lc.EventType.OPEN,(()=>{d||yc(Zg,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,lc.EventType.CLOSE,(()=>{d||(d=!0,yc(Zg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,lc.EventType.ERROR,(t=>{d||(d=!0,wc(Zg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Tc(Ic.UNAVAILABLE,"The operation could not be completed")))})),p(u,lc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ec(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){yc(Zg,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Rf[e];if(void 0!==t)return Ff(t)}(t),i=o.message;void 0===n&&(n=Ic.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Tc(n,i)),u.close()}else yc(Zg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,oc.STAT_EVENT,(t=>{t.stat===ac.PROXY?yc(Zg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ac.NOPROXY&&yc(Zg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function ty(){return"undefined"!=typeof window?window:null}function ny(){return"undefined"!=typeof document?document:null}function ry(e){return new np(e,!0)}class iy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&yc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class sy{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new iy(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Ic.RESOURCE_EXHAUSTED?(vc(t.toString()),vc("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Ic.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Tc(Ic.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return yc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(yc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oy extends sy{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:_c()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ec(void 0===t||"string"==typeof t),ah.fromBase64String(t||"")):(Ec(void 0===t||t instanceof Uint8Array),ah.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ic.UNKNOWN:Ff(e.code);return new Tc(t,e.message||"")}(o);n=new Qf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=hp(e,r.document.name),s=ap(r.document.updateTime),o=r.document.createTime?ap(r.document.createTime):zc.min(),a=new jh({mapValue:{fields:r.document.fields}}),l=Vh.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=hp(e,r.document),s=r.readTime?ap(r.readTime):zc.min(),o=Vh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=hp(e,r.document),s=r.removedTargetIds||[];n=new Hf([],s,i,null)}else{if(!("filter"in t))return _c();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Df(r,i),o=e.targetId;n=new Gf(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return zc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?zc.min():t.readTime?ap(t.readTime):zc.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=pp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=md(r)?{documents:bp(e,r)}:{query:_p(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=sp(e,t.resumeToken);const r=rp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(zc.min())>0){n.readTime=ip(e,t.snapshotVersion.toTimestamp());const r=rp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _c()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=pp(this.serializer),t.removeTarget=e,this.e_(t)}}class ay extends sy{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ec(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Ec(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ap(e.updateTime):ap(t);return n.isEqual(zc.min())&&(n=ap(t)),new ff(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ap(e.commitTime);return this.listener.I_(n,t)}return Ec(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=pp(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>vp(this.serializer,e)))};this.e_(t)}}class ly extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Tc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ic.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tc(Ic.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ic.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tc(Ic.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class cy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(vc(t),this.f_=!1):yc("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class uy{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{wy(this)&&(yc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Sc(e);t.C_.add(4),await dy(t),t.M_.set("Unknown"),t.C_.delete(4),await hy(t)}(this))}))})),this.M_=new cy(n,r)}}async function hy(e){if(wy(e))for(const t of e.v_)await t(!0)}async function dy(e){for(const t of e.v_)await t(!1)}function fy(e,t){const n=Sc(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),vy(n)?yy(n):My(n).Ho()&&my(n,t))}function py(e,t){const n=Sc(e),r=My(n);n.D_.delete(t),r.Ho()&&gy(n,t),0===n.D_.size&&(r.Ho()?r.Zo():wy(n)&&n.M_.set("Unknown"))}function my(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(zc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}My(e).u_(t)}function gy(e,t){e.x_.Oe(t),My(e).c_(t)}function yy(e){e.x_=new Yf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),My(e).start(),e.M_.g_()}function vy(e){return wy(e)&&!My(e).jo()&&e.D_.size>0}function wy(e){return 0===Sc(e).C_.size}function by(e){e.x_=void 0}async function _y(e){e.D_.forEach(((t,n)=>{my(e,t)}))}async function Ey(e,t){by(e),vy(e)?(e.M_.w_(t),yy(e)):e.M_.set("Unknown")}async function Sy(e,t,n){if(e.M_.set("Online"),t instanceof Qf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){yc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Iy(e,n)}else if(t instanceof Hf?e.x_.$e(t):t instanceof Gf?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(zc.min()))try{const t=await xg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(ah.EMPTY_BYTE_STRING,r.snapshotVersion)),gy(e,t);const i=new Dp(r.target,t,n,r.sequenceNumber);my(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){yc("RemoteStore","Failed to raise snapshot:",t),await Iy(e,t)}}async function Iy(e,t,n){if(!uu(t))throw t;e.C_.add(1),await dy(e),e.M_.set("Offline"),n||(n=()=>xg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{yc("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await hy(e)}))}function Ty(e,t){return t().catch((n=>Iy(e,n,t)))}async function ky(e){const t=Sc(e),n=jy(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;xy(t);)try{const e=await Ng(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Cy(t,e)}catch(e){await Iy(t,e)}Ny(t)&&Ay(t)}function xy(e){return wy(e)&&e.b_.length<10}function Cy(e,t){e.b_.push(t);const n=jy(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Ny(e){return wy(e)&&!jy(e).jo()&&e.b_.length>0}function Ay(e){jy(e).start()}async function Oy(e){jy(e).E_()}async function Dy(e){const t=jy(e);for(const n of e.b_)t.P_(n.mutations)}async function Ry(e,t,n){const r=e.b_.shift(),i=Af.from(r,t,n);await Ty(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ky(e)}async function Py(e,t){t&&jy(e).h_&&await async function(e,t){if(function(e){return Lf(e)&&e!==Ic.ABORTED}(t.code)){const n=e.b_.shift();jy(e).Yo(),await Ty(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ky(e)}}(e,t),Ny(e)&&Ay(e)}async function Ly(e,t){const n=Sc(e);n.asyncQueue.verifyOperationInProgress(),yc("RemoteStore","RemoteStore received new credentials");const r=wy(n);n.C_.add(3),await dy(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await hy(n)}async function Fy(e,t){const n=Sc(e);t?(n.C_.delete(2),await hy(n)):t||(n.C_.add(2),await dy(n),n.M_.set("Unknown"))}function My(e){return e.O_||(e.O_=function(e,t,n){const r=Sc(e);return r.A_(),new oy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:_y.bind(null,e),Io:Ey.bind(null,e),a_:Sy.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),vy(e)?yy(e):e.M_.set("Unknown")):(await e.O_.stop(),by(e))}))),e.O_}function jy(e){return e.N_||(e.N_=function(e,t,n){const r=Sc(e);return r.A_(),new ay(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Oy.bind(null,e),Io:Py.bind(null,e),T_:Dy.bind(null,e),I_:Ry.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await ky(e)):(await e.N_.stop(),e.b_.length>0&&(yc("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class Uy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Uy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tc(Ic.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(e,t){if(vc("AsyncQueue","".concat(t,": ").concat(e)),uu(e))return new Tc(Ic.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class zy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Hc.comparator(t.key,n.key):(e,t)=>Hc.comparator(e.key,t.key),this.keyedMap=Vd(),this.sortedSet=new Zu(this.comparator)}static emptySet(e){return new zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new zy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class By{constructor(){this.B_=new Zu(Hc.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):_c():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class qy{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new qy(e,t,zy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wy{constructor(){this.k_=void 0,this.listeners=[]}}class Ky{constructor(){this.queries=new Fd((e=>Ad(e)),Nd),this.onlineState="Unknown",this.q_=new Set}}async function Hy(e,t){const n=Sc(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Wy),i)try{s.k_=await n.onListen(r)}catch(e){const n=Vy(e,"Initialization of query '".concat(Od(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&Yy(n)}async function Gy(e,t){const n=Sc(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Qy(e,t){const n=Sc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&Yy(n)}function $y(e,t,n){const r=Sc(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Yy(e){e.q_.forEach((e=>{e.next()}))}class Jy{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new qy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=qy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Xy{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Zy{constructor(e){this.serializer=e}hs(e){return hp(this.serializer,e)}Ps(e){return e.metadata.exists?yp(this.serializer,e.document,!1):Vh.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ap(e)}}class ev{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tv(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=qc.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new Zy(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Gd()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Sc(e);let s=Gd(),o=jd();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await Ag(i,function(e){return Td(_d(qc.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Cg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new Zy(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await Fg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function tv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class nv{constructor(e){this.key=e}}class rv{constructor(e){this.key=e}}class iv{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Gd(),this.mutatedKeys=Gd(),this._a=Pd(e),this.aa=new zy(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new By,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Dd(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _c()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new qy(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new By,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Gd(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new rv(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new nv(n))})),t}da(e){this.ia=e.ls,this.oa=Gd();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return qy.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class sv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ov{constructor(e){this.key=e,this.Ra=!1}}class av{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Fd((e=>Ad(e)),Nd),this.fa=new Map,this.ga=new Set,this.pa=new Zu(Hc.comparator),this.ya=new Map,this.wa=new sg,this.Sa={},this.ba=new Map,this.Da=Pm.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function lv(e,t){const n=Pv(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await Ag(n.localStore,Td(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await cv(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&fy(n.remoteStore,e)}return i}async function cv(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await Dg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return bv(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await Dg(e.localStore,t,!0),o=new iv(t,s.ls),a=o.ca(s.documents),l=Kf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);bv(e,n,c.Ta);const u=new sv(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function uv(e,t){const n=Sc(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!Nd(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Og(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),py(n.remoteStore,r.targetId),vv(n,r.targetId)})).catch(iu)):(vv(n,r.targetId),await Og(n.localStore,r.targetId,!0))}async function hv(e,t){const n=Sc(e);try{const e=await function(e,t){const n=Sc(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ah.EMPTY_BYTE_STRING,zc.min()).withLastLimboFreeSnapshotVersion(zc.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=jd(),l=Gd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Cg(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(zc.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return su.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Ec(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Ec(r.Ra):e.removedDocuments.size>0&&(Ec(r.Ra),r.Ra=!1))})),await Sv(n,e,t)}catch(e){await iu(e)}}function dv(e,t,n){const r=Sc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Sc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&Yy(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fv(e,t,n){const r=Sc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new Zu(Hc.comparator);e=e.insert(s,Vh.newNoDocument(s,zc.min()));const n=Gd().add(s),i=new Wf(zc.min(),new Map,new Zu(Mc),e,n);await hv(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),Ev(r)}else await Og(r.localStore,t,!1).then((()=>vv(r,t,n))).catch(iu)}async function pv(e,t){const n=Sc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Sc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=su.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ec(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yv(n,r,null),gv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sv(n,e)}catch(e){await iu(e)}}async function mv(e,t,n){const r=Sc(e);try{const e=await function(e,t){const n=Sc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ec(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yv(r,t,n),gv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sv(r,e)}catch(n){await iu(n)}}function gv(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function yv(e,t,n){const r=Sc(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function vv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||wv(e,t)}))}function wv(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(py(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Ev(e))}function bv(e,t,n){for(const r of n)r instanceof nv?(e.wa.addReference(r.key,t),_v(e,r)):r instanceof rv?(yc("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||wv(e,r.key)):_c()}function _v(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(yc("SyncEngine","New document in limbo: "+n),e.ga.add(r),Ev(e))}function Ev(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Hc(qc.fromString(t)),r=e.Da.next();e.ya.set(r,new ov(n)),e.pa=e.pa.insert(n,r),fy(e.remoteStore,new Dp(Td(_d(n.path)),r,"TargetPurposeLimboResolution",yu._e))}}async function Sv(e,t,n){const r=Sc(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=_g.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Sc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>su.forEach(t,(t=>su.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>su.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!uu(e))throw e;yc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function Iv(e,t){const n=Sc(e);if(!n.currentUser.isEqual(t)){yc("SyncEngine","User change. New user:",t.toKey());const e=await kg(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Tc(Ic.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sv(n,e._s)}}function Tv(e,t){const n=Sc(e),r=n.ya.get(t);if(r&&r.Ra)return Gd().add(r.key);{let e=Gd();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function kv(e,t){const n=Sc(e),r=await Dg(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&bv(n,t.targetId,i.Ta),i}async function xv(e,t){const n=Sc(e);return Pg(n.localStore,t).then((e=>Sv(n,e)))}async function Cv(e,t,n,r){const i=Sc(e),s=await function(e,t){const n=Sc(e),r=Sc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):su.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ky(i.remoteStore):"acknowledged"===n||"rejected"===n?(yv(i,t,r||null),gv(i,t),function(e,t){Sc(Sc(e).mutationQueue).Fn(t)}(i.localStore,t)):_c(),await Sv(i,s)):yc("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Nv(e,t,n){const r=Sc(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await Ag(r.localStore,Td(t[0]));for(const e of t){const t=r.ma.get(e),n=await kv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Rg(r.localStore,o);e=await Ag(r.localStore,t),await cv(r,Av(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function Av(e){return bd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ov(e){return function(e){return Sc(Sc(e).persistence).Bi()}(Sc(e).localStore)}async function Dv(e,t,n,r){const i=Sc(e);if(i.Ca)return void yc("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Pg(i.localStore,Rd(s[0])),r=Wf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ah.EMPTY_BYTE_STRING);await Sv(i,e,r);break}case"rejected":await Og(i.localStore,t,!0),vv(i,t,r);break;default:_c()}}async function Rv(e,t,n){const r=Pv(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){yc("SyncEngine","Adding an already active target "+e);continue}const t=await Rg(r.localStore,e),n=await Ag(r.localStore,t);await cv(r,Av(t),n.targetId,!1,n.resumeToken),fy(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await Og(r.localStore,e,!1).then((()=>{py(r.remoteStore,e),vv(r,e)})).catch(iu)}}function Pv(e){const t=Sc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fv.bind(null,t),t.Va.a_=Qy.bind(null,t.eventManager),t.Va.Fa=$y.bind(null,t.eventManager),t}function Lv(e){const t=Sc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mv.bind(null,t),t}class Fv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ry(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Tg(this.persistence,new Sg,e.initialUser,this.serializer)}createPersistence(e){return new hg(fg.jr,this.serializer)}createSharedClientState(e){return new Hg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mv extends Fv{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Lv(this.xa.syncEngine),await ky(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Tg(this.persistence,new Sg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new zm(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new gu(t,this.persistence);return new mu(e.asyncQueue,n)}createPersistence(e){const t=bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?km.withCacheSize(this.cacheSizeBytes):km.DEFAULT;return new yg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ty(),ny(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Hg}}class jv extends Mv{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof Kg&&(this.sharedClientState.syncEngine={Ys:Cv.bind(null,t),Zs:Dv.bind(null,t),Xs:Rv.bind(null,t),Bi:Ov.bind(null,t),Js:xv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Sc(e);if(Pv(n),Lv(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Nv(n,e.toArray());n.Ca=!0,await Fy(n.remoteStore,!0);for(const r of t)fy(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(vv(n,i),Og(n.localStore,i,!0)))),py(n.remoteStore,i)})),await t,await Nv(n,e),function(e){const t=Sc(e);t.ya.forEach(((e,n)=>{py(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new Zu(Hc.comparator)}(n),n.Ca=!1,await Fy(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=ty();if(!Kg.D(t))throw new Tc(Ic.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Uv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iv.bind(null,this.syncEngine),await Fy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ky}createDatastore(e){const t=ry(e.databaseInfo.databaseId),n=function(e){return new ey(e)}(e.databaseInfo);return function(e,t,n,r){return new ly(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new uy(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>dv(this.syncEngine,e,0)),Qg.D()?new Qg:new Gg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new av(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Sc(e);yc("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await dy(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function Vv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):vc("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Bv{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new kc,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new Xy(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class qv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Tc(Ic.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Sc(e),r=pp(n.serializer)+"/documents",i={documents:t.map((e=>up(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ec(!!t.found),t.found.name,t.found.updateTime;const n=hp(e,t.found.name),r=ap(t.found.updateTime),i=t.found.createTime?ap(t.found.createTime):zc.min(),s=new jh({mapValue:{fields:t.found.fields}});return Vh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ec(!!t.missing),Ec(!!t.readTime);const n=hp(e,t.missing),r=ap(t.readTime);return Vh.newNoDocument(n,r)}(e,t):_c()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ec(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new xf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Hc.fromPath(t);this.mutations.push(new Cf(n,this.precondition(n)))})),await async function(e,t){const n=Sc(e),r=pp(n.serializer)+"/documents",i={writes:t.map((e=>vp(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _c();t=zc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Tc(Ic.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(zc.min())?pf.exists(!1):pf.updateTime(t):pf.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zc.min()))throw new Tc(Ic.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pf.updateTime(t)}return pf.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wv{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new iy(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new qv(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!vu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lf(t)}return!1}}class Kv{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=fc.UNAUTHENTICATED,this.clientId=Fc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{yc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(yc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Hv(e,t){e.asyncQueue.verifyOperationInProgress(),yc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await kg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Gv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $v(e);yc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Ly(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ly(t.remoteStore,n))),e._onlineComponents=t}function Qv(e){return"FirebaseError"===e.name?e.code===Ic.FAILED_PRECONDITION||e.code===Ic.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function $v(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){yc("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Qv(n))throw n;wc("Error using user provided cache. Falling back to memory cache: "+n),await Hv(e,new Fv)}}else yc("FirestoreClient","Using default OfflineComponentProvider"),await Hv(e,new Fv);return e._offlineComponents}async function Yv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(yc("FirestoreClient","Using user provided OnlineComponentProvider"),await Gv(e,e._uninitializedComponentsProvider._online)):(yc("FirestoreClient","Using default OnlineComponentProvider"),await Gv(e,new Uv))),e._onlineComponents}function Jv(e){return $v(e).then((e=>e.persistence))}function Xv(e){return $v(e).then((e=>e.localStore))}function Zv(e){return Yv(e).then((e=>e.remoteStore))}function ew(e){return Yv(e).then((e=>e.syncEngine))}function tw(e){return Yv(e).then((e=>e.datastore))}async function nw(e){const t=await Yv(e),n=t.eventManager;return n.onListen=lv.bind(null,t.syncEngine),n.onUnlisten=uv.bind(null,t.syncEngine),n}function rw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zv({next:s=>{t.enqueueAndForget((()=>Gy(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Tc(Ic.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Tc(Ic.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Jy(_d(n.path),s,{includeMetadataChanges:!0,J_:!0});return Hy(e,o)}(await nw(e),e.asyncQueue,t,n,r))),r.promise}function iw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zv({next:n=>{t.enqueueAndForget((()=>Gy(e,o))),n.fromCache&&"server"===r.source?i.reject(new Tc(Ic.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Jy(n,s,{includeMetadataChanges:!0,J_:!0});return Hy(e,o)}(await nw(e),e.asyncQueue,t,n,r))),r.promise}function sw(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?jf().encode(e):e,function(e,t){return new Bv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Vv(e,t);if(e instanceof ArrayBuffer)return Vv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ry(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Sc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Sc(e),r=ap(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(tv(r));const i=new ev(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await Sv(e,o.ra,void 0),await function(e,t){const n=Sc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return wc("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ew(e),i,r)}))}function ow(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const aw=new Map;function lw(e,t,n){if(!n)throw new Tc(Ic.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cw(e,t,n,r){if(!0===t&&!0===r)throw new Tc(Ic.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function uw(e){if(!Hc.isDocumentKey(e))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hw(e){if(Hc.isDocumentKey(e))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":_c()}function fw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tc(Ic.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dw(e);throw new Tc(Ic.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pw(e,t){if(t<=0)throw new Tc(Ic.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class mw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Tc(Ic.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tc(Ic.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ow(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Tc(Ic.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Tc(Ic.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Tc(Ic.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Cc;switch(e.type){case"firstParty":return new Dc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Tc(Ic.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aw.get(e);t&&(yc("ComponentProvider","Removing Datastore"),aw.delete(e),t.terminate())}(this),Promise.resolve()}}function yw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=fw(e,gw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&wc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=fc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sr(JSON.stringify({alg:"none",type:"JWT"})),sr(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Tc(Ic.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fc(s)}e._authCredentials=new Nc(new xc(t,n))}}class vw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vw(this.firestore,e,this._query)}}class ww{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ww(this.firestore,e,this._key)}}class bw extends vw{constructor(e,t,n){super(e,t,_d(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ww(this.firestore,null,new Hc(e))}withConverter(e){return new bw(this.firestore,e,this._path)}}function _w(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ar(e),lw("collection","path",t),e instanceof gw){const n=qc.fromString(t,...r);return hw(n),new bw(e,null,n)}{if(!(e instanceof ww||e instanceof bw))throw new Tc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qc.fromString(t,...r));return hw(n),new bw(e.firestore,null,n)}}function Ew(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ar(e),1===arguments.length&&(t=Fc.newId()),lw("doc","path",t),e instanceof gw){const n=qc.fromString(t,...r);return uw(n),new ww(e,null,new Hc(n))}{if(!(e instanceof ww||e instanceof bw))throw new Tc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qc.fromString(t,...r));return uw(n),new ww(e.firestore,e instanceof bw?e.converter:null,new Hc(n))}}function Sw(e,t){return e=Ar(e),t=Ar(t),(e instanceof ww||e instanceof bw)&&(t instanceof ww||t instanceof bw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Iw(e,t){return e=Ar(e),t=Ar(t),e instanceof vw&&t instanceof vw&&e.firestore===t.firestore&&Nd(e._query,t._query)&&e.converter===t.converter}class Tw{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new iy(this,"async_queue_retry"),this.iu=()=>{const e=ny();e&&yc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=ny();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=ny();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new kc;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!uu(e))throw e;yc("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=Uy.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&_c()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function kw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class xw{constructor(){this._progressObserver={},this._taskCompletionResolver=new kc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cw extends gw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Aw(this),this._firestoreClient.terminate()}}function Nw(e){return e._firestoreClient||Aw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Aw(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new mh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ow(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Kv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Ow(e,t,n){const r=new kc;return e.asyncQueue.enqueue((async()=>{try{await Hv(e,n),await Gv(e,t),r.resolve()}catch(e){const n=e;if(!Qv(n))throw n;wc("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Dw(e){return function(e){const t=new kc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Sc(e);wy(n.remoteStore)||yc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Sc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=Vy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ew(e),t))),t.promise}(Nw(e=fw(e,Cw)))}function Rw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Jv(e),n=await Zv(e);return t.setNetworkEnabled(!0),function(e){const t=Sc(e);return t.C_.delete(0),hy(t)}(n)}))}(Nw(e=fw(e,Cw)))}function Pw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Jv(e),n=await Zv(e);return t.setNetworkEnabled(!1),async function(e){const t=Sc(e);t.C_.add(0),await dy(t),t.M_.set("Offline")}(n)}))}(Nw(e=fw(e,Cw)))}function Lw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Sc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await Xv(e),t)))}(Nw(e=fw(e,Cw)),t).then((t=>t?new vw(e,null,t.query):null))}function Fw(e){if(e._initialized||e._terminated)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mw(ah.fromBase64String(e))}catch(e){throw new Tc(Ic.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Mw(ah.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uw{constructor(e){this._methodName=e}}class Vw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tc(Ic.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tc(Ic.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mc(this._lat,e._lat)||Mc(this._long,e._long)}}const zw=/^__.*__$/;class Bw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ef(e,this.data,t,this.fieldTransforms)}}class qw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ww(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _c()}}class Kw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Kw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return hb(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Ww(this.Iu)&&zw.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Hw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ry(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kw({Iu:e,methodName:t,gu:n,path:Kc.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gw(e){const t=e._freezeSettings(),n=ry(e._databaseId);return new Hw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qw(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);ab("Data must be an object, but it was:",o,r);const a=sb(r,o);let l,c;if(s.merge)l=new sh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=lb(t,r,n);if(!o.contains(i))throw new Tc(Ic.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));db(e,i)||e.push(i)}l=new sh(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Bw(new jh(a),l,c)}class $w extends Uw{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $w}}function Yw(e,t,n){return new Kw({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Jw extends Uw{_toFieldTransform(e){return new df(e.path,new rf)}isEqual(e){return e instanceof Jw}}class Xw extends Uw{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Yw(this,e,!0),n=this.yu.map((e=>ib(e,t))),r=new sf(n);return new df(e.path,r)}isEqual(e){return this===e}}class Zw extends Uw{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Yw(this,e,!0),n=this.yu.map((e=>ib(e,t))),r=new af(n);return new df(e.path,r)}isEqual(e){return this===e}}class eb extends Uw{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new cf(e.serializer,Xd(e.serializer,this.wu));return new df(e.path,t)}isEqual(e){return this===e}}function tb(e,t,n,r){const i=e.pu(1,t,n);ab("Data must be an object, but it was:",i,r);const s=[],o=jh.empty();Ju(r,((e,r)=>{const a=ub(t,e,n);r=Ar(r);const l=i.Ru(a);if(r instanceof $w)s.push(a);else{const e=ib(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new sh(s);return new qw(o,a,i.fieldTransforms)}function nb(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[lb(t,r,n)],l=[i];if(s.length%2!=0)throw new Tc(Ic.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(lb(t,s[d])),l.push(s[d+1]);const c=[],u=jh.empty();for(let d=a.length-1;d>=0;--d)if(!db(c,a[d])){const e=a[d];let t=l[d];t=Ar(t);const n=o.Ru(e);if(t instanceof $w)c.push(e);else{const r=ib(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new sh(c);return new qw(u,h,o.fieldTransforms)}function rb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ib(n,e.pu(r?4:3,t))}function ib(e,t){if(ob(e=Ar(e)))return ab("Unsupported field value:",t,e),sb(e,t);if(e instanceof Uw)return function(e,t){if(!Ww(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ib(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ar(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Vc.fromDate(e);return{timestampValue:ip(t.serializer,n)}}if(e instanceof Vc){const n=new Vc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ip(t.serializer,n)}}if(e instanceof Vw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mw)return{bytesValue:sp(t.serializer,e._byteString)};if(e instanceof ww){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:lp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(dw(e)))}(e,t)}function sb(e,t){const n={};return Xu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ju(e,((e,r)=>{const i=ib(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ob(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Vc||e instanceof Vw||e instanceof Mw||e instanceof ww||e instanceof Uw)}function ab(e,t,n){if(!ob(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=dw(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function lb(e,t,n){if((t=Ar(t))instanceof jw)return t._internalPath;if("string"==typeof t)return ub(e,t);throw hb("Field path arguments must be of type string or ",e,!1,void 0,n)}const cb=new RegExp("[~\\*/\\[\\]]");function ub(e,t,n){if(t.search(cb)>=0)throw hb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new jw(...t.split("."))._internalPath}catch(ss){throw hb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hb(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Tc(Ic.INVALID_ARGUMENT,a+e+l)}function db(e,t){return e.some((e=>e.isEqual(t)))}class fb{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ww(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pb extends fb{data(){return super.data()}}function mb(e,t){return"string"==typeof t?ub(e,t):t instanceof jw?t._internalPath:t._delegate._internalPath}function gb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Tc(Ic.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yb{}class vb extends yb{}function wb(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof yb&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof _b)).length,n=e.filter((e=>e instanceof bb)).length;if(t>1||t>0&&n>0)throw new Tc(Ic.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class bb extends vb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new bb(e,t,n)}_apply(e){const t=this._parse(e);return Nb(e._query,t),new vw(e.firestore,e.converter,xd(e._query,t))}_parse(e){const t=Gw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Cb(o,s);const t=[];for(const n of o)t.push(xb(r,e,n));a={arrayValue:{values:t}}}else a=xb(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Cb(o,s),a=rb(n,t,o,"in"===s||"not-in"===s);return Gh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class _b extends yb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _b(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Qh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Nb(n,i),n=xd(n,i)}(e._query,t),new vw(e.firestore,e.converter,xd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Eb extends vb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eb(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wh(t,n)}(e._query,this._field,this._direction);return new vw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new wd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Sb extends vb{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Sb(e,t,n)}_apply(e){return new vw(e.firestore,e.converter,Cd(e._query,this._limit,this._limitType))}}class Ib extends vb{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ib(e,t,n)}_apply(e){const t=kb(e,this.type,this._docOrFields,this._inclusive);return new vw(e.firestore,e.converter,function(e,t){return new wd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Tb extends vb{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Tb(e,t,n)}_apply(e){const t=kb(e,this.type,this._docOrFields,this._inclusive);return new vw(e.firestore,e.converter,function(e,t){return new wd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function kb(e,t,n,r){if(n[0]=Ar(n[0]),n[0]instanceof fb)return function(e,t,n,r,i){if(!r)throw new Tc(Ic.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Id(e))if(o.field.isKeyField())s.push(kh(t,r.key));else{const e=r.data.field(o.field);if(dh(e))throw new Tc(Ic.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new zh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Gw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Tc(Ic.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Sd(e)&&-1!==s.indexOf("/"))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(qc.fromString(s));if(!Hc.isDocumentKey(n))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Hc(n);a.push(kh(t,i))}else{const e=rb(n,r,s);a.push(e)}}return new zh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function xb(e,t,n){if("string"==typeof(n=Ar(n))){if(""===n)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sd(t)&&-1!==n.indexOf("/"))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(qc.fromString(n));if(!Hc.isDocumentKey(r))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return kh(e,new Hc(r))}if(n instanceof ww)return kh(e,n._key);throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dw(n),"."))}function Cb(e,t){if(!Array.isArray(e)||0===e.length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Nb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ab{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _c()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ju(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Vw(uh(e.latitude),uh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ph(e));default:return null}}convertTimestamp(e){const t=ch(e);return new Vc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qc.fromString(e);Ec(Op(n));const r=new gh(n.get(1),n.get(3)),i=new Hc(n.popFirst(5));return r.isEqual(t)||vc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ob(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Db extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ww(this.firestore,null,t)}}class Rb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pb extends fb{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Lb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Lb extends Pb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Rb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Lb(this._firestore,this._userDataWriter,n.key,n,new Rb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Tc(Ic.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Lb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Rb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Lb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Rb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Mb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Mb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _c()}}function jb(e,t){return e instanceof Pb&&t instanceof Pb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fb&&t instanceof Fb&&e._firestore===t._firestore&&Iw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Ub extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ww(this.firestore,null,t)}}function Vb(e){e=fw(e,ww);const t=fw(e.firestore,Cw),n=Nw(t),r=new Ub(t);return function(e,t){const n=new kc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Sc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Tc(Ic.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Vy(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Xv(e),t,n))),n.promise}(n,e._key).then((n=>new Pb(t,r,e._key,n,new Rb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function zb(e){e=fw(e,vw);const t=fw(e.firestore,Cw),n=Nw(t),r=new Ub(t);return function(e,t){const n=new kc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Dg(e,t,!0),i=new iv(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Vy(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Xv(e),t,n))),n.promise}(n,e._query).then((n=>new Fb(t,r,e,n)))}function Bb(e,t,n){e=fw(e,ww);const r=fw(e.firestore,Cw),i=Ob(e.converter,t,n);return Hb(r,[Qw(Gw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pf.none())])}function qb(e,t,n){e=fw(e,ww);const r=fw(e.firestore,Cw),i=Gw(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ar(t))||t instanceof jw?nb(i,"updateDoc",e._key,t,n,a):tb(i,"updateDoc",e._key,t),Hb(r,[s.toMutation(e._key,pf.exists(!0))])}function Wb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ar(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||kw(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(kw(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof ww)h=fw(e.firestore,Cw),d=_d(e._key.path),u={next:t=>{n[l]&&n[l](Gb(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=fw(e,vw);h=fw(t.firestore,Cw),d=t._query;const r=new Ub(h);u={next:e=>{n[l]&&n[l](new Fb(h,r,t,e))},error:n[l+1],complete:n[l+2]},gb(e._query)}return function(e,t,n,r){const i=new zv(r),s=new Jy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Hy(await nw(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>Gy(await nw(e),s)))}}(Nw(h),d,c,u)}function Kb(e,t){return function(e,t){const n=new zv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Sc(e).q_.add(t),t.next()}(await nw(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Sc(e).q_.delete(t)}(await nw(e),n)))}}(Nw(e=fw(e,Cw)),kw(t)?t:{next:t})}function Hb(e,t){return function(e,t){const n=new kc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Lv(e);try{const e=await function(e,t){const n=Sc(e),r=Vc.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=jd(),l=Gd();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=bf(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Sf(e.key,t,Uh(t.value.mapValue),pf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:zd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Zu(Mc)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sv(r,e.changes),await ky(r.remoteStore)}catch(e){const t=Vy(e,"Failed to persist write");n.reject(t)}}(await ew(e),t,n))),n.promise}(Nw(e),t)}function Gb(e,t,n){const r=n.docs.get(t._key),i=new Ub(e);return new Pb(e,i,t._key,r,new Rb(n.hasPendingWrites,n.fromCache),t.converter)}const Qb={maxAttempts:5};class $b{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gw(e)}set(e,t,n){this._verifyNotCommitted();const r=Yb(e,this._firestore),i=Ob(r.converter,t,n),s=Qw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,pf.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Yb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ar(t))||t instanceof jw?nb(this._dataReader,"WriteBatch.update",r._key,t,n,o):tb(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,pf.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yb(e,this._firestore);return this._mutations=this._mutations.concat(new xf(t._key,pf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tc(Ic.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yb(e,t){if((e=Ar(e)).firestore!==t)throw new Tc(Ic.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Jb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gw(e)}get(e){const t=Yb(e,this._firestore),n=new Db(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return _c();const r=e[0];if(r.isFoundDocument())return new fb(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new fb(this._firestore,n,t._key,null,t.converter);throw _c()}))}set(e,t,n){const r=Yb(e,this._firestore),i=Ob(r.converter,t,n),s=Qw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Yb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ar(t))||t instanceof jw?nb(this._dataReader,"Transaction.update",r._key,t,n,o):tb(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Yb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yb(e,this._firestore),n=new Ub(this._firestore);return super.get(e).then((e=>new Pb(this._firestore,n,t._key,e._document,new Rb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){pc=e}(_i),mi(new Or("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Cw(new Ac(e.getProvider("auth-internal")),new Pc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Tc(Ic.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ki(dc,"4.4.0",e),ki(dc,"4.4.0","esm2017")}();function Xb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Tc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Zb(){if("undefined"===typeof Uint8Array)throw new Tc("unimplemented","Uint8Arrays are not available in this environment.")}function e_(){if("undefined"==typeof atob)throw new Tc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class t_{constructor(e){this._delegate=e}static fromBase64String(e){return e_(),new t_(Mw.fromBase64String(e))}static fromUint8Array(e){return Zb(),new t_(Mw.fromUint8Array(e))}toBase64(){return e_(),this._delegate.toBase64()}toUint8Array(){return Zb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function n_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class r_{enableIndexedDbPersistence(e,t){return function(e,t){Fw(e=fw(e,Cw));const n=Nw(e);if(n._uninitializedComponentsProvider)throw new Tc(Ic.FAILED_PRECONDITION,"SDK cache is already specified.");wc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Uv;return Ow(n,i,new Mv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Fw(e=fw(e,Cw));const t=Nw(e);if(t._uninitializedComponentsProvider)throw new Tc(Ic.FAILED_PRECONDITION,"SDK cache is already specified.");wc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Uv;return Ow(t,r,new jv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Tc(Ic.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new kc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!au.D())return Promise.resolve();const t=e+"main";await au.delete(t)}(bg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class i_{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof gh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||wc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yw(this._delegate,e,t,n)}enableNetwork(){return Rw(this._delegate)}disableNetwork(){return Pw(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,cw("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Dw(this._delegate)}onSnapshotsInSync(e){return Kb(this._delegate,e)}get app(){if(!this._appCompat)throw new Tc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new v_(this,_w(this._delegate,e))}catch(t){throw u_(t,"collection()","Firestore.collection()")}}doc(e){try{return new c_(this,Ew(this._delegate,e))}catch(t){throw u_(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new m_(this,function(e,t){if(e=fw(e,gw),lw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new vw(e,null,function(e){return new wd(qc.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw u_(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=fw(e,Cw);const r=Object.assign(Object.assign({},Qb),n);return function(e){if(e.maxAttempts<1)throw new Tc(Ic.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new kc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await tw(e);new Wv(e.asyncQueue,i,n,t,r).run()})),r.promise}(Nw(e),(n=>t(new Jb(e,n))),r)}(this._delegate,(t=>e(new o_(this,t))))}batch(){return Nw(this._delegate),new a_(new $b(this._delegate,(e=>Hb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Nw(e=fw(e,Cw)),r=new xw;return sw(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Lw(this._delegate,e).then((e=>e?new m_(this,e):null))}}class s_ extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new t_(new Mw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return c_.forKey(t,this.firestore,null)}}class o_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new s_(e)}get(e){const t=w_(e);return this._delegate.get(t).then((e=>new f_(this._firestore,new Pb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=w_(e);return n?(Xb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=w_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=w_(e);return this._delegate.delete(t),this}}class a_{constructor(e){this._delegate=e}set(e,t,n){const r=w_(e);return n?(Xb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=w_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=w_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class l_{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Lb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new p_(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=l_.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new l_(e,new s_(e),t),r.set(t,i)),i}}l_.INSTANCES=new WeakMap;class c_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new s_(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Tc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new c_(t,new ww(t._delegate,n,new Hc(e)))}static forKey(e,t,n){return new c_(t,new ww(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new v_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new v_(this.firestore,_w(this._delegate,e))}catch(t){throw u_(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ar(e))instanceof ww&&Sw(this._delegate,e)}set(e,t){t=Xb("DocumentReference.set",t);try{return t?Bb(this._delegate,e,t):Bb(this._delegate,e)}catch(n){throw u_(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qb(this._delegate,e):qb(this._delegate,e,t,...r)}catch(s){throw u_(s,"updateDoc()","DocumentReference.update()")}}delete(){return Hb(fw((e=this._delegate).firestore,Cw),[new xf(e._key,pf.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=h_(t),i=d_(t,(e=>new f_(this.firestore,new Pb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Wb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Vb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fw(e,ww);const t=fw(e.firestore,Cw);return rw(Nw(t),e._key,{source:"server"}).then((n=>Gb(t,e,n)))}(this._delegate):function(e){e=fw(e,ww);const t=fw(e.firestore,Cw);return rw(Nw(t),e._key).then((n=>Gb(t,e,n)))}(this._delegate),t.then((e=>new f_(this.firestore,new Pb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new c_(this.firestore,e?this._delegate.withConverter(l_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function u_(e,t,n){return e.message=e.message.replace(t,n),e}function h_(e){for(const t of e)if("object"===typeof t&&!n_(t))return t;return{}}function d_(e,t){var n,r;let i;return i=n_(e[0])?e[0]:n_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class f_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new c_(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jb(this._delegate,e._delegate)}}class p_ extends f_{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||_c(),t}}class m_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new s_(e)}where(e,t,n){try{return new m_(this.firestore,wb(this._delegate,function(e,t,n){const r=t,i=mb("where",e);return bb._create(i,r,n)}(e,t,n)))}catch(r){throw u_(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new m_(this.firestore,wb(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mb("orderBy",e);return Eb._create(n,t)}(e,t)))}catch(n){throw u_(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new m_(this.firestore,wb(this._delegate,(pw("limit",t=e),Sb._create("limit",t,"F"))))}catch(t){throw u_(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new m_(this.firestore,wb(this._delegate,(pw("limitToLast",t=e),Sb._create("limitToLast",t,"L"))))}catch(t){throw u_(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new m_(this.firestore,wb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ib._create("startAt",t,!0)}(...arguments)))}catch(e){throw u_(e,"startAt()","Query.startAt()")}}startAfter(){try{return new m_(this.firestore,wb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ib._create("startAfter",t,!1)}(...arguments)))}catch(e){throw u_(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new m_(this.firestore,wb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tb._create("endBefore",t,!1)}(...arguments)))}catch(e){throw u_(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new m_(this.firestore,wb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tb._create("endAt",t,!0)}(...arguments)))}catch(e){throw u_(e,"endAt()","Query.endAt()")}}isEqual(e){return Iw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?zb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fw(e,vw);const t=fw(e.firestore,Cw),n=Nw(t),r=new Ub(t);return iw(n,e._query,{source:"server"}).then((n=>new Fb(t,r,e,n)))}(this._delegate):function(e){e=fw(e,vw);const t=fw(e.firestore,Cw),n=Nw(t),r=new Ub(t);return gb(e._query),iw(n,e._query).then((n=>new Fb(t,r,e,n)))}(this._delegate),t.then((e=>new y_(this.firestore,new Fb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=h_(t),i=d_(t,(e=>new y_(this.firestore,new Fb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Wb(this._delegate,r,i)}withConverter(e){return new m_(this.firestore,e?this._delegate.withConverter(l_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class g_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new p_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class y_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new m_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new p_(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new g_(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new p_(this._firestore,n))}))}isEqual(e){return jb(this._delegate,e._delegate)}}class v_ extends m_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new c_(this.firestore,e):null}doc(e){try{return new c_(this.firestore,void 0===e?Ew(this._delegate):Ew(this._delegate,e))}catch(t){throw u_(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=fw(e.firestore,Cw),r=Ew(e),i=Ob(e.converter,t);return Hb(n,[Qw(Gw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,pf.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new c_(this.firestore,e)))}isEqual(e){return Sw(this._delegate,e._delegate)}withConverter(e){return new v_(this.firestore,e?this._delegate.withConverter(l_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function w_(e){return fw(e,ww)}class b_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new jw(...t)}static documentId(){return new b_(Kc.keyField().canonicalString())}isEqual(e){return(e=Ar(e))instanceof jw&&this._delegate._internalPath.isEqual(e._internalPath)}}class __{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Jw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new __(e)}static delete(){const e=new $w("deleteField");return e._methodName="FieldValue.delete",new __(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xw("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new __(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zw("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new __(e)}static increment(e){const t=new eb("increment",e);return t._methodName="FieldValue.increment",new __(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const E_={Firestore:i_,GeoPoint:Vw,Timestamp:Vc,Blob:t_,Transaction:o_,WriteBatch:a_,DocumentReference:c_,DocumentSnapshot:f_,Query:m_,QueryDocumentSnapshot:p_,QuerySnapshot:y_,CollectionReference:v_,FieldPath:b_,FieldValue:__,setLogLevel:function(e){var t;t=e,mc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var S_;(function(e,t){e.INTERNAL.registerComponent(new Or("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},E_)))})(S_=Ki,((e,t)=>new i_(e,t,new r_))),S_.registerVersion("@firebase/firestore-compat","0.3.23");function I_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const T_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},k_="EMAIL_SIGNIN",x_="PASSWORD_RESET",C_="RECOVER_EMAIL",N_="REVERT_SECOND_FACTOR_ADDITION",A_="VERIFY_AND_CHANGE_EMAIL",O_="VERIFY_EMAIL";function D_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R_=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},P_=D_,L_=new wr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),F_=new zr("@firebase/auth");function M_(e){if(F_.logLevel<=Fr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];F_.error("Auth (".concat(_i,"): ").concat(e),...n)}}function j_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw B_(e,...n)}function U_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return B_(e,...n)}function V_(e,t,n){const r=Object.assign(Object.assign({},P_()),{[t]:n});return new wr("auth","Firebase",r).create(t,{appName:e.name})}function z_(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&j_(e,"argument-error"),V_(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function B_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return L_.create(e,...n)}function q_(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw B_(t,...r)}}function W_(e){const t="INTERNAL ASSERTION FAILED: "+e;throw M_(t),new Error(t)}function K_(e,t){e||W_(t)}function H_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function G_(){return"http:"===Q_()||"https:"===Q_()}function Q_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class $_{constructor(e,t){this.shortDelay=e,this.longDelay=t,K_(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())||mr()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(G_()||pr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Y_(e,t){K_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class J_{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void W_("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void W_("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void W_("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const X_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Z_=new $_(3e4,6e4);function eE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tE(e,t,n,r){return nE(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ir(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),J_.fetch()(iE(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function nE(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},X_),t);try{const t=new oE(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw aE(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw aE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw aE(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw aE(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw V_(e,a,o);j_(e,a)}}catch(i){if(i instanceof vr)throw i;j_(e,"network-request-failed",{message:String(i)})}}async function rE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await tE(e,t,n,r,i);return"mfaPendingCredential"in s&&j_(e,"multi-factor-auth-required",{_serverResponse:s}),s}function iE(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Y_(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function sE(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(U_(this.auth,"network-request-failed"))),Z_.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function aE(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=U_(e,t,r);return i.customData._tokenResponse=n,i}function lE(e){return void 0!==e&&void 0!==e.getResponse}function cE(e){return void 0!==e&&void 0!==e.enterprise}class uE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sE(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function hE(e,t){return tE(e,"GET","/v2/recaptchaConfig",eE(e,t))}function dE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function fE(e){return 1e3*Number(e)}function pE(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return M_("JWT malformed, contained fewer than 3 sections"),null;try{const e=or(n);return e?JSON.parse(e):(M_("Failed to decode base64 JWT payload"),null)}catch(i){return M_("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function mE(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof vr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class gE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class yE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dE(this.lastLoginAt),this.creationTime=dE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vE(e){var t;const n=e.auth,r=await e.getIdToken(),i=await mE(e,async function(e,t){return tE(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));q_(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=I_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yE(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class wE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q_(e.idToken,"internal-error"),q_("undefined"!==typeof e.idToken,"internal-error"),q_("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=pE(e);return q_(t,"internal-error"),q_("undefined"!==typeof t.exp,"internal-error"),q_("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return q_(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nE(e,{},(async()=>{const n=Ir({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=iE(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",J_.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wE;return n&&(q_("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(q_("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(q_("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wE,this.toJSON())}_performRefresh(){return W_("not implemented")}}function bE(e,t){q_("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _E{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=I_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mE(this,this.stsTokenManager.getToken(this.auth,e));return q_(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ar(e),r=await n.getIdToken(t),i=pE(r);q_(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dE(fE(i.auth_time)),issuedAtTime:dE(fE(i.iat)),expirationTime:dE(fE(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ar(e);await vE(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(q_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _E(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){q_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await mE(this,async function(e,t){return tE(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;q_(v&&E,e,"internal-error");const S=wE.fromJSON(this.name,E);q_("string"===typeof v,e,"internal-error"),bE(u,e.name),bE(h,e.name),q_("boolean"===typeof w,e,"internal-error"),q_("boolean"===typeof b,e,"internal-error"),bE(d,e.name),bE(f,e.name),bE(p,e.name),bE(m,e.name),bE(g,e.name),bE(y,e.name);const I=new _E({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wE;r.updateFromServerResponse(t);const i=new _E({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vE(i),i}}const EE=new Map;function SE(e){K_(e instanceof Function,"Expected a class definition");let t=EE.get(e);return t?(K_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,EE.set(e,t),t)}class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IE.type="NONE";const TE=IE;function kE(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class xE{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kE(this.userKey,r.apiKey,i),this.fullPersistenceKey=kE("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_E._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new xE(SE(TE),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||SE(TE);const s=kE(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=_E._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new xE(i,e,n)):new xE(i,e,n)}}function CE(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(NE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(PE(t))return"Blackberry";if(LE(t))return"Webos";if(AE(t))return"Safari";if((t.includes("chrome/")||OE(t))&&!t.includes("edge/"))return"Chrome";if(RE(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function NE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/firefox\//i.test(e)}function AE(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/crios\//i.test(e)}function DE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/iemobile/i.test(e)}function RE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/android/i.test(e)}function PE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/blackberry/i.test(e)}function LE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/webos/i.test(e)}function FE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ME(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return FE(e)||RE(e)||LE(e)||PE(e)||/windows phone/i.test(e)||DE(e)}function jE(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=CE(dr());break;case"Worker":t="".concat(CE(dr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_i,"/").concat(r)}class UE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class VE{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zE{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qE(this),this.idTokenSubscription=new qE(this),this.beforeStateQueue=new UE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=SE(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await xE.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return q_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vE(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ar(e):null;return t&&q_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&q_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(SE(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return tE(e,"GET","/v2/passwordPolicy",eE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new VE(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return tE(e,"POST","/v2/accounts:revokeToken",eE(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&SE(e)||this._popupRedirectResolver;q_(t,this,"argument-error"),this.redirectPersistenceManager=await xE.create(this,[SE(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(q_(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q_(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(F_.logLevel<=Fr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];F_.warn("Auth (".concat(_i,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function BE(e){return Ar(e)}class qE{constructor(e){this.auth=e,this.observer=null,this.addObserver=xr((e=>this.observer=e))}get next(){return q_(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function WE(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=U_("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function KE(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class HE{constructor(e){this.type="recaptcha-enterprise",this.auth=BE(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;cE(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{hE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new uE(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&cE(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));WE("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function GE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new HE(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function QE(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await GE(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await GE(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function $E(e,t,n){const r=BE(e);q_(r._canInitEmulator,r,"emulator-config-failed"),q_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=YE(t),{host:o,port:a}=function(e){const t=YE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:JE(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:JE(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function YE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function JE(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class XE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return W_("not implemented")}_getIdTokenResponse(e){return W_("not implemented")}_linkToIdToken(e,t){return W_("not implemented")}_getReauthenticationResolver(e){return W_("not implemented")}}async function ZE(e,t){return tE(e,"POST","/v1/accounts:resetPassword",eE(e,t))}async function eS(e,t){return tE(e,"POST","/v1/accounts:signUp",t)}async function tS(e,t){return rE(e,"POST","/v1/accounts:signInWithPassword",eE(e,t))}async function nS(e,t){return tE(e,"POST","/v1/accounts:sendOobCode",eE(e,t))}async function rS(e,t){return nS(e,t)}async function iS(e,t){return nS(e,t)}class sS extends XE{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new sS(e,t,"password")}static _fromEmailAndCode(e,t){return new sS(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return QE(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tS);case"emailLink":return async function(e,t){return rE(e,"POST","/v1/accounts:signInWithEmailLink",eE(e,t))}(e,{email:this._email,oobCode:this._password});default:j_(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return QE(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eS);case"emailLink":return async function(e,t){return rE(e,"POST","/v1/accounts:signInWithEmailLink",eE(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:j_(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function oS(e,t){return rE(e,"POST","/v1/accounts:signInWithIdp",eE(e,t))}class aS extends XE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new aS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):j_("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=I_(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new aS(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return oS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,oS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oS(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ir(t)}return e}}const lS={USER_NOT_FOUND:"user-not-found"};class cS extends XE{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rE(e,"POST","/v1/accounts:signInWithPhoneNumber",eE(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await rE(e,"POST","/v1/accounts:signInWithPhoneNumber",eE(e,t));if(n.temporaryProof)throw aE(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rE(e,"POST","/v1/accounts:signInWithPhoneNumber",eE(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),lS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new cS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class uS{constructor(e){var t,n,r,i,s,o;const a=Tr(kr(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);q_(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Tr(kr(e)).link,n=t?Tr(kr(t)).deep_link_id:null,r=Tr(kr(e)).deep_link_id;return(r?Tr(kr(r)).link:null)||r||n||t||e}(e);try{return new uS(t)}catch(n){return null}}}class hS{constructor(){this.providerId=hS.PROVIDER_ID}static credential(e,t){return sS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=uS.parseLink(t);return q_(n,"argument-error"),sS._fromEmailAndCode(e,n.code,n.tenantId)}}hS.PROVIDER_ID="password",hS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fS extends dS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pS extends fS{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return q_("providerId"in t&&"signInMethod"in t,"argument-error"),aS._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q_(e.idToken||e.accessToken,"argument-error"),aS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return pS.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pS.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new pS(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class mS extends fS{constructor(){super("facebook.com")}static credential(e){return aS._fromParams({providerId:mS.PROVIDER_ID,signInMethod:mS.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mS.credentialFromTaggedObject(e)}static credentialFromError(e){return mS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mS.credential(t.oauthAccessToken)}catch(n){return null}}}mS.FACEBOOK_SIGN_IN_METHOD="facebook.com",mS.PROVIDER_ID="facebook.com";class gS extends fS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return aS._fromParams({providerId:gS.PROVIDER_ID,signInMethod:gS.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gS.credentialFromTaggedObject(e)}static credentialFromError(e){return gS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gS.credential(n,r)}catch(i){return null}}}gS.GOOGLE_SIGN_IN_METHOD="google.com",gS.PROVIDER_ID="google.com";class yS extends fS{constructor(){super("github.com")}static credential(e){return aS._fromParams({providerId:yS.PROVIDER_ID,signInMethod:yS.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yS.credentialFromTaggedObject(e)}static credentialFromError(e){return yS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yS.credential(t.oauthAccessToken)}catch(n){return null}}}yS.GITHUB_SIGN_IN_METHOD="github.com",yS.PROVIDER_ID="github.com";class vS extends XE{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return oS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,oS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oS(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new vS(n,i):null}static _create(e,t){return new vS(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wS extends dS{constructor(e){q_(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return wS.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wS.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vS.fromJSON(e);return q_(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return vS._create(r,n)}catch(i){return null}}}class bS extends fS{constructor(){super("twitter.com")}static credential(e,t){return aS._fromParams({providerId:bS.PROVIDER_ID,signInMethod:bS.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bS.credentialFromTaggedObject(e)}static credentialFromError(e){return bS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return bS.credential(n,r)}catch(i){return null}}}async function _S(e,t){return rE(e,"POST","/v1/accounts:signUp",eE(e,t))}bS.TWITTER_SIGN_IN_METHOD="twitter.com",bS.PROVIDER_ID="twitter.com";class ES{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _E._fromIdTokenResponse(e,n,r),s=SS(n);return new ES({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=SS(n);return new ES({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function SS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class IS extends vr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,IS.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new IS(e,t,n,r)}}function TS(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw IS._fromErrorAndOperation(e,n,t,r);throw n}))}function kS(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function xS(e,t){const n=Ar(e);await NS(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return tE(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=kS(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function CS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await mE(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ES._forOperation(e,"link",r)}async function NS(e,t,n){await vE(t);const r=!1===e?"provider-already-linked":"no-such-provider";q_(kS(t.providerData).has(n)===e,t.auth,r)}async function AS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await mE(e,TS(r,i,t,e),n);q_(s.idToken,r,"internal-error");const o=pE(s.idToken);q_(o,r,"internal-error");const{sub:a}=o;return q_(e.uid===a,r,"user-mismatch"),ES._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&j_(r,"user-mismatch"),s}}async function OS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await TS(e,r,t),s=await ES._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function DS(e,t){return OS(BE(e),t)}async function RS(e,t){const n=Ar(e);return await NS(!1,n,t.providerId),CS(n,t)}async function PS(e,t){return AS(Ar(e),t)}async function LS(e,t){const n=BE(e),r=await async function(e,t){return rE(e,"POST","/v1/accounts:signInWithCustomToken",eE(e,t))}(n,{token:t,returnSecureToken:!0}),i=await ES._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class FS{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?MS._fromServerResponse(e,t):"totpInfo"in t?jS._fromServerResponse(e,t):j_(e,"internal-error")}}class MS extends FS{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new MS(t)}}class jS extends FS{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new jS(t)}}function US(e,t,n){var r;q_((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),q_("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q_(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(q_(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function VS(e){const t=BE(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zS(e,t){await async function(e,t){return tE(e,"POST","/v1/accounts:update",eE(e,t))}(Ar(e),{oobCode:t})}async function BS(e,t){const n=Ar(e),r=await ZE(n,{oobCode:t}),i=r.requestType;switch(q_(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q_(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q_(r.mfaInfo,n,"internal-error");default:q_(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=FS._fromServerResponse(BE(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function qS(e,t){const n={identifier:t,continueUri:G_()?H_():"http://localhost"},{signinMethods:r}=await async function(e,t){return tE(e,"POST","/v1/accounts:createAuthUri",eE(e,t))}(Ar(e),n);return r||[]}async function WS(e,t){const n=Ar(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&US(n.auth,r,t);const{email:i}=await async function(e,t){return nS(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function KS(e,t,n){const r=Ar(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&US(r.auth,i,n);const{email:s}=await async function(e,t){return nS(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function HS(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Ar(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await mE(i,async function(e,t){return tE(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function GS(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await mE(e,async function(e,t){return tE(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class QS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class $S extends QS{constructor(e,t,n,r){super(e,t,n),this.username=r}}class YS extends QS{constructor(e,t){super(e,"facebook.com",t)}}class JS extends $S{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class XS extends QS{constructor(e,t){super(e,"google.com",t)}}class ZS extends $S{constructor(e,t,n){super(e,"twitter.com",t,n)}}function eI(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=pE(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new QS(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new YS(s,i);case"github.com":return new JS(s,i);case"google.com":return new XS(s,i);case"twitter.com":return new ZS(s,i,e.screenName||null);case"custom":case"anonymous":return new QS(s,null);default:return new QS(s,r,i)}}(n)}class tI{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new tI("enroll",e,t)}static _fromMfaPendingCredential(e){return new tI("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return tI._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return tI._fromIdtoken(e.multiFactorSession.idToken)}return null}}class nI{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=BE(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>FS._fromServerResponse(n,e)));q_(r.mfaPendingCredential,n,"internal-error");const s=tI._fromMfaPendingCredential(r.mfaPendingCredential);return new nI(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await ES._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return q_(t.user,n,"internal-error"),ES._forOperation(t.user,t.operationType,o);default:j_(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class rI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>FS._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new rI(e)}async getSession(){return tI._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await mE(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await mE(this.user,function(e,t){return tE(e,"POST","/v2/accounts/mfaEnrollment:withdraw",eE(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const iI=new WeakMap;const sI="__sak";class oI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sI,"1"),this.storage.removeItem(sI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class aI extends oI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=dr();return AE(e)||FE(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ME(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);gr()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aI.type="LOCAL";const lI=aI;class cI extends oI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cI.type="SESSION";const uI=cI;class hI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new hI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function dI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hI.receivers=[];class fI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=dI("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function pI(){return window}function mI(){return"undefined"!==typeof pI().WorkerGlobalScope&&"function"===typeof pI().importScripts}const gI="firebaseLocalStorageDb",yI="firebaseLocalStorage",vI="fbase_key";class wI{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function bI(e,t){return e.transaction([yI],t?"readwrite":"readonly").objectStore(yI)}function _I(){const e=indexedDB.open(gI,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(yI,{keyPath:vI})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(yI)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(gI);return new wI(e).toPromise()}(),t(await _I()))}))}))}async function EI(e,t,n){const r=bI(e,!0).put({[vI]:t,value:n});return new wI(r).toPromise()}function SI(e,t){const n=bI(e,!0).delete(t);return new wI(n).toPromise()}class II{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await _I()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hI._getInstance(mI()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new fI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _I();return await EI(e,sI,"1"),await SI(e,sI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>EI(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=bI(e,!1).get(t),r=await new wI(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>SI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=bI(e,!1).getAll();return new wI(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}II.type="LOCAL";const TI=II;const kI=1e12;class xI{constructor(e){this.auth=e,this.counter=kI,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new CI(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||kI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||kI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||kI;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class CI{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;q_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const NI=KE("rcb"),AI=new $_(3e4,6e4);class OI{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=pI().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return q_(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&lE(pI().grecaptcha)?Promise.resolve(pI().grecaptcha):new Promise(((n,r)=>{const i=pI().setTimeout((()=>{r(U_(e,"network-request-failed"))}),AI.get());pI()[NI]=()=>{pI().clearTimeout(i),delete pI()[NI];const s=pI().grecaptcha;if(!s||!lE(s))return void r(U_(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};WE("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ir({onload:NI,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(U_(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=pI().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class DI{async load(e){return new xI(e)}clearedOneInstance(){}}const RI="recaptcha",PI={theme:"light",type:"image"};class LI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},PI);this.parameters=n,this.type=RI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=BE(e),this.isInvisible="invisible"===this.parameters.size,q_("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;q_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new DI:new OI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){q_(!this.parameters.sitekey,this.auth,"argument-error"),q_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q_("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=pI()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){q_(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q_(G_()&&!mI(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await tE(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);q_(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q_(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class FI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=cS._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function MI(e,t,n){var r;const i=await n.verify();try{let s;if(q_("string"===typeof i,e,"argument-error"),q_(n.type===RI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){q_("enroll"===t.type,e,"internal-error");const n=await function(e,t){return tE(e,"POST","/v2/accounts/mfaEnrollment:start",eE(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{q_("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;q_(n,e,"missing-multi-factor-info");const o=await function(e,t){return tE(e,"POST","/v2/accounts/mfaSignIn:start",eE(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return tE(e,"POST","/v1/accounts:sendVerificationCode",eE(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class jI{constructor(e){this.providerId=jI.PROVIDER_ID,this.auth=BE(e)}verifyPhoneNumber(e,t){return MI(this.auth,e,Ar(t))}static credential(e,t){return cS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return jI.credentialFromTaggedObject(t)}static credentialFromError(e){return jI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?cS._fromTokenResponse(n,r):null}}function UI(e,t){return t?SE(t):(q_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jI.PROVIDER_ID="phone",jI.PHONE_SIGN_IN_METHOD="phone";class VI extends XE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oS(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zI(e){return OS(e.auth,new VI(e),e.bypassAuthState)}function BI(e){const{auth:t,user:n}=e;return q_(n,t,"internal-error"),AS(n,new VI(e),e.bypassAuthState)}async function qI(e){const{auth:t,user:n}=e;return q_(n,t,"internal-error"),CS(n,new VI(e),e.bypassAuthState)}class WI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zI;case"linkViaPopup":case"linkViaRedirect":return qI;case"reauthViaPopup":case"reauthViaRedirect":return BI;default:j_(this.auth,"internal-error")}}resolve(e){K_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){K_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const KI=new $_(2e3,1e4);class HI extends WI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,HI.currentPopupAction&&HI.currentPopupAction.cancel(),HI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q_(e,this.auth,"internal-error"),e}async onExecution(){K_(1===this.filter.length,"Popup operations only handle one event");const e=dI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(U_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(U_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,HI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(U_(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,KI.get())};e()}}HI.currentPopupAction=null;const GI="pendingRedirect",QI=new Map;class $I extends WI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=QI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ZI(t),r=XI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}QI.set(this.auth._key(),e)}return this.bypassAuthState||QI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function YI(e,t){return XI(e)._set(ZI(t),"true")}function JI(e,t){QI.set(e._key(),t)}function XI(e){return SE(e._redirectPersistence)}function ZI(e){return kE(GI,e.config.apiKey,e.name)}function eT(e,t,n){return async function(e,t,n){const r=BE(e);z_(e,t,dS),await r._initializationPromise;const i=UI(r,n);return await YI(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function tT(e,t,n){return async function(e,t,n){const r=Ar(e);z_(r.auth,t,dS),await r.auth._initializationPromise;const i=UI(r.auth,n);await YI(i,r.auth);const s=await iT(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function nT(e,t,n){return async function(e,t,n){const r=Ar(e);z_(r.auth,t,dS),await r.auth._initializationPromise;const i=UI(r.auth,n);await NS(!1,r,t.providerId),await YI(i,r.auth);const s=await iT(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function rT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=BE(e),i=UI(r,t),s=new $I(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function iT(e){const t=dI("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class sT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aT(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!aT(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(U_(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oT(e))}saveEventToCache(e){this.cachedEventUids.add(oT(e)),this.lastProcessedEventTime=Date.now()}}function oT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function aT(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function lT(e){return tE(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const cT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uT=/^https?/;function hT(e){const t=H_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!uT.test(n))return!1;if(cT.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dT=new $_(3e4,6e4);function fT(){const e=pI().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let pT=null;function mT(e){return pT=pT||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){fT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fT(),n(U_(e,"network-request-failed"))},timeout:dT.get()})}if(null===(i=null===(r=pI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=pI().gapi)||void 0===s?void 0:s.load)){const t=KE("iframefcb");return pI()[t]=()=>{gapi.load?o():n(U_(e,"network-request-failed"))},WE("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw pT=null,e}))}(e),pT}const gT=new $_(5e3,15e3),yT="__/auth/iframe",vT="emulator/auth/iframe",wT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _T(e){const t=e.config;q_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Y_(t,vT):"https://".concat(e.config.authDomain,"/").concat(yT),r={apiKey:t.apiKey,appName:e.name,v:_i},i=bT.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ir(r).slice(1))}const ET={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ST{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function IT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ET),{width:r.toString(),height:i.toString(),top:s,left:o}),c=dr().toLowerCase();n&&(a=OE(c)?"_blank":n),NE(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return FE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ST(null);const h=window.open(t||"",a,u);q_(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ST(h)}const TT="__/auth/handler",kT="emulator/auth/handler",xT=encodeURIComponent("fac");async function CT(e,t,n,r,i,s){q_(e.config.authDomain,e,"auth-domain-config-required"),q_(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_i,eventId:i};if(t instanceof dS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof fS){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(xT,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(TT);return Y_(t,kT)}(e),"?").concat(Ir(a).slice(1)).concat(c)}const NT="webStorageSupport";const AT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=rT,this._overrideRedirectResult=JI}async _openPopup(e,t,n,r){var i;K_(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return IT(e,await CT(e,t,n,H_(),r),dI())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){pI().location.href=e}(await CT(e,t,n,H_(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(K_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await mT(e),n=pI().gapi;return q_(n,e,"internal-error"),t.open({where:document.body,url:_T(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wT,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=U_(e,"network-request-failed"),s=pI().setTimeout((()=>{r(i)}),gT.get());function o(){pI().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new sT(e);return t.register("authEvent",(t=>{q_(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(NT,{type:NT},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[NT];void 0!==i&&t(!!i),j_(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await lT(e);for(const r of t)try{if(hT(r))return}catch(n){}j_(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ME()||AE()||FE()}};class OT{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return W_("unexpected MultiFactorSessionType")}}}class DT extends OT{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new DT(e)}_finalizeEnroll(e,t,n){return function(e,t){return tE(e,"POST","/v2/accounts/mfaEnrollment:finalize",eE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return tE(e,"POST","/v2/accounts/mfaSignIn:finalize",eE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class RT{constructor(){}static assertion(e){return DT._fromCredential(e)}}RT.FACTOR_ID="phone";var PT="@firebase/auth",LT="1.5.1";class FT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){q_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=cr())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var MT;function jT(){return window}MT="Browser",mi(new Or("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q_(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:MT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(MT)},c=new zE(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(SE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),mi(new Or("auth-internal",(e=>(e=>new FT(e))(BE(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ki(PT,LT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(MT)),ki(PT,LT,"esm2017");async function UT(e,t,n){var r;const{BuildInfo:i}=jT();K_(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(K_(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return FE()?o.ibi=i.packageName:RE()?o.apn=i.packageName:j_(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,CT(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function VT(e){const{cordova:t}=jT();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const zT=20;class BT extends sT{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function qT(e){const t=await HT()._get(GT(e));return t&&await HT()._remove(GT(e)),t}function WT(e,t){var n,r;const i=function(e){const t=QT(e),n=t.link?decodeURIComponent(t.link):void 0,r=QT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return QT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=QT(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?U_(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function KT(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<zT;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function HT(){return SE(lI)}function GT(e){return kE("authEvent",e.config.apiKey,e.name)}function QT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Tr(n.join("?"))}const $T=class{constructor(){this._redirectPersistence=uI,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rT,this._overrideRedirectResult=JI}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new BT(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){j_(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=jT();q_("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q_("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q_("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q_("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q_("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),QI.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:KT(),postBody:null,tenantId:e.tenantId,error:U_(e,"no-auth-event")}}(e,n,r);await function(e,t){return HT()._set(GT(e),t)}(e,s);const o=await UT(e,s,t);return async function(e,t,n){const{cordova:r}=jT();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(U_(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),RE()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await VT(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=jT(),n={};FE()?n.iosBundleId=t.packageName:RE()?n.androidPackageName=t.packageName:j_(e,"operation-not-supported-in-this-environment"),await lT(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=jT(),s=setTimeout((async()=>{await qT(e),t.onEvent(YT())}),500),o=async n=>{clearTimeout(s);const r=await qT(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=WT(r,n.url)),t.onEvent(i||YT())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");jT().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function YT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:U_("no-auth-event")}}function JT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function XT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return!("file:"!==JT()&&"ionic:"!==JT()&&"capacitor:"!==JT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ZT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return gr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/Edge\/\d+/.test(e)}(e)}function ek(){try{const e=self.localStorage,t=dI();if(e)return e.setItem(t,"1"),e.removeItem(t),!ZT()||yr()}catch(e){return tk()&&yr()}return!1}function tk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function nk(){return("http:"===JT()||"https:"===JT()||pr()||XT())&&!(mr()||fr())&&ek()&&!tk()}function rk(){return XT()&&"undefined"!==typeof document}const ik={LOCAL:"local",NONE:"none",SESSION:"session"},sk=q_,ok="persistence";async function ak(e){await e._initializationPromise;const t=lk(),n=kE(ok,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function lk(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const ck=q_;class uk{constructor(){this.browserResolver=SE(AT),this.cordovaResolver=SE($T),this.underlyingResolver=null,this._redirectPersistence=uI,this._completeRedirectFn=rT,this._overrideRedirectResult=JI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ck(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!rk()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function hk(e){return e.unwrap()}function dk(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new gk(e,function(e,t){var n;const r=Ar(e),i=t;return q_(t.customData.operationType,r,"argument-error"),q_(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),nI._fromError(r,i)}(e,t))}else if(r){const e=fk(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function fk(e){const{_tokenResponse:t}=e instanceof vr?e.customData:e;if(!t)return null;if(!(e instanceof vr)&&"temporaryProof"in t&&"phoneNumber"in t)return jI.credentialFromResult(e);const n=t.providerId;if(!n||n===T_.PASSWORD)return null;let r;switch(n){case T_.GOOGLE:r=gS;break;case T_.FACEBOOK:r=mS;break;case T_.GITHUB:r=yS;break;case T_.TWITTER:r=bS;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?vS._create(n,o):aS._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new pS(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof vr?r.credentialFromError(e):r.credentialFromResult(e)}function pk(e,t){return t.catch((t=>{throw t instanceof vr&&dk(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,fk(r)),additionalUserInfo:eI(e),user:yk.getOrCreate(n)};var r}))}async function mk(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>pk(e,n.confirm(t))}}class gk{constructor(e,t){this.resolver=t,this.auth=function(e){return e.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return pk(hk(this.auth),this.resolver.resolveSignIn(e))}}class yk{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ar(e);return iI.has(t)||iI.set(t,rI._fromUser(t)),iI.get(t)}(e)}static getOrCreate(e){return yk.USER_MAP.has(e)||yk.USER_MAP.set(e,new yk(e)),yk.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return pk(this.auth,RS(this._delegate,e))}async linkWithPhoneNumber(e,t){return mk(this.auth,async function(e,t,n){const r=Ar(e);await NS(!1,r,"phone");const i=await MI(r.auth,t,Ar(n));return new FI(i,(e=>RS(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return pk(this.auth,async function(e,t,n){const r=Ar(e);z_(r.auth,t,dS);const i=UI(r.auth,n);return new HI(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,uk))}async linkWithRedirect(e){return await ak(BE(this.auth)),nT(this._delegate,e,uk)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return pk(this.auth,PS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return mk(this.auth,async function(e,t,n){const r=Ar(e),i=await MI(r.auth,t,Ar(n));return new FI(i,(e=>PS(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return pk(this.auth,async function(e,t,n){const r=Ar(e);z_(r.auth,t,dS);const i=UI(r.auth,n);return new HI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,uk))}async reauthenticateWithRedirect(e){return await ak(BE(this.auth)),tT(this._delegate,e,uk)}sendEmailVerification(e){return WS(this._delegate,e)}async unlink(e){return await xS(this._delegate,e),this}updateEmail(e){return function(e,t){return GS(Ar(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return GS(Ar(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await CS(Ar(e),t)}(this._delegate,e)}updateProfile(e){return HS(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return KS(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yk.USER_MAP=new WeakMap;const vk=q_;class wk{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;vk(n,"invalid-api-key",{appName:e.name}),vk(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?uk:void 0;this._delegate=t.initialize({options:{persistence:_k(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(R_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yk.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){$E(this._delegate,e,t)}applyActionCode(e){return zS(this._delegate,e)}checkActionCode(e){return BS(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ZE(Ar(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VS(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return pk(this._delegate,async function(e,t,n){const r=BE(e),i=QE(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_S),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VS(e),t})),o=await ES._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return qS(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=uS.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){vk(nk(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await BE(e)._initializationPromise,rT(e,t,!1)}(this._delegate,uk);return e?pk(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){BE(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=bk(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=bk(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=BE(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){q_(t.handleCodeInApp,r,"argument-error"),t&&US(r,e,t)}(i,n),await QE(r,i,"getOobCode",iS)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=BE(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&US(r,i,n),await QE(r,i,"getOobCode",rS)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){sk(Object.values(ik).includes(t),e,"invalid-persistence-type"),mr()?sk(t!==ik.SESSION,e,"unsupported-persistence-type"):fr()?sk(t===ik.NONE,e,"unsupported-persistence-type"):tk()?sk(t===ik.NONE||t===ik.LOCAL&&yr(),e,"unsupported-persistence-type"):sk(t===ik.NONE||ek(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ik.SESSION:t=uI;break;case ik.LOCAL:t=await SE(TI)._isAvailable()?TI:lI;break;case ik.NONE:t=TE;break;default:return j_("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return pk(this._delegate,async function(e){var t;const n=BE(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ES({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await _S(n,{returnSecureToken:!0}),i=await ES._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return pk(this._delegate,DS(this._delegate,e))}signInWithCustomToken(e){return pk(this._delegate,LS(this._delegate,e))}signInWithEmailAndPassword(e,t){return pk(this._delegate,function(e,t,n){return DS(Ar(e),hS.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VS(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return pk(this._delegate,async function(e,t,n){const r=Ar(e),i=hS.credentialWithLink(t,n||H_());return q_(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),DS(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return mk(this._delegate,async function(e,t,n){const r=BE(e),i=await MI(r,t,Ar(n));return new FI(i,(e=>DS(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return vk(nk(),this._delegate,"operation-not-supported-in-this-environment"),pk(this._delegate,async function(e,t,n){const r=BE(e);z_(e,t,dS);const i=UI(r,n);return new HI(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,uk))}async signInWithRedirect(e){return vk(nk(),this._delegate,"operation-not-supported-in-this-environment"),await ak(this._delegate),eT(this._delegate,e,uk)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await BS(Ar(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function bk(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&yk.getOrCreate(e)),error:t,complete:n}}function _k(e,t){const n=function(e,t){const n=lk();if(!n)return[];const r=kE(ok,e,t);switch(n.getItem(r)){case ik.NONE:return[TE];case ik.LOCAL:return[TI,uI];case ik.SESSION:return[uI];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(TI)||n.push(TI),"undefined"!==typeof window)for(const r of[lI,uI])n.includes(r)||n.push(r);return n.includes(TE)||n.push(TE),n}wk.Persistence=ik;class Ek{constructor(){this.providerId="phone",this._delegate=new jI(hk(Ki.auth()))}static credential(e,t){return jI.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Ek.PHONE_SIGN_IN_METHOD=jI.PHONE_SIGN_IN_METHOD,Ek.PROVIDER_ID=jI.PROVIDER_ID;const Sk=q_;class Ik{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ki.app();var r;Sk(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new LI(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Or("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new wk(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k_,PASSWORD_RESET:x_,RECOVER_EMAIL:C_,REVERT_SECOND_FACTOR_ADDITION:N_,VERIFY_AND_CHANGE_EMAIL:A_,VERIFY_EMAIL:O_}},EmailAuthProvider:hS,FacebookAuthProvider:mS,GithubAuthProvider:yS,GoogleAuthProvider:gS,OAuthProvider:pS,SAMLAuthProvider:wS,PhoneAuthProvider:Ek,PhoneMultiFactorGenerator:RT,RecaptchaVerifier:Ik,TwitterAuthProvider:bS,Auth:wk,AuthCredential:XE,Error:vr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.1")}(Ki);Ki.initializeApp({apiKey:"AIzaSyCAyxxvWWciV7yehwZd-CWBoCAhFw7m72E",authDomain:"bookstore-d224f.firebaseapp.com",projectId:"bookstore-d224f",storageBucket:"bookstore-d224f.appspot.com",messagingSenderId:"746163960358",appId:"1:746163960358:web:b19c74a9ee1d90d31904e7"});const Tk=Ki.auth();Ki.firestore();var kk=n(184);const xk=function(){const e=Nn(),t=O(),n=_((e=>(console.log("navbar products:",e.shoppingCart.cartProducts),e.shoppingCart.cartProducts))),i=localStorage.getItem("cartProducts"),s=n.length>0?n:JSON.parse(i),[o,a]=(0,r.useState)(s);return(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(o))}),[o]),(0,kk.jsx)("div",{children:(0,kk.jsx)("nav",{class:"navbar bg-dark border-bottom border-body","data-bs-theme":"dark",children:(0,kk.jsxs)("div",{class:"container",children:[(0,kk.jsx)(Zn,{to:"/",class:"navbar-brand fw-bold fs-4",href:"#",children:"BOOKSTORE"}),(0,kk.jsxs)("div",{className:"buttons",children:[(0,kk.jsxs)(Zn,{to:"/shoppingCart",className:"btn btn-outline-light ms-2",children:[(0,kk.jsx)("i",{className:"fa fa-shopping-cart me-1"}),"Cart (",o.length,")"]}),(0,kk.jsxs)("button",{onClick:async()=>{try{await Tk.signOut(),t(Pt(!1)),e("/")}catch(n){console.error("Logout error:",n.message)}},className:"btn btn-outline-light ms-2",children:[(0,kk.jsx)("i",{className:"fa fa-sign-out me-1 "}),"Logout"]})]})]})})})};const Ck=function(){let e=Nn();const t=_((function(e){return e.bookstore.productDetails})),n=O();return(0,r.useEffect)((()=>{n(Ot())}),[]),(0,kk.jsx)("div",{className:"container",style:{marginTop:"40px"},children:(0,kk.jsx)("div",{className:"card-container",children:t.map((function(t){return(0,kk.jsxs)("div",{className:"card",onClick:n=>{n.target.closest(".card-link")||n.target.closest(".btn")||(console.log("event.target.classList",n.target.classList),e("/book-details/".concat(t.id)))},children:[(0,kk.jsx)("img",{src:t.image_url,className:"card-img-top",alt:"book"}),(0,kk.jsx)("div",{className:"card-body",children:(0,kk.jsx)("h5",{className:"card-title",children:t.title})}),(0,kk.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,kk.jsxs)("li",{className:"list-group-item",children:["Author: ",t.authors]}),(0,kk.jsxs)("li",{className:"list-group-item",children:["Price: Rs. ",t.num_pages]})]}),(0,kk.jsxs)("div",{className:"card-body",children:[(0,kk.jsx)("a",{href:"#",onClick:()=>(e=>{n(Rt(e))})(t),className:"card-link btn",children:"Add to Cart"}),(0,kk.jsx)("a",{href:"#",onClick:()=>e("/shoppingCart"),className:"card-link btn",children:"Go to Cart"})]})]},t.id)}))})})};const Nk=function(){let e=Nn();const t=_((e=>(console.log("navbar products:",e.shoppingCart.cartProducts),e.shoppingCart.cartProducts))),n=localStorage.getItem("cartProducts"),i=t.length>0?t:JSON.parse(n),[s,o]=(0,r.useState)(i);return(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(s))}),[s]),(0,kk.jsx)("div",{children:(0,kk.jsx)("nav",{class:"navbar bg-dark border-bottom border-body","data-bs-theme":"dark",children:(0,kk.jsxs)("div",{class:"container",children:[(0,kk.jsx)("a",{onClick:()=>{e("/")},class:"navbar-brand fw-bold fs-4",href:"#",children:"BOOKSTORE"}),(0,kk.jsxs)("div",{className:"buttons",children:[(0,kk.jsxs)(Zn,{to:"/shoppingCart",className:"btn btn-outline-light ms-2",children:[(0,kk.jsx)("i",{className:"fa fa-shopping-cart me-1"}),"Cart (",s.length,")"]}),(0,kk.jsxs)("a",{href:"",onClick:()=>{e("/login")},className:"btn btn-outline-light ms-2",children:[(0,kk.jsx)("i",{className:"fa fa-sign-in me-1"}),"Login"]}),(0,kk.jsxs)("a",{href:"",onClick:()=>{e("/signup")},className:"btn btn-outline-light ms-2",children:[(0,kk.jsx)("i",{className:"fa fa-user-plus me-1"}),"Sign Up"]})]})]})})})},Ak=()=>{const[e,t]=(0,r.useState)("All"),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)("");let a=_((e=>e.user));a&&console.log("user exists",a);let l=Nn();const c=_((function(e){return e.bookstore.productDetails})),[u,h]=(0,r.useState)([]),d=O();(0,r.useEffect)((()=>{d(Ot())}),[]);return(0,r.useEffect)((()=>{h(c.filter((t=>{const n=t.title.toLowerCase().includes(s.trim().toLowerCase()),r=t.genres.includes(e);return""!==s&&n?(console.log("title",t.title),!0):!!r&&(console.log("genre",e),!0)})))}),[s,e,c]),(0,r.useEffect)((()=>{console.log("filteredarray:",u)}),[u]),(0,kk.jsxs)("div",{children:[a?(0,kk.jsx)(xk,{}):(0,kk.jsx)(Nk,{}),(0,kk.jsxs)("div",{className:"main-card card text-bg-dark text-white border-0",children:[(0,kk.jsx)("img",{src:"/assets/bg.jpg",className:"card-img",alt:"background",height:"100%"}),(0,kk.jsx)("div",{className:"card-img-overlay d-flex flex-column justify-content-center align-items-center p-0",children:(0,kk.jsxs)("div",{className:"container",children:[(0,kk.jsx)("h2",{className:"card-title display-3 fw-bolder mb-4",children:"Find Your Book of Choice"}),(0,kk.jsxs)("div",{className:"input-group mb-3 mx-auto w-50",children:[(0,kk.jsx)("input",{onChange:e=>i(e.target.value),type:"text",className:"form-control",placeholder:"Search...","aria-label":"search","aria-describedby":"button-addon2"}),(0,kk.jsx)("button",{onClick:()=>{o(n),console.log("searchData:",s)},className:"btn btn-outline-secondary bg-dark text-white",type:"button",id:"button-addon2",children:"Search"})]})]})})]}),(0,kk.jsxs)("div",{className:"genre d-flex justify-content-center mb-5 pb-5",children:[(0,kk.jsx)("button",{onClick:()=>{t("All"),o("")},className:"btn btn-outline-dark me-2 ".concat("All"===e&&"active"),children:"All"}),(0,kk.jsx)("button",{onClick:()=>{t("Romance"),o("")},className:"btn btn-outline-dark me-2 ".concat("Romance"===e&&"active"),children:"Romance"}),(0,kk.jsx)("button",{onClick:()=>{t("Horror"),o("")},className:"btn btn-outline-dark me-2 ".concat("Horror"===e&&"active"),children:"Horror"}),(0,kk.jsx)("button",{onClick:()=>{t("Fantasy"),o("")},className:"btn btn-outline-dark me-2 ".concat("Fantasy"===e&&"active"),children:"Fantasy"}),(0,kk.jsx)("button",{onClick:()=>{t("Science Fiction"),o("")},className:"btn btn-outline-dark me-2 ".concat("Science Fiction"===e&&"active"),children:"Science Fiction"}),(0,kk.jsx)("button",{onClick:()=>{t("Historical"),o("")},className:"btn btn-outline-dark me-2 ".concat("Historical"===e&&"active"),children:"History"})]}),"All"===e&&0===u.length?(0,kk.jsx)(Ck,{}):(0,kk.jsx)("div",{className:"container",style:{marginTop:"40px"},children:(0,kk.jsx)("div",{className:"card-container",children:u.map((function(e){return(0,kk.jsxs)("div",{className:"card",children:[(0,kk.jsx)("div",{className:"img-title",children:(0,kk.jsx)("img",{src:e.image_url,className:"card-img-top",alt:"book"})}),(0,kk.jsxs)("div",{className:"card-body",children:[(0,kk.jsx)("h5",{className:"card-title",children:e.title}),(0,kk.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,kk.jsxs)("li",{className:"list-group-item",children:["Author: ",e.authors]}),(0,kk.jsxs)("li",{className:"list-group-item",children:["Price: Rs. ",e.num_pages]})]}),(0,kk.jsxs)("div",{className:"buttons d-flex justify-content-between",children:[(0,kk.jsx)("a",{href:"#",onClick:()=>(e=>t=>{console.log("Adding to cart:",e),t(Rt(e))})(e),className:"card-link btn",children:"Add to Cart"}),(0,kk.jsx)("a",{href:"#",onClick:()=>l("/shoppingCart"),className:"card-link btn",children:"Go to Cart"})]})]})]},e.id)}))})})]})};var Ok=n(418),Dk=n.n(Ok);const Rk=["as","disabled"];function Pk(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const Lk=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Rk);const[s,{tagName:o}]=Pk(Object.assign({tagName:n,disabled:r},i));return(0,kk.jsx)(o,Object.assign({},i,s,{ref:t}))}));Lk.displayName="Button";const Fk=["xxl","xl","lg","md","sm","xs"],Mk="xs",jk=r.createContext({prefixes:{},breakpoints:Fk,minBreakpoint:Mk}),{Consumer:Uk,Provider:Vk}=jk;function zk(e,t){const{prefixes:n}=(0,r.useContext)(jk);return e||n[t]||t}const Bk=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:l,...c}=e;const u=zk(r,"btn"),[h,{tagName:d}]=Pk({tagName:n,disabled:a,...c}),f=d;return(0,kk.jsx)(f,{...h,...c,ref:t,disabled:a,className:Dk()(l,u,o&&"active",i&&"".concat(u,"-").concat(i),s&&"".concat(u,"-").concat(s),c.href&&a&&"disabled")})}));Bk.displayName="Button";const qk=Bk,Wk=!("undefined"===typeof window||!window.document||!window.document.createElement);var Kk=!1,Hk=!1;try{var Gk={get passive(){return Kk=!0},get once(){return Hk=Kk=!0}};Wk&&(window.addEventListener("test",Gk,Gk),window.removeEventListener("test",Gk,!0))}catch(PN){}const Qk=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Hk){var i=r.once,s=r.capture,o=n;!Hk&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Kk?r:s)}e.addEventListener(t,n,r)};function $k(e){return e&&e.ownerDocument||document}const Yk=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Jk;function Xk(e){if((!Jk&&0!==Jk||e)&&Wk){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Jk=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Jk}const Zk=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function ex(e){const t=Zk(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const tx=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const nx=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=tx(e),r=tx(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};function rx(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}function ix(e,t){return function(e){var t=$k(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var sx=/([A-Z])/g;var ox=/^ms-/;function ax(e){return function(e){return e.replace(sx,"-$1").toLowerCase()}(e).replace(ox,"-ms-")}var lx=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const cx=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(ax(t))||ix(e).getPropertyValue(ax(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!lx.test(e))}(i)?n+=ax(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(ax(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const ux=function(e,t,n,r){return Qk(e,t,n,r),function(){Yk(e,t,n,r)}};function hx(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=ux(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function dx(e,t,n,r){null==n&&(n=function(e){var t=cx(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=hx(e,n,r),s=ux(e,"transitionend",t);return function(){i(),s()}}function fx(e){void 0===e&&(e=$k());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(PN){return e.body}}function px(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}const mx=(gx="modal-open","".concat("data-rr-ui-").concat(gx));var gx;const yx=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(cx(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(mx,""),cx(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(mx),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},vx=(0,r.createContext)(Wk?window:void 0);vx.Provider;function wx(){return(0,r.useContext)(vx)}const bx=(e,t)=>Wk?null==e?(t||$k()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const _x="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Ex="undefined"!==typeof document||_x?r.useLayoutEffect:r.useEffect;const Sx=function(e){let{children:t,in:n,onExited:i,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,r.useRef)(null),l=(0,r.useRef)(n),c=ex(i);(0,r.useEffect)((()=>{n?l.current=!0:c(a.current)}),[n,c]);const u=nx(a,t.ref),h=(0,r.cloneElement)(t,{ref:u});return n?h:o||!l.current&&s?null:h};function Ix(e){let{children:t,in:n,onExited:i,onEntered:s,transition:o}=e;const[a,l]=(0,r.useState)(!n);n&&a&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),s=(0,r.useRef)(!0),o=ex(n);return Ex((()=>{if(!i.current)return;let e=!1;return o({in:t,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,o]),Ex((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=nx(c,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:u})}function Tx(e,t,n){return e?(0,kk.jsx)(e,Object.assign({},n)):t?(0,kk.jsx)(Ix,Object.assign({},n,{transition:t})):(0,kk.jsx)(Sx,Object.assign({},n))}const kx=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let xx;function Cx(e){const t=wx(),n=e||function(e){return xx||(xx=new yx({ownerDocument:null==e?void 0:e.document})),xx}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const Nx=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:a,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:d,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:w=!0,restoreFocusOptions:b,renderDialog:_,renderBackdrop:E=(e=>(0,kk.jsx)("div",Object.assign({},e))),manager:S,container:I,onShow:T,onHide:k=(()=>{}),onExit:x,onExited:C,onExiting:N,onEnter:A,onEntering:O,onEntered:D}=e,R=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,kx);const P=wx(),L=function(e,t){const n=wx(),[i,s]=(0,r.useState)((()=>bx(e,null==n?void 0:n.document)));if(!i){const t=bx(e);t&&s(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=bx(e);t!==i&&s(t)}),[e,i]),i}(I),F=Cx(S),M=function(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),j=function(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}(n),[U,V]=(0,r.useState)(!n),z=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>F),[F]),Wk&&!j&&n&&(z.current=fx(null==P?void 0:P.document)),n&&U&&V(!1);const B=ex((()=>{if(F.add(),Q.current=ux(document,"keydown",H),G.current=ux(document,"focus",(()=>setTimeout(W)),!0),T&&T(),y){var e,t;const n=fx(null!=(e=null==(t=F.dialog)?void 0:t.ownerDocument)?e:null==P?void 0:P.document);F.dialog&&n&&!px(F.dialog,n)&&(z.current=n,F.dialog.focus())}})),q=ex((()=>{var e;(F.remove(),null==Q.current||Q.current(),null==G.current||G.current(),w)&&(null==(e=z.current)||null==e.focus||e.focus(b),z.current=null)}));(0,r.useEffect)((()=>{n&&L&&B()}),[n,L,B]),(0,r.useEffect)((()=>{U&&q()}),[U,q]),rx((()=>{q()}));const W=ex((()=>{if(!v||!M()||!F.isTopModal())return;const e=fx(null==P?void 0:P.document);F.dialog&&e&&!px(F.dialog,e)&&F.dialog.focus()})),K=ex((e=>{e.target===e.currentTarget&&(null==h||h(e),!0===c&&k())})),H=ex((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&F.isTopModal()&&(null==d||d(e),e.defaultPrevented||k())})),G=(0,r.useRef)(),Q=(0,r.useRef)();if(!L)return null;const $=Object.assign({role:i,ref:F.setDialogRef,"aria-modal":"dialog"===i||void 0},R,{style:a,className:o,tabIndex:-1});let Y=_?_($):(0,kk.jsx)("div",Object.assign({},$,{children:r.cloneElement(l,{role:"document"})}));Y=Tx(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:x,onExiting:N,onExited:function(){V(!0),null==C||C(...arguments)},onEnter:A,onEntering:O,onEntered:D,children:Y});let J=null;return c&&(J=E({ref:F.setBackdropRef,onClick:K}),J=Tx(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:J})),(0,kk.jsx)(kk.Fragment,{children:s.createPortal((0,kk.jsxs)(kk.Fragment,{children:[J,Y]}),L)})}));Nx.displayName="Modal";const Ax=Object.assign(Nx,{Manager:yx});var Ox=Function.prototype.bind.call(Function.prototype.call,[].slice);function Dx(e,t){return Ox(e.querySelectorAll(t))}function Rx(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Px=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Lx=".sticky-top",Fx=".navbar-toggler";class Mx extends yx{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,cx(t,{[e]:"".concat(parseFloat(cx(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],cx(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Dx(t,Px).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),Dx(t,Lx).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),Dx(t,Fx).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Rx(n.className,r):n.setAttribute("class",Rx(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Dx(t,Px).forEach((e=>this.restore(i,e))),Dx(t,Lx).forEach((e=>this.restore(s,e))),Dx(t,Fx).forEach((e=>this.restore(s,e)))}}let jx;function Ux(e,t){return Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ux(e,t)}const Vx=!1,zx=r.createContext(null);var Bx="unmounted",qx="exited",Wx="entering",Kx="entered",Hx="exiting",Gx=function(e){var t,n;function i(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=qx,r.appearStatus=Wx):i=Kx:i=t.unmountOnExit||t.mountOnEnter?Bx:qx,r.state={status:i},r.nextCallback=null,r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ux(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Bx?{status:qx}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Wx&&n!==Kx&&(t=Wx):n!==Wx&&n!==Kx||(t=Hx)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Wx){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===qx&&this.setState({status:Bx})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||Vx?this.safeSetState({status:Kx},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Wx},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:Kx},(function(){t.props.onEntered(o,a)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!Vx?(this.props.onExit(r),this.safeSetState({status:Hx},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:qx},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:qx},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===Bx)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(zx.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},i}(r.Component);function Qx(){}Gx.contextType=zx,Gx.propTypes={},Gx.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Qx,onEntering:Qx,onEntered:Qx,onExit:Qx,onExiting:Qx,onExited:Qx},Gx.UNMOUNTED=Bx,Gx.EXITED=qx,Gx.ENTERING=Wx,Gx.ENTERED=Kx,Gx.EXITING=Hx;const $x=Gx;function Yx(e,t){const n=cx(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Jx(e,t){const n=Yx(e,"transitionDuration"),r=Yx(e,"transitionDelay"),i=dx(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const Xx=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:a,onExiting:l,onExited:c,addEndListener:u,children:h,childRef:d,...f}=e;const p=(0,r.useRef)(null),m=nx(p,d),g=e=>{var t;m((t=e)&&"setState"in t?s.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&p.current&&e(p.current,t)},v=(0,r.useCallback)(y(n),[n]),w=(0,r.useCallback)(y(i),[i]),b=(0,r.useCallback)(y(o),[o]),_=(0,r.useCallback)(y(a),[a]),E=(0,r.useCallback)(y(l),[l]),S=(0,r.useCallback)(y(c),[c]),I=(0,r.useCallback)(y(u),[u]);return(0,kk.jsx)($x,{ref:t,...f,onEnter:v,onEntered:b,onEntering:w,onExit:_,onExited:S,onExiting:E,addEndListener:I,nodeRef:p,children:"function"===typeof h?(e,t)=>h(e,{...t,ref:g}):r.cloneElement(h,{ref:g})})})),Zx=Xx,eC={[Wx]:"show",[Kx]:"show"},tC=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:s={},onEnter:o,...a}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=(0,r.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,kk.jsx)(Zx,{ref:t,addEndListener:Jx,...l,onEnter:c,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:Dk()("fade",n,i.props.className,eC[e],s[e])})})}));tC.displayName="Fade";const nC=tC,rC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=zk(r,"modal-body"),(0,kk.jsx)(i,{ref:t,className:Dk()(n,r),...s})}));rC.displayName="ModalBody";const iC=rC,sC=r.createContext({onHide(){}}),oC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:l,scrollable:c,...u}=e;n=zk(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,kk.jsx)("div",{...u,ref:t,className:Dk()(h,r,o&&"".concat(n,"-").concat(o),s&&"".concat(h,"-centered"),c&&"".concat(h,"-scrollable"),a&&d),children:(0,kk.jsx)("div",{className:Dk()("".concat(n,"-content"),i),children:l})})}));oC.displayName="ModalDialog";const aC=oC,lC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=zk(r,"modal-footer"),(0,kk.jsx)(i,{ref:t,className:Dk()(n,r),...s})}));lC.displayName="ModalFooter";const cC=lC;var uC=n(7),hC=n.n(uC);const dC={"aria-label":hC().string,onClick:hC().func,variant:hC().oneOf(["white"])},fC=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,kk.jsx)("button",{ref:t,type:"button",className:Dk()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...s})}));fC.displayName="CloseButton",fC.propTypes=dC;const pC=fC,mC=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:a,...l}=e;const c=(0,r.useContext)(sC),u=ex((()=>{null==c||c.onHide(),null==o||o()}));return(0,kk.jsxs)("div",{ref:t,...l,children:[a,s&&(0,kk.jsx)(pC,{"aria-label":n,variant:i,onClick:u})]})})),gC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=zk(n,"modal-header"),(0,kk.jsx)(mC,{ref:t,...o,className:Dk()(r,n),closeLabel:i,closeButton:s})}));gC.displayName="ModalHeader";const yC=gC,vC=(wC="h4",r.forwardRef(((e,t)=>(0,kk.jsx)("div",{...e,ref:t,className:Dk()(e.className,wC)}))));var wC;const bC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=vC,...s}=e;return r=zk(r,"modal-title"),(0,kk.jsx)(i,{ref:t,className:Dk()(n,r),...s})}));bC.displayName="ModalTitle";const _C=bC;function EC(e){return(0,kk.jsx)(nC,{...e,timeout:null})}function SC(e){return(0,kk.jsx)(nC,{...e,timeout:null})}const IC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,style:s,dialogClassName:o,contentClassName:a,children:l,dialogAs:c=aC,"aria-labelledby":u,"aria-describedby":h,"aria-label":d,show:f=!1,animation:p=!0,backdrop:m=!0,keyboard:g=!0,onEscapeKeyDown:y,onShow:v,onHide:w,container:b,autoFocus:_=!0,enforceFocus:E=!0,restoreFocus:S=!0,restoreFocusOptions:I,onEntered:T,onExit:k,onExiting:x,onEnter:C,onEntering:N,onExited:A,backdropClassName:O,manager:D,...R}=e;const[P,L]=(0,r.useState)({}),[F,M]=(0,r.useState)(!1),j=(0,r.useRef)(!1),U=(0,r.useRef)(!1),V=(0,r.useRef)(null),[z,B]=(0,r.useState)(null),q=nx(t,B),W=ex(w),K=function(){const{dir:e}=(0,r.useContext)(jk);return"rtl"===e}();n=zk(n,"modal");const H=(0,r.useMemo)((()=>({onHide:W})),[W]);function G(){return D||function(e){return jx||(jx=new Mx(e)),jx}({isRTL:K})}function Q(e){if(!Wk)return;const t=G().getScrollbarWidth()>0,n=e.scrollHeight>$k(e).documentElement.clientHeight;L({paddingRight:t&&!n?Xk():void 0,paddingLeft:!t&&n?Xk():void 0})}const $=ex((()=>{z&&Q(z.dialog)}));rx((()=>{Yk(window,"resize",$),null==V.current||V.current()}));const Y=()=>{j.current=!0},J=e=>{j.current&&z&&e.target===z.dialog&&(U.current=!0),j.current=!1},X=()=>{M(!0),V.current=dx(z.dialog,(()=>{M(!1)}))},Z=e=>{"static"!==m?U.current||e.target!==e.currentTarget?U.current=!1:null==w||w():(e=>{e.target===e.currentTarget&&X()})(e)},ee=(0,r.useCallback)((e=>(0,kk.jsx)("div",{...e,className:Dk()("".concat(n,"-backdrop"),O,!p&&"show")})),[p,O,n]),te={...s,...P};te.display="block";return(0,kk.jsx)(sC.Provider,{value:H,children:(0,kk.jsx)(Ax,{show:f,ref:q,backdrop:m,container:b,keyboard:!0,autoFocus:_,enforceFocus:E,restoreFocus:S,restoreFocusOptions:I,onEscapeKeyDown:e=>{g?null==y||y(e):(e.preventDefault(),"static"===m&&X())},onShow:v,onHide:w,onEnter:(e,t)=>{e&&Q(e),null==C||C(e,t)},onEntering:(e,t)=>{null==N||N(e,t),Qk(window,"resize",$)},onEntered:T,onExit:e=>{null==V.current||V.current(),null==k||k(e)},onExiting:x,onExited:e=>{e&&(e.style.display=""),null==A||A(e),Yk(window,"resize",$)},manager:G(),transition:p?EC:void 0,backdropTransition:p?SC:void 0,renderBackdrop:ee,renderDialog:e=>(0,kk.jsx)("div",{role:"dialog",...e,style:te,className:Dk()(i,n,F&&"".concat(n,"-static"),!p&&"show"),onClick:m?Z:void 0,onMouseUp:J,"aria-label":d,"aria-labelledby":u,"aria-describedby":h,children:(0,kk.jsx)(c,{...R,onMouseDown:Y,className:o,contentClassName:a,children:l})})})})}));IC.displayName="Modal";const TC=Object.assign(IC,{Body:iC,Header:yC,Title:_C,Footer:cC,Dialog:aC,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),kC=()=>{const[e,t]=(0,r.useState)(!1),n=()=>t(!1);let i=Nn(),s=_((e=>e.user));const o={marginBottom:"0"};return(0,kk.jsxs)(kk.Fragment,{children:[(0,kk.jsx)(qk,{variant:"primary",onClick:function(){s?t(!0):(alert("You are not logged in"),i("/login"))},children:"Check Out"}),(0,kk.jsxs)(TC,{show:e,onHide:n,backdrop:"static",keyboard:!1,children:[(0,kk.jsx)(TC.Header,{closeButton:!0,children:(0,kk.jsx)(TC.Title,{children:"Add Details"})}),(0,kk.jsx)(TC.Body,{children:(0,kk.jsxs)("form",{className:"row g-3",onSubmit:e=>{e.preventDefault()},children:[(0,kk.jsxs)("div",{className:"col-md-6",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputName4",className:"form-label",children:"Name"}),(0,kk.jsx)("input",{type:"text",className:"form-control",id:"inputName4",required:!0})]}),(0,kk.jsxs)("div",{className:"col-md-6",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputnumber4",className:"form-label",children:"Contact Number"}),(0,kk.jsx)("input",{type:"number",className:"form-control",id:"inputnumber4",required:!0})]}),(0,kk.jsxs)("div",{className:"col-12",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputAddress",className:"form-label",children:"Address"}),(0,kk.jsx)("input",{type:"text",className:"form-control",id:"inputAddress",placeholder:"1234 Main St",required:!0})]}),(0,kk.jsxs)("div",{className:"col-12",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputAddress2",className:"form-label",children:"Address 2"}),(0,kk.jsx)("input",{type:"text",className:"form-control",id:"inputAddress2",placeholder:"Apartment, studio, or floor",required:!0})]}),(0,kk.jsxs)("div",{className:"col-md-6",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputCity",className:"form-label",children:"City"}),(0,kk.jsx)("input",{type:"text",className:"form-control",id:"inputCity",required:!0})]}),(0,kk.jsxs)("div",{className:"col-md-4",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputState",className:"form-label",children:"State"}),(0,kk.jsxs)("select",{id:"inputState",className:"form-select",required:!0,children:[(0,kk.jsx)("option",{selected:!0,children:"Choose..."}),(0,kk.jsx)("option",{children:"..."})]})]}),(0,kk.jsxs)("div",{className:"col-md-2",style:o,children:[(0,kk.jsx)("label",{htmlFor:"inputZip",className:"form-label",children:"Zip"}),(0,kk.jsx)("input",{type:"text",className:"form-control",id:"inputZip",required:!0})]})]})}),(0,kk.jsxs)(TC.Footer,{children:[(0,kk.jsx)(qk,{variant:"secondary",onClick:n,children:"Close"}),(0,kk.jsx)(qk,{variant:"primary",onClick:()=>{alert("Order Placed Successfully!"),i("/")},children:"Place Order"})]})]})]})},xC=()=>{const e=_((e=>e.shoppingCart.cartProducts));let t=_((e=>e.user));const n=O(),i=localStorage.getItem("cartProducts"),s=e.length>0?e:JSON.parse(i),[o,a]=(0,r.useState)(s),[l,c]=(0,r.useState)(0);(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(o)),h(o)}),[o]);const u=e=>{console.log("item",e);let t=[];t=1===e.qty?o.filter((t=>t.id!==e.id)):o.map((t=>t.id===e.id?{...t,qty:t.qty-1}:t)),n(function(e){return{type:"DELETE_PRODUCTS",payload:e}}(e)),a(t),h(t)},h=e=>{let t=0;e.forEach((e=>{t+=e.qty*e.num_pages})),c(t)};return(0,kk.jsxs)(kk.Fragment,{children:[t?(0,kk.jsx)(xk,{}):(0,kk.jsx)(Nk,{}),(0,kk.jsx)("h1",{children:"Shopping Cart"}),0===o.length&&(0,kk.jsx)("h2",{children:"Your cart is empty!"}),o.length>0&&(0,kk.jsxs)("table",{className:"cart-table",children:[(0,kk.jsx)("thead",{children:(0,kk.jsxs)("tr",{children:[(0,kk.jsx)("th",{children:"Image"}),(0,kk.jsx)("th",{children:"Title"}),(0,kk.jsx)("th",{children:"Quantity"}),(0,kk.jsx)("th",{children:"Price"}),(0,kk.jsx)("th",{children:"Actions"})]})}),(0,kk.jsxs)("tbody",{children:[o.map((e=>(0,kk.jsxs)("tr",{children:[(0,kk.jsx)("td",{children:(0,kk.jsx)("img",{src:e.image_url,alt:"book"})}),(0,kk.jsx)("td",{children:e.title}),(0,kk.jsxs)("td",{className:"qty-btn",children:[(0,kk.jsx)("button",{onClick:()=>(e=>{n(Rt(e));const t=o.find((t=>t.id===e.id));if(t){const t=o.map((t=>t.id===e.id?{...t,qty:t.qty+1}:t));a(t),h(t)}else{const t=[...o,{...e,qty:1}];a(t),h(t)}})(e),children:(0,kk.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})}),(0,kk.jsx)("span",{children:e.qty}),(0,kk.jsx)("button",{onClick:()=>u(e),children:(0,kk.jsx)("i",{className:"fa fa-minus","aria-hidden":"true"})})]}),(0,kk.jsxs)("td",{children:["\u20b9 ",e.qty*e.num_pages]}),(0,kk.jsx)("td",{children:(0,kk.jsx)("button",{onClick:()=>u(e),children:"Remove Item"})})]},e.id))),(0,kk.jsxs)("tr",{className:"totalcart",children:[(0,kk.jsx)("td",{colSpan:4,children:(0,kk.jsx)("b",{children:"Total Cart Value"})}),(0,kk.jsxs)("td",{children:["\u20b9 ",l]})]})]})]}),o.length>0&&(0,kk.jsx)(kC,{})]})};var CC=n(758),NC=n(564),AC=n(514),OC=n.n(AC);const DC=Object.prototype.toString,RC=Error.prototype.toString,PC=RegExp.prototype.toString,LC="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",FC=/^Symbol\((.*)\)(.*)$/;function MC(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return LC.call(e).replace(FC,"Symbol($1)");const r=DC.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+RC.call(e)+"]":"RegExp"===r?PC.call(e):null}function jC(e,t){let n=MC(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=MC(this[e],t);return null!==r?r:n}),2)}function UC(e){return null==e?[]:[].concat(e)}let VC,zC=/\$\{\s*(\w+)\s*\}/g;VC=Symbol.toStringTag;class BC extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(zC,((e,n)=>jC(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,i){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this[VC]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],UC(e).forEach((e=>{if(BC.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)})),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0],!i&&Error.captureStackTrace&&Error.captureStackTrace(this,BC)}}let qC={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:i}=e;const s=null!=i&&i!==r?" (cast from the value `".concat(jC(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(jC(r,!0),"`")+s:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(jC(r,!0),"`")+s}},WC={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},KC={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},HC={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},GC={isValue:"${path} field must be ${value}"},QC={noUnknown:"${path} field has unspecified keys: ${unknown}"},$C={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},YC={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return"".concat(t," tuple value has too few items, expected a length of ").concat(i," but got ").concat(n.length," for value: `").concat(jC(n,!0),"`");if(n.length>i)return"".concat(t," tuple value has too many items, expected a length of ").concat(i," but got ").concat(n.length," for value: `").concat(jC(n,!0),"`")}return BC.formatError(qC.notType,e)}};Object.assign(Object.create(null),{mixed:qC,string:WC,number:KC,date:HC,object:QC,array:$C,boolean:GC,tuple:YC});const JC=e=>e&&e.__isYupSchema__;class XC{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,s="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every((e=>e===n))};return new XC(e,((e,t)=>{var n;let o=s(...e)?r:i;return null!=(n=null==o?void 0:o(t))?n:t}))}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!JC(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const ZC="$",eN=".";function tN(e,t){return new nN(e,t)}class nN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===ZC,this.isValue=this.key[0]===eN,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?ZC:this.isValue?eN:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,CC.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}nN.prototype.__isYupRef=!0;const rN=e=>null==e;function iN(e){function t(t,n,r){let{value:i,path:s="",options:o,originalValue:a,schema:l}=t;const{name:c,test:u,params:h,message:d,skipAbsent:f}=e;let{parent:p,context:m,abortEarly:g=l.spec.abortEarly,disableStackTrace:y=l.spec.disableStackTrace}=o;function v(e){return nN.isRef(e)?e.getValue(i,p,m):e}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=Object.assign({value:i,originalValue:a,label:l.spec.label,path:e.path||s,spec:l.spec},h,e.params);for(const i of Object.keys(n))n[i]=v(n[i]);const r=new BC(BC.formatError(e.message||d,n),i,n.path,e.type||c,null!=(t=e.disableStackTrace)?t:y);return r.params=n,r}const b=g?n:r;let _={path:s,parent:p,type:c,from:o.from,createError:w,resolve:v,options:o,originalValue:a,schema:l};const E=e=>{BC.isError(e)?b(e):e?r(null):b(w())},S=e=>{BC.isError(e)?b(e):n(e)};if(f&&rN(i))return E(!0);let I;try{var T;if(I=u.call(_,i,_),"function"===typeof(null==(T=I)?void 0:T.then)){if(o.sync)throw new Error('Validation test of type: "'.concat(_.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(I).then(E,S)}}catch(k){return void S(k)}E(I)}return t.OPTIONS=e,t}function sN(e,t,n){let r,i,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,CC.forEach)(t,((a,l,c)=>{let u=l?a.slice(1,a.length-1):a,h="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,d=c?parseInt(u,10):0;if(e.innerType||h){if(h&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(s,'" must contain an index to the tuple element, e.g. "').concat(s,'[0]"'));if(n&&d>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(a,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[d],e=h?e.spec.types[d]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(s,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[u],e=e.fields[u]}i=u,s=l?"["+a+"]":"."+a})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}class oN extends Set{describe(){const e=[];for(const t of this.values())e.push(nN.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new oN(this.values())}merge(e,t){const n=this.clone();return e.forEach((e=>n.add(e))),t.forEach((e=>n.delete(e))),n}}function aN(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(JC(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let r=0;r<e.length;r++)t[r]=aN(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[r,i]of e.entries())t.set(r,aN(i,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const r of e)t.add(aN(r,n))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(const[r,i]of Object.entries(e))t[r]=aN(i,n)}return t}class lN{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new oN,this._blacklist=new oN,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(qC.notType)})),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation((e=>{e.nonNullable()}))}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=aN(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,i;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(i=e.disableStackTrace)?i:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&rN(i))return i;let s=jC(e),o=jC(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(s," \n")+(o!==s?"result of cast: ".concat(o):""))}return i}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{path:i,originalValue:s=e,strict:o=this.spec.strict}=t,a=e;o||(a=this._cast(a,Object.assign({assert:!1},t)));let l=[];for(let c of Object.values(this.internalTests))c&&l.push(c);this.runTests({path:i,value:a,originalValue:s,options:t,tests:l},n,(e=>{if(e.length)return r(e,a);this.runTests({path:i,value:a,originalValue:s,options:t,tests:this.tests},n,r)}))}runTests(e,t,n){let r=!1,{tests:i,value:s,originalValue:o,path:a,options:l}=e,c=e=>{r||(r=!0,t(e,s))},u=e=>{r||(r=!0,n(e,s))},h=i.length,d=[];if(!h)return u([]);let f={value:s,originalValue:o,path:a,options:l,schema:this};for(let p=0;p<i.length;p++){(0,i[p])(f,c,(function(e){e&&(Array.isArray(e)?d.push(...e):d.push(e)),--h<=0&&u(d)}))}}asNestedTest(e){let{key:t,index:n,parent:r,parentPath:i,originalParent:s,options:o}=e;const a=null!=t?t:n;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const l="number"===typeof a;let c=r[a];const u=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?"".concat(i||"","[").concat(c?a:'"'.concat(a,'"'),"]"):(i?"".concat(i,"."):"")+t});return(e,t,n)=>this.resolve(u)._validate(c,u,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),i=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise(((n,s)=>r._validate(e,t,((e,t)=>{BC.isError(e)&&(e.value=t),s(e)}),((e,t)=>{e.length?s(new BC(e,t,void 0,void 0,i)):n(t)}))))}validateSync(e,t){var n;let r,i=this.resolve(Object.assign({},t,{value:e})),s=null!=(n=null==t?void 0:t.disableStackTrace)?n:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),((e,t)=>{throw BC.isError(e)&&(e.value=t),e}),((t,n)=>{if(t.length)throw new BC(t,e,void 0,void 0,s);r=n})),r}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(BC.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(BC.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):aN(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=iN({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=iN({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qC.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qC.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qC.required;return this.clone().withMutation((t=>t.nonNullable(e).defined(e)))}notRequired(){return this.clone().withMutation((e=>e.nullable().optional()))}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=qC.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=iN(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=UC(e).map((e=>new nN(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new XC(r,t):XC.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=iN({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qC.oneOf,n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=iN({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qC.notOneOf,n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=iN({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:i,nullable:s}=t.spec,o={meta:r,label:n,optional:i,nullable:s,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return o}}lN.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])lN.prototype["".concat(n,"At")]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:i,parentPath:s,schema:o}=sN(this,e,t,r.context);return o[n](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])lN.prototype[n]=lN.prototype.oneOf;for(const n of["not","nope"])lN.prototype[n]=lN.prototype.notOneOf;let cN=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uN=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,hN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,dN=e=>rN(e)||e===e.trim(),fN={}.toString();function pN(){return new mN}class mN extends lN{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===fN?e:r}))}))}required(e){return super.required(e).withMutation((t=>t.test({message:e||qC.required,name:"required",skipAbsent:!0,test:e=>!!e.length})))}notRequired(){return super.notRequired().withMutation((e=>(e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e)))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WC.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WC.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WC.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"===typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||WC.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&i||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.email;return this.matches(cN,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.url;return this.matches(uN,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.uuid;return this.matches(hN,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.trim;return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:dN})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.lowercase;return this.transform((e=>rN(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>rN(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC.uppercase;return this.transform((e=>rN(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>rN(e)||e===e.toUpperCase()})}}pN.prototype=mN.prototype;const gN=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function yN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let vN=new Date("");function wN(){return new bN}class bN extends lN{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation((()=>{this.transform(((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=gN.exec(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;const n={year:yN(t[1]),month:yN(t[2],1)-1,day:yN(t[3],1),hour:yN(t[4]),minute:yN(t[5]),second:yN(t[6]),millisecond:t[7]?yN(t[7].substring(0,3)):0,z:t[8]||void 0,plusMinus:t[9]||void 0,hourOffset:yN(t[10]),minuteOffset:yN(t[11])};if(void 0===n.z&&void 0===n.plusMinus)return new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond).valueOf();let r=0;return"Z"!==n.z&&void 0!==n.plusMinus&&(r=60*n.hourOffset+n.minuteOffset,"+"===n.plusMinus&&(r=0-r)),Date.UTC(n.year,n.month,n.day,n.hour,n.minute+r,n.second,n.millisecond)}(e),isNaN(e)?bN.INVALID_DATE:new Date(e))))}))}prepareParam(e,t){let n;if(nN.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HC.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HC.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function _N(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function EN(e){return(t,n)=>_N(e,t)-_N(e,n)}bN.INVALID_DATE=vN,wN.prototype=bN.prototype,wN.INVALID_DATE=vN;const SN=(e,t,n)=>{if("string"!==typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function IN(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=IN(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=IN(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(IN)}):"optional"in e?e.optional():e}let TN=e=>"[object Object]"===Object.prototype.toString.call(e);const kN=EN([]);function xN(e){return new CN(e)}class CN extends lN{constructor(e){super({type:"object",check:e=>TN(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=kN,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{e&&this.shape(e)}))}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let i=this.fields,s=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(r).filter((e=>!this._nodes.includes(e)))),a={},l=Object.assign({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const u of o){let e=i[u],n=u in r;if(e){let n,i=r[u];l.path=(t.path?"".concat(t.path,"."):"")+u,e=e.resolve({value:i,context:t.context,parent:a});let s=e instanceof lN?e.spec:void 0,o=null==s?void 0:s.strict;if(null!=s&&s.strip){c=c||u in r;continue}n=t.__validating&&o?r[u]:e.cast(r[u],l),void 0!==n&&(a[u]=n)}else n&&!s&&(a[u]=r[u]);n===u in a&&a[u]===r[u]||(c=!0)}return c?a:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{from:i=[],originalValue:s=e,recursive:o=this.spec.recursive}=t;t.from=[{schema:this,value:s},...i],t.__validating=!0,t.originalValue=s,super._validate(e,t,n,((e,i)=>{if(!o||!TN(i))return void r(e,i);s=s||i;let a=[];for(let n of this._nodes){let e=this.fields[n];e&&!nN.isRef(e)&&a.push(e.asNestedTest({options:t,key:n,parent:i,parentPath:t.path,originalParent:s}))}this.runTests({tests:a,value:i,originalValue:s,options:t},n,(t=>{r(t.sort(this._sortErrors).concat(e),i)}))}))}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];n[r]=void 0===e?i:e}return t.withMutation((t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges])))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach((n=>{var r;const i=this.fields[n];let s=e;null!=(r=s)&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[n]})),t[n]=i&&"getDefault"in i?i.getDefault(s):void 0})),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((e=>{let[t,n]=e;return"".concat(t,"-").concat(n)})));function s(e,t){let s=(0,CC.split)(e)[0];r.add(s),i.has("".concat(t,"-").concat(s))||n.push([t,s])}for(const o of Object.keys(e)){let t=e[o];r.add(o),nN.isRef(t)&&t.isSibling?s(t.path,o):JC(t)&&"deps"in t&&t.deps.forEach((e=>s(e,o)))}return OC().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=EN(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)}))}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return IN(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter((t=>{let[n,r]=t;return e.includes(n)&&e.includes(r)})))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let r=(0,CC.getter)(e,!0);return this.transform((i=>{if(!i)return i;let s=i;return((e,t)=>{const n=[...(0,CC.normalizePath)(t)];if(1===n.length)return n[0]in e;let r=n.pop(),i=(0,CC.getter)((0,CC.join)(n),!0)(e);return!(!i||!(r in i))})(i,e)&&(s=Object.assign({},i),n||delete s[e],s[t]=r(i)),s}))}json(){return this.transform(SN)}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QC.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QC.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n}))}camelCase(){return this.transformKeys(NC.camelCase)}snakeCase(){return this.transformKeys(NC.snakeCase)}constantCase(){return this.transformKeys((e=>(0,NC.snakeCase)(e).toUpperCase()))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,s]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[i]})),n.fields[i]=s.describe(t)}return n}}xN.prototype=CN.prototype;const NN=function(){const e=Nn(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)({}),l=O();let c=_((e=>e.user));c&&console.log("user exists",c);const u=xN({email:pN().email("Please enter a valid email").required("Email is required"),password:pN().min(5).max(20).required("Password is required")});return(0,kk.jsxs)("div",{children:[(0,kk.jsx)(Nk,{}),(0,kk.jsxs)("section",{className:"signup-container",children:[(0,kk.jsx)("div",{className:"signup-img-container",children:(0,kk.jsx)("img",{src:"/assets/bg2.jpg",className:"card-img",alt:"background",height:"1000px"})}),(0,kk.jsx)("div",{className:"signup-content-container",children:(0,kk.jsx)("div",{className:"content-wrapper",children:(0,kk.jsx)("div",{className:"main-card card",children:(0,kk.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{await u.validate({email:t,password:i},{abortEarly:!1}),console.log({email:t,password:i}),await Tk.signInWithEmailAndPassword(t,i),l(Pt(!0)),e("/"),n(""),s(""),a({})}catch(o){const e={};o.inner.forEach((t=>{e[t.path]=t.message})),a(e)}},children:[(0,kk.jsx)("h1",{children:"Login"}),(0,kk.jsxs)("div",{className:"mb-3",children:[(0,kk.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),(0,kk.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:t,onChange:e=>n(e.target.value)}),(0,kk.jsx)("br",{}),o.email&&(0,kk.jsx)("h6",{children:o.email})]}),(0,kk.jsxs)("div",{className:"mb-3",children:[(0,kk.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),(0,kk.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:i,onChange:e=>s(e.target.value)}),(0,kk.jsx)("br",{}),o.password&&(0,kk.jsx)("h6",{children:o.password}),(0,kk.jsx)("br",{})]}),(0,kk.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})})})]})]})},AN=()=>{var e,t,n,i,s,o,a;const[l,c]=(0,r.useState)([]),u=_((e=>e.bookstore.productDetails)),h=O();(0,r.useEffect)((()=>{h(Ot())}),[]);const{id:d}=function(){let{matches:e}=r.useContext(In),t=e[e.length-1];return t?t.params:{}}();console.log(d),(0,r.useEffect)((()=>{c(u.filter((e=>e.id==d)))}),[u,d]),(0,r.useEffect)((()=>{console.log(l)}),[l]);return(0,kk.jsxs)("div",{children:[(0,kk.jsx)(xk,{}),(0,kk.jsx)("section",{className:"detail-section-container",children:(0,kk.jsx)("div",{className:"container",children:(0,kk.jsxs)("div",{className:"flex-container",children:[(0,kk.jsx)("div",{className:"book-img-container",children:(0,kk.jsx)("img",{src:null===(e=l[0])||void 0===e?void 0:e.image_url,alt:"book"})}),(0,kk.jsxs)("div",{className:"book-detail-container",children:[(0,kk.jsx)("h2",{children:null===(t=l[0])||void 0===t||null===(n=t.title)||void 0===n?void 0:n.toUpperCase()}),(0,kk.jsxs)("p",{children:[(0,kk.jsx)("b",{children:"Author : "}),null===(i=l[0])||void 0===i?void 0:i.authors]}),(0,kk.jsxs)("p",{children:[(0,kk.jsx)("b",{children:"Description : "}),null===(s=l[0])||void 0===s?void 0:s.description]}),(0,kk.jsxs)("p",{children:[(0,kk.jsx)("b",{children:"Rating : "}),null===(o=l[0])||void 0===o?void 0:o.rating]}),(0,kk.jsx)("p",{children:(0,kk.jsxs)("b",{children:["Price : \u20b9 ",null===(a=l[0])||void 0===a?void 0:a.num_pages]})}),(0,kk.jsx)("button",{onClick:()=>(e=>{h(Rt(e))})(d),className:"CheckoutBtn",children:"Add To Cart"})]})]})})})]})};const ON=function(){const e=Nn(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)({});let u=_((e=>e.user));u&&console.log("user exists",u);const h=xN({email:pN().email("Please enter a valid email").required("Email is required"),password:pN().min(5).max(20).required("Password is required"),confirmPassword:pN().oneOf([tN("password"),null],"Passwords must match").required("Please confirm your password")});return(0,kk.jsxs)("div",{children:[(0,kk.jsx)(Nk,{}),(0,kk.jsxs)("section",{className:"signup-container",children:[(0,kk.jsx)("div",{className:"signup-img-container",children:(0,kk.jsx)("img",{src:"/assets/bg2.jpg",className:"card-img",alt:"background",height:"1000px"})}),(0,kk.jsx)("div",{className:"signup-content-container",children:(0,kk.jsx)("div",{className:"content-wrapper",children:(0,kk.jsx)("div",{className:"main-card card",children:(0,kk.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{await h.validate({email:t,password:i,confirmPassword:o},{abortEarly:!1}),await Tk.createUserWithEmailAndPassword(t,i),console.log({email:t,password:i,confirmPassword:o}),e("/"),n(""),s(""),a(""),c({})}catch(l){const e={};l.inner.forEach((t=>{e[t.path]=t.message})),c(e)}},children:[(0,kk.jsx)("h1",{children:"Sign Up"}),(0,kk.jsxs)("div",{className:"mb-3",children:[(0,kk.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),(0,kk.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:t,onChange:e=>n(e.target.value)}),(0,kk.jsx)("br",{}),l.email&&(0,kk.jsx)("h6",{children:l.email})]}),(0,kk.jsxs)("div",{className:"mb-3",children:[(0,kk.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),(0,kk.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:i,onChange:e=>s(e.target.value)}),(0,kk.jsx)("br",{}),l.password&&(0,kk.jsx)("h6",{children:l.password}),(0,kk.jsx)("br",{})]}),(0,kk.jsxs)("div",{className:"mb-3",children:[(0,kk.jsx)("label",{htmlFor:"exampleInputConfirmPassword1",className:"form-label",children:"Confirm Password"}),(0,kk.jsx)("input",{type:"password",className:"form-control",id:"exampleInputConfirmPassword1",value:o,onChange:e=>a(e.target.value)}),(0,kk.jsx)("br",{}),l.confirmPassword&&(0,kk.jsx)("h6",{children:l.confirmPassword}),(0,kk.jsx)("br",{})]}),(0,kk.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign Up"})]})})})})]})]})};const DN=function(){return(0,kk.jsx)("div",{className:"App",children:(0,kk.jsx)(Yn,{children:(0,kk.jsxs)(Wn,{children:[(0,kk.jsx)(Bn,{path:"/shoppingCart",element:(0,kk.jsx)(xC,{})}),(0,kk.jsx)(Bn,{path:"/",element:(0,kk.jsx)(Ak,{})}),(0,kk.jsx)(Bn,{path:"/bookstore",element:(0,kk.jsx)(Ak,{})}),(0,kk.jsx)(Bn,{path:"/login",element:(0,kk.jsx)(NN,{})}),(0,kk.jsx)(Bn,{path:"/book-details/:id",element:(0,kk.jsx)(AN,{})}),(0,kk.jsx)(Bn,{path:"/signup",element:(0,kk.jsx)(ON,{})})]})})})},RN=M(Lt,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(D(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}(...a)(i.dispatch),{...i,dispatch:s}}}(U));s.render((0,kk.jsx)(T,{store:RN,children:(0,kk.jsx)(DN,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.b07c9b18.js.map