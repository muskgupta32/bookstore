/*! For license information please see main.9a651d9e.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},575:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function u(e){return a.get(e)||a.set(e,h(e).map((function(e){return e.replace(o,"$2")})))}function h(e){return e.match(n)||[""]}function d(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!d(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,s=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;s=s[t[r++]]}s[t[r]]=n}))},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(d(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,s,o,a=e.length;for(i=0;i<a;i++)(r=e[i])&&(f(r)&&(r='"'+r+'"'),s=!(o=d(r))&&/^\d+$/.test(r),t.call(n,r,o,s,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,M=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function xe(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ie)&&(Ne(),xe())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Me=null,je=!1,Ue=null,Ve={onError:function(e){Fe=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Fe=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,It,Tt,kt=!1,xt=[],Ct=null,Nt=null,At=null,Ot=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Ot.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Ft(Nt,e,t,n,r,i),!0;case"mouseover":return At=Ft(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ot.set(s,Ft(Ot.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Ft(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return In}var kn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(On),Pn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Fn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,_e(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Ir={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Sr[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),xr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Or.length;Pr++){var Dr=Or[Pr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(xr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var u=Me;Fe=!1,Me=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Oe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case xr:case Cr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Kn(a))if(Yn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ii(e){return{current:e}}function Ti(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var xi={},Ci=Ii(xi),Ni=Ii(!1),Ai=xi;function Oi(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ni),Ti(Ci)}function Di(e,t,n){if(Ci.current!==xi)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ai=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),ki(Ci,e)):Ti(Ni),ki(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Hi=null,Wi=0,Gi=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=Yi,Gi[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=s+e}else Ji=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Es=Ii(null),Ss=null,Is=null,Ts=null;function ks(){Ts=Is=Ss=null}function xs(e){var t=Es.current;Ti(Es),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Ss=e,Ts=Is=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Is){if(null===Ss)throw Error(s(308));Is=e,Ss.dependencies={lanes:0,firstContext:e}}else Is=Is.next=e;return t}var Os=null;function Rs(e){null===Os?Os=[e]:Os.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Hs=Ii(Ks),Ws=Ii(Ks),Gs=Ii(Ks);function Qs(e){if(e===Ks)throw Error(s(174));return e}function $s(e,t){switch(ki(Gs,t),ki(Ws,e),ki(Hs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Hs),ki(Hs,t)}function Js(){Ti(Hs),Ti(Ws),Ti(Gs)}function Ys(e){Qs(Gs.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(ki(Ws,e),ki(Hs,n))}function Xs(e){Ws.current===e&&(Ti(Hs),Ti(Ws))}var Zs=Ii(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Io(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Fo(xo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Oo(9,ko.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&No(e)}function xo(e,t,n){return n((function(){Co(t)&&No(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ao(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Po(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Oo(t,n,s,r))}oo.flags|=e,i.memoizedState=Oo(1|t,n,s,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Fo(e,t){return Do(2048,8,e,t)}function Mo(e,t){return Do(4,2,e,t)}function jo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Wo(){return wo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))Jo(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Yo(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Yo(n,t,r))}}function $o(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(xo.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nl.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:Bo,useContext:As,useEffect:Fo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:jo,useMemo:qo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ko(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:Io,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:Bo,useContext:As,useEffect:Fo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:jo,useMemo:qo,useReducer:Eo,useRef:Ro,useState:function(){return Eo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ko(t,ao.memoizedState,e)},useTransition:function(){return[Eo(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:Io,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Ri(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Ri(t)?Ai:Ci.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Pl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Rl),Rl|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Ri(n)?Ai:Ci.current;return s=Oi(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Fi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Oi(t,c=Ri(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Oi(t,l=Ri(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,s,i)}function Ca(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ka(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),$s(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Oa,Ra,Pa,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=Yi,Gi[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Wa(t),null;case 3:return r=t.stateNode,Js(),Ti(Ni),Ti(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Wa(t),null;case 5:Xs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Qs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Js(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return xs(t.type._context),Wa(t),null;case 19:if(Ti(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Ye()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ti(Ni),Ti(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Ti(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zs),null;case 4:return Js(),null;case 10:return xs(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,dl(e,t,n),Ja=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ic(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ic(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ic(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ic(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ye())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Xa=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ic(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Xa=l):El(i);for(;null!==s;)Xa=s,wl(s,t,n),s=s.sibling;Xa=i,$a=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){Ic(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _l(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ic(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ic(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ic(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ic(t,o,l)}}}catch(l){Ic(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,Il=Math.ceil,Tl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Cl=0,Nl=null,Al=null,Ol=0,Rl=0,Pl=Ii(0),Dl=0,Ll=null,Fl=0,Ml=0,jl=0,Ul=null,Vl=null,zl=0,Bl=1/0,ql=null,Kl=!1,Hl=null,Wl=null,Gl=!1,Ql=null,$l=0,Jl=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Yl=null,Error(s(185));yt(e,n,r),0!==(2&Cl)&&e===Nl||(e===Nl&&(0===(2&Cl)&&(Ml|=n),4===Dl&&ac(e,Ol)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Bl=Ye()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&Cl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var o=pc();for(Nl===e&&Ol===t||(ql=null,Bl=Ye()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}ks(),Tl.current=o,Cl=i,null!==Al?t=0:(Nl=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),t);break}_c(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),r);break}_c(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~jl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vl,ql),rc(e,Ye()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Bl=Ye()+500,Ui&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Cl=t))&&Bi()}}function hc(){Rl=Pl.current,Ti(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Js(),Ti(Ni),Ti(Ci),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:Ti(Zs);break;case 10:xs(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Al=e=Pc(e.current,null),Ol=Rl=t,Dl=0,Ll=null,jl=Ml=Fl=0,Vl=Ul=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Os=null}return e}function fc(e,t){for(;;){var n=Al;try{if(ks(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Dl=1,Ll=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Tl.current;return Tl.current=Xo,null===e?Xo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ml)||ac(Nl,Ol)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Nl===e&&Ol===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(ks(),Cl=n,Tl.current=r,null!==Al)throw Error(s(261));return Nl=null,Ol=0,Dl}function yc(){for(;null!==Al;)wc(Al)}function vc(){for(;null!==Al&&!$e();)wc(Al)}function wc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,n){var r=wt,i=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Al=Nl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=wt;wt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Ic(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),Cl=l,wt=a,xl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,$l=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Bi()}(e,t,n,r)}finally{xl.transition=i,wt=r}return null}function Ec(){if(null!==Ql){var e=bt($l),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Ic(l,l.return,E)}if(l===a){Xa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xa=_;break e}Xa=l.return}}if(Cl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Ye()-zl?dc(e,0):jl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(yt(e,t,n),rc(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lc(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Oc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Oc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),e}function zc(e){if(!e)return xi;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=js(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Ys(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fs(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ma(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Cl)&&(Bl=Ye()+500,Bi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},Et=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,xe,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,k=-1,x=5,C=-1;function N(){return!(t.unstable_now()-C<x)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?S():(I=!1,T=null)}}else I=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){y(A,0)};function P(e){T=e,I||(I=!0,S())}function D(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},517:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),i=(e,t)=>n(e).join(t).toLowerCase(),s=e=>n(e).reduce(((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())),"");e.exports={words:n,upperFirst:r,camelCase:s,pascalCase:e=>r(s(e)),snakeCase:e=>i(e,"_"),kebabCase:e=>i(e,"-"),sentenceCase:e=>r(i(e," ")),titleCase:e=>n(e).map(r).join(" ")}},704:e=>{function t(e,t){var n=e.length,r=new Array(n),i={},s=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));s--;)i[s]||l(e[s],s,new Set);return r;function l(e,t,s){if(s.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(d){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var u=o.get(e)||new Set;if(t=(u=Array.from(u)).length){s.add(e);do{var h=u[--t];l(h,a.get(h),s)}while(t);s.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},895:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},237:(e,t,n)=>{"use strict";e.exports=n(895)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>dn,hasStandardBrowserEnv:()=>fn,hasStandardBrowserWebWorkerEnv:()=>mn,origin:()=>gn});var t={};n.r(t),n.d(t,{FirebaseError:()=>fs,SDK_VERSION:()=>Wo,_DEFAULT_ENTRY_NAME:()=>Ao,_addComponent:()=>Lo,_addOrOverwriteComponent:()=>Fo,_apps:()=>Ro,_clearComponents:()=>Bo,_components:()=>Do,_getProvider:()=>jo,_isFirebaseApp:()=>Vo,_isFirebaseServerApp:()=>zo,_registerComponent:()=>Mo,_removeServiceInstance:()=>Uo,_serverApps:()=>Po,deleteApp:()=>Yo,getApp:()=>$o,getApps:()=>Jo,initializeApp:()=>Go,initializeServerApp:()=>Qo,onLog:()=>Zo,registerVersion:()=>Xo,setLogLevel:()=>ea});var r=n(43),i=n.t(r,2),s=n(950),o=n.t(s,2),a=n(237),l=r,c=Symbol.for("react-redux-context"),u="undefined"!==typeof globalThis?globalThis:{};function h(){var e;if(!l.createContext)return{};const t=null!==(e=u[c])&&void 0!==e?e:u[c]=new Map;let n=t.get(l.createContext);return n||(n=l.createContext(null),t.set(l.createContext,n)),n}var d=h(),f=()=>{throw new Error("uSES not initialized!")};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return function(){return l.useContext(e)}}var m=p(),g=f,y=(e,t)=>e===t;function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const t=e===d?m:p(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=y,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:c,identityFunctionCheck:u}=t(),h=(l.useRef(!0),l.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i.stabilityCheck])),d=g(o.addNestedSub,s.getState,a||s.getState,h,r);return l.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var w=v();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function b(e){e()}var _={notify(){},get:()=>[]};function E(e,t){let n,r=_,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){b((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=_)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var S=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),I="undefined"!==typeof navigator&&"ReactNative"===navigator.product,T=S||I?l.useLayoutEffect:l.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var k=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=l.useMemo((()=>{const e=E(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),c=l.useMemo((()=>t.getState()),[t]);T((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,c]);const u=n||d;return l.createElement(u.Provider,{value:a},r)};function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const t=e===d?m:p(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var C=x();function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const t=e===d?C:x(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var A,O=N();A=a.useSyncExternalStoreWithSelector,g=A,(e=>{e})(r.useSyncExternalStore);var R=Symbol.for("immer-nothing"),P=Symbol.for("immer-draftable"),D=Symbol.for("immer-state");function L(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var F=Object.getPrototypeOf;function M(e){return!!e&&!!e[D]}function j(e){var t;return!!e&&(V(e)||Array.isArray(e)||!!e[P]||!(null===(t=e.constructor)||void 0===t||!t[P])||H(e)||W(e))}var U=Object.prototype.constructor.toString();function V(e){if(!e||"object"!==typeof e)return!1;const t=F(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===U}function z(e,t){0===B(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function B(e){const t=e[D];return t?t.type_:Array.isArray(e)?1:H(e)?2:W(e)?3:0}function q(e,t){return 2===B(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K(e,t,n){const r=B(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function H(e){return e instanceof Map}function W(e){return e instanceof Set}function G(e){return e.copy_||e.base_}function Q(e,t){if(H(e))return new Map(e);if(W(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=V(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[D];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(F(e),t)}{const t=F(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function $(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Y(e)||M(e)||!j(e)||(B(e)>1&&(e.set=e.add=e.clear=e.delete=J),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return $(n,!0)}))),e}function J(){L(2)}function Y(e){return Object.isFrozen(e)}var X,Z={};function ee(e){const t=Z[e];return t||L(0),t}function te(){return X}function ne(e,t){t&&(ee("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function re(e){ie(e),e.drafts_.forEach(oe),e.drafts_=null}function ie(e){e===X&&(X=e.parent_)}function se(e){return X={drafts_:[],parent_:X,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oe(e){const t=e[D];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[D].modified_&&(re(t),L(4)),j(e)&&(e=le(t,e),t.parent_||ue(t,e)),t.patches_&&ee("Patches").generateReplacementPatches_(n[D].base_,e,t.patches_,t.inversePatches_)):e=le(t,n,[]),re(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==R?e:void 0}function le(e,t,n){if(Y(t))return t;const r=t[D];if(!r)return z(t,((i,s)=>ce(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return ue(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),z(i,((i,o)=>ce(e,r,t,i,o,n,s))),ue(e,t,!1),n&&e.patches_&&ee("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ce(e,t,n,r,i,s,o){if(M(i)){const o=le(e,i,s&&t&&3!==t.type_&&!q(t.assigned_,r)?s.concat(r):void 0);if(K(n,r,o),!M(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(j(i)&&!Y(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;le(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||ue(e,i)}}function ue(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$(t,n)}var he={get(e,t){if(t===D)return e;const n=G(e);if(!q(n,t))return function(e,t,n){var r;const i=pe(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!j(r)?r:r===fe(e.base_,t)?(ge(e),e.copy_[t]=ye(r,e)):r},has:(e,t)=>t in G(e),ownKeys:e=>Reflect.ownKeys(G(e)),set(e,t,n){const r=pe(G(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=fe(G(e),t),i=null===r||void 0===r?void 0:r[D];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||q(e.base_,t)))return!0;ge(e),me(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==fe(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ge(e),me(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=G(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){L(11)},getPrototypeOf:e=>F(e.base_),setPrototypeOf(){L(12)}},de={};function fe(e,t){const n=e[D];return(n?G(n):e)[t]}function pe(e,t){if(!(t in e))return;let n=F(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=F(n)}}function me(e){e.modified_||(e.modified_=!0,e.parent_&&me(e.parent_))}function ge(e){e.copy_||(e.copy_=Q(e.base_,e.scope_.immer_.useStrictShallowCopy_))}z(he,((e,t)=>{de[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),de.deleteProperty=function(e,t){return de.set.call(this,e,t,void 0)},de.set=function(e,t,n){return he.set.call(this,e[0],t,n,e[0])};function ye(e,t){const n=H(e)?ee("MapSet").proxyMap_(e,t):W(e)?ee("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:te(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=he;n&&(i=[r],s=de);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:te()).drafts_.push(n),n}function ve(e){return M(e)||L(10),we(e)}function we(e){if(!j(e)||Y(e))return e;const t=e[D];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Q(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Q(e,!0);return z(n,((e,t)=>{K(n,e,we(t))})),t&&(t.finalized_=!1),n}var be=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&L(6),void 0!==n&&"function"!==typeof n&&L(7),j(e)){const i=se(this),s=ye(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?re(i):ie(i)}return ne(i,n),ae(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===R&&(r=void 0),this.autoFreeze_&&$(r,!0),n){const t=[],i=[];ee("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}L(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;return[this.produce(e,n,((e,t)=>{r=e,i=t})),r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){j(e)||L(8),M(e)&&(e=ve(e));const t=se(this),n=ye(e,void 0);return n[D].isManual_=!0,ie(t),n}finishDraft(e,t){const n=e&&e[D];n&&n.isManual_||L(9);const{scope_:r}=n;return ne(r,t),ae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=ee("Patches").applyPatches_;return M(e)?r(e,t):this.produce(e,(e=>r(e,t)))}};be.produce,be.produceWithPatches.bind(be),be.setAutoFreeze.bind(be),be.setUseStrictShallowCopy.bind(be),be.applyPatches.bind(be),be.createDraft.bind(be),be.finishDraft.bind(be);function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Ee=e=>Array.isArray(e)?e:[e];function Se(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Ie="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Te=0,ke=1;function xe(){return{s:Te,v:void 0,o:null,p:null}}function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=xe();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=xe(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=xe(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===ke)l=t.v;else if(l=e.apply(null,arguments),s++,r){var c,u,h;const e=null!==(c=null===(u=i)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Ie(l):l}return a.s=ke,a.v=l,l}return o.clearCache=()=>{n=xe(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),_e(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=Ce,argsMemoizeOptions:f=[],devModeChecks:p={}}=c,m=Ee(h),g=Ee(f),y=Se(t),v=u((function(){return s++,l.apply(null,arguments)}),...m);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(w,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var Ae=Ne(Ce),Oe=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Oe});function Re(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Pe=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),De=()=>Math.random().toString(36).substring(7).split("").join("."),Le={INIT:"@@redux/INIT".concat(De()),REPLACE:"@@redux/REPLACE".concat(De()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(De())};function Fe(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Me(e,t,n){if("function"!==typeof e)throw new Error(Re(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Re(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Re(1));return n(Me)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(Re(3));return i}function h(e){if("function"!==typeof e)throw new Error(Re(4));if(l)throw new Error(Re(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(Re(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!Fe(e))throw new Error(Re(7));if("undefined"===typeof e.type)throw new Error(Re(8));if("string"!==typeof e.type)throw new Error(Re(17));if(l)throw new Error(Re(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:Le.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Re(10));r=e,d({type:Le.REPLACE})},[Pe]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Re(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Pe](){return this}}}}}function je(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Le.INIT}))throw new Error(Re(12));if("undefined"===typeof n(void 0,{type:Le.PROBE_UNKNOWN_ACTION()}))throw new Error(Re(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Re(14))}o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}function Ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function Ve(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var ze=Ve(),Be=Ve,qe=(function(){const e=Ne(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(M(e)?ve(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(Ce),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ue:Ue.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Ke(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(at(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Fe(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var He=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};var We="RTK_autoBatch",Ge=e=>t=>{setTimeout(t,e)},Qe="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ge(10),$e=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new He(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Qe:"callback"===e.type?e.queueNotification:Ge(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[We]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};var Je=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Ye="listener",Xe="completed",Ze="cancelled",et=("task-".concat(Ze),"task-".concat(Xe),"".concat(Ye,"-").concat(Ze),"".concat(Ye,"-").concat(Xe),(e,t)=>{if("function"!==typeof e)throw new Error(at(32))});var{assign:tt}=Object,nt="listenerMiddleware",rt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Ke(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(at(21));return et(s),{predicate:i,type:t,effect:s}},it=Object.assign((e=>{const{type:t,predicate:n,effect:r}=rt(e);return{id:Je(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(at(22))}}}),{withTypes:()=>it}),st=Object.assign(Ke("".concat(nt,"/add")),{withTypes:()=>st}),ot=(Ke("".concat(nt,"/removeAll")),Object.assign(Ke("".concat(nt,"/remove")),{withTypes:()=>ot}));Symbol.for("rtk-state-proxy-original");function at(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function lt(e,t){return function(){return e.apply(t,arguments)}}const{toString:ct}=Object.prototype,{getPrototypeOf:ut}=Object,ht=(dt=Object.create(null),e=>{const t=ct.call(e);return dt[t]||(dt[t]=t.slice(8,-1).toLowerCase())});var dt;const ft=e=>(e=e.toLowerCase(),t=>ht(t)===e),pt=e=>t=>typeof t===e,{isArray:mt}=Array,gt=pt("undefined");const yt=ft("ArrayBuffer");const vt=pt("string"),wt=pt("function"),bt=pt("number"),_t=e=>null!==e&&"object"===typeof e,Et=e=>{if("object"!==ht(e))return!1;const t=ut(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},St=ft("Date"),It=ft("File"),Tt=ft("Blob"),kt=ft("FileList"),xt=ft("URLSearchParams"),[Ct,Nt,At,Ot]=["ReadableStream","Request","Response","Headers"].map(ft);function Rt(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function Pt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Dt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Lt=e=>!gt(e)&&e!==Dt;const Ft=(Mt="undefined"!==typeof Uint8Array&&ut(Uint8Array),e=>Mt&&e instanceof Mt);var Mt;const jt=ft("HTMLFormElement"),Ut=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Vt=ft("RegExp"),zt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Rt(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},Bt="abcdefghijklmnopqrstuvwxyz",qt="0123456789",Kt={DIGIT:qt,ALPHA:Bt,ALPHA_DIGIT:Bt+Bt.toUpperCase()+qt};const Ht=ft("AsyncFunction"),Wt={isArray:mt,isArrayBuffer:yt,isBuffer:function(e){return null!==e&&!gt(e)&&null!==e.constructor&&!gt(e.constructor)&&wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||wt(e.append)&&("formdata"===(t=ht(e))||"object"===t&&wt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&yt(e.buffer),t},isString:vt,isNumber:bt,isBoolean:e=>!0===e||!1===e,isObject:_t,isPlainObject:Et,isReadableStream:Ct,isRequest:Nt,isResponse:At,isHeaders:Ot,isUndefined:gt,isDate:St,isFile:It,isBlob:Tt,isRegExp:Vt,isFunction:wt,isStream:e=>_t(e)&&wt(e.pipe),isURLSearchParams:xt,isTypedArray:Ft,isFileList:kt,forEach:Rt,merge:function e(){const{caseless:t}=Lt(this)&&this||{},n={},r=(r,i)=>{const s=t&&Pt(n,i)||i;Et(n[s])&&Et(r)?n[s]=e(n[s],r):Et(r)?n[s]=e({},r):mt(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Rt(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Rt(t,((t,r)=>{n&&wt(t)?e[r]=lt(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&ut(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ht,kindOfTest:ft,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(mt(e))return e;let t=e.length;if(!bt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:jt,hasOwnProperty:Ut,hasOwnProp:Ut,reduceDescriptors:zt,freezeMethods:e=>{zt(e,((t,n)=>{if(wt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];wt(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return mt(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Pt,global:Dt,isContextDefined:Lt,ALPHABET:Kt,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&wt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(_t(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=mt(e)?[]:{};return Rt(e,((e,t)=>{const s=n(e,r+1);!gt(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Ht,isThenable:e=>e&&(_t(e)||wt(e))&&wt(e.then)&&wt(e.catch)};function Gt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Wt.inherits(Gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Qt=Gt.prototype,$t={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{$t[e]={value:e}})),Object.defineProperties(Gt,$t),Object.defineProperty(Qt,"isAxiosError",{value:!0}),Gt.from=(e,t,n,r,i,s)=>{const o=Object.create(Qt);return Wt.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Gt.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Jt=Gt;function Yt(e){return Wt.isPlainObject(e)||Wt.isArray(e)}function Xt(e){return Wt.endsWith(e,"[]")?e.slice(0,-2):e}function Zt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Xt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const en=Wt.toFlatObject(Wt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const tn=function(e,t,n){if(!Wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Wt.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Wt.isSpecCompliantForm(t);if(!Wt.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Wt.isDate(e))return e.toISOString();if(!a&&Wt.isBlob(e))throw new Jt("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(e)||Wt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(Wt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Wt.isArray(e)&&function(e){return Wt.isArray(e)&&!e.some(Yt)}(e)||(Wt.isFileList(e)||Wt.endsWith(n,"[]"))&&(a=Wt.toArray(e)))return n=Xt(n),a.forEach((function(e,r){!Wt.isUndefined(e)&&null!==e&&t.append(!0===o?Zt([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!Yt(e)||(t.append(Zt(i,n,s),l(e)),!1)}const u=[],h=Object.assign(en,{defaultVisitor:c,convertValue:l,isVisitable:Yt});if(!Wt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Wt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Wt.forEach(n,(function(n,s){!0===(!(Wt.isUndefined(n)||null===n)&&i.call(t,n,Wt.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function nn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function rn(e,t){this._pairs=[],e&&tn(e,this,t)}const sn=rn.prototype;sn.append=function(e,t){this._pairs.push([e,t])},sn.toString=function(e){const t=e?function(t){return e.call(this,t,nn)}:nn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const on=rn;function an(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ln(e,t,n){if(!t)return e;const r=n&&n.encode||an,i=n&&n.serialize;let s;if(s=i?i(t,n):Wt.isURLSearchParams(t)?t.toString():new on(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const cn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},un={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:on,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dn="undefined"!==typeof window&&"undefined"!==typeof document,fn=(pn="undefined"!==typeof navigator&&navigator.product,dn&&["ReactNative","NativeScript","NS"].indexOf(pn)<0);var pn;const mn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gn=dn&&window.location.href||"http://localhost",yn={...e,...hn};const vn=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&Wt.isArray(r)?r.length:s,a)return Wt.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&Wt.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&Wt.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(Wt.isFormData(e)&&Wt.isFunction(e.entries)){const n={};return Wt.forEachEntry(e,((e,r)=>{t(function(e){return Wt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const wn={transitional:un,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Wt.isObject(e);i&&Wt.isHTMLForm(e)&&(e=new FormData(e));if(Wt.isFormData(e))return r?JSON.stringify(vn(e)):e;if(Wt.isArrayBuffer(e)||Wt.isBuffer(e)||Wt.isStream(e)||Wt.isFile(e)||Wt.isBlob(e)||Wt.isReadableStream(e))return e;if(Wt.isArrayBufferView(e))return e.buffer;if(Wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return tn(e,new yn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return yn.isNode&&Wt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Wt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return tn(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Wt.isString(e))try{return(t||JSON.parse)(e),Wt.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||wn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Wt.isResponse(e)||Wt.isReadableStream(e))return e;if(e&&Wt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw Jt.from(i,Jt.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yn.classes.FormData,Blob:yn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],(e=>{wn.headers[e]={}}));const bn=wn,_n=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),En=Symbol("internals");function Sn(e){return e&&String(e).trim().toLowerCase()}function In(e){return!1===e||null==e?e:Wt.isArray(e)?e.map(In):String(e)}function Tn(e,t,n,r,i){return Wt.isFunction(r)?r.call(this,t,n):(i&&(t=n),Wt.isString(t)?Wt.isString(r)?-1!==t.indexOf(r):Wt.isRegExp(r)?r.test(t):void 0:void 0)}class kn{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Sn(t);if(!i)throw new Error("header name must be a non-empty string");const s=Wt.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=In(e))}const s=(e,t)=>Wt.forEach(e,((e,n)=>i(e,n,t)));if(Wt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Wt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&_n[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Wt.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Sn(e)){const n=Wt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Wt.isFunction(t))return t.call(this,e,n);if(Wt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Sn(e)){const n=Wt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Tn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Sn(e)){const i=Wt.findKey(n,e);!i||t&&!Tn(0,n[i],i,t)||(delete n[i],r=!0)}}return Wt.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Tn(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Wt.forEach(this,((r,i)=>{const s=Wt.findKey(n,i);if(s)return t[s]=In(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=In(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Wt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Wt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[En]=this[En]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Sn(e);t[r]||(!function(e,t){const n=Wt.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Wt.isArray(e)?e.forEach(r):r(e),this}}kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Wt.reduceDescriptors(kn.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Wt.freezeMethods(kn);const xn=kn;function Cn(e,t){const n=this||bn,r=t||n,i=xn.from(r.headers);let s=r.data;return Wt.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Nn(e){return!(!e||!e.__CANCEL__)}function An(e,t,n){Jt.call(this,null==e?"canceled":e,Jt.ERR_CANCELED,t,n),this.name="CanceledError"}Wt.inherits(An,Jt,{__CANCEL__:!0});const On=An;function Rn(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Jt("Request failed with status code "+n.status,[Jt.ERR_BAD_REQUEST,Jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Pn=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const Dn=function(e,t){let n=0;const r=1e3/t;let i=null;return function(){const t=!0===this,s=Date.now();if(t||s-n>r)return i&&(clearTimeout(i),i=null),n=s,e.apply(null,arguments);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,arguments))),r-(s-n)))}},Ln=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Pn(50,250);return Dn((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o};c[t?"download":"upload"]=!0,e(c)}),n)},Fn=yn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Wt.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Mn=yn.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Wt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Wt.isString(r)&&o.push("path="+r),Wt.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function jn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Un=e=>e instanceof xn?{...e}:e;function Vn(e,t){t=t||{};const n={};function r(e,t,n){return Wt.isPlainObject(e)&&Wt.isPlainObject(t)?Wt.merge.call({caseless:n},e,t):Wt.isPlainObject(t)?Wt.merge({},t):Wt.isArray(t)?t.slice():t}function i(e,t,n){return Wt.isUndefined(t)?Wt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!Wt.isUndefined(t))return r(void 0,t)}function o(e,t){return Wt.isUndefined(t)?Wt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(Un(e),Un(t),!0)};return Wt.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);Wt.isUndefined(o)&&s!==a||(n[r]=o)})),n}const zn=e=>{const t=Vn({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=xn.from(a),t.url=ln(jn(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Wt.isFormData(r))if(yn.hasStandardBrowserEnv||yn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(yn.hasStandardBrowserEnv&&(i&&Wt.isFunction(i)&&(i=i(t)),i||!1!==i&&Fn(t.url))){const e=s&&o&&Mn.read(o);e&&a.set(s,e)}return t},Bn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=zn(e);let i=r.data;const s=xn.from(r.headers).normalize();let o,{responseType:a}=r;function l(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let c=new XMLHttpRequest;function u(){if(!c)return;const r=xn.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());Rn((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}c.open(r.method.toUpperCase(),r.url,!0),c.timeout=r.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new Jt("Request aborted",Jt.ECONNABORTED,r,c)),c=null)},c.onerror=function(){n(new Jt("Network Error",Jt.ERR_NETWORK,r,c)),c=null},c.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const t=r.transitional||un;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new Jt(e,t.clarifyTimeoutError?Jt.ETIMEDOUT:Jt.ECONNABORTED,r,c)),c=null},void 0===i&&s.setContentType(null),"setRequestHeader"in c&&Wt.forEach(s.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Wt.isUndefined(r.withCredentials)||(c.withCredentials=!!r.withCredentials),a&&"json"!==a&&(c.responseType=r.responseType),"function"===typeof r.onDownloadProgress&&c.addEventListener("progress",Ln(r.onDownloadProgress,!0)),"function"===typeof r.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Ln(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=t=>{c&&(n(!t||t.type?new On(null,e,c):t),c.abort(),c=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);h&&-1===yn.protocols.indexOf(h)?n(new Jt("Unsupported protocol "+h+":",Jt.ERR_BAD_REQUEST,e)):c.send(i||null)}))},qn=(e,t)=>{let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Jt?t:new On(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{i(new Jt("timeout ".concat(t," of ms exceeded"),Jt.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",i):e.unsubscribe(i))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},Kn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Hn=(e,t,n,r,i)=>{const s=async function*(e,t,n){for await(const r of e)yield*Kn(ArrayBuffer.isView(r)?r:await n(String(r)),t)}(e,t,i);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:i}=await s.next();if(t)return e.close(),void r();let a=i.byteLength;n&&n(o+=a),e.enqueue(new Uint8Array(i))},cancel:e=>(r(e),s.return())},{highWaterMark:2})},Wn=(e,t)=>{const n=null!=e;return r=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:r})))},Gn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Qn=Gn&&"function"===typeof ReadableStream,$n=Gn&&("function"===typeof TextEncoder?(Jn=new TextEncoder,e=>Jn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Jn;const Yn=Qn&&(()=>{let e=!1;const t=new Request(yn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Xn=Qn&&!!(()=>{try{return Wt.isReadableStream(new Response("").body)}catch(e){}})(),Zn={stream:Xn&&(e=>e.body)};var er;Gn&&(er=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Zn[e]&&(Zn[e]=Wt.isFunction(er[e])?t=>t[e]():(t,n)=>{throw new Jt("Response type '".concat(e,"' is not supported"),Jt.ERR_NOT_SUPPORT,n)})})));const tr=async(e,t)=>{const n=Wt.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:Wt.isBlob(e)?e.size:Wt.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:Wt.isArrayBufferView(e)?e.byteLength:(Wt.isURLSearchParams(e)&&(e+=""),Wt.isString(e)?(await $n(e)).byteLength:void 0))(t):n},nr=Gn&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=zn(e);c=c?(c+"").toLowerCase():"text";let f,p,[m,g]=i||s||o?qn([i,s],o):[];const y=()=>{!f&&setTimeout((()=>{m&&m.unsubscribe()})),f=!0};let v;try{if(l&&Yn&&"get"!==n&&"head"!==n&&0!==(v=await tr(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});Wt.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body&&(r=Hn(n.body,65536,Wn(v,Ln(l)),null,$n))}Wt.isString(h)||(h=h?"cors":"omit"),p=new Request(t,{...d,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:h});let i=await fetch(p);const s=Xn&&("stream"===c||"response"===c);if(Xn&&(a||s)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Wt.toFiniteNumber(i.headers.get("content-length"));i=new Response(Hn(i.body,65536,a&&Wn(t,Ln(a,!0)),s&&y,$n),e)}c=c||"text";let o=await Zn[Wt.findKey(Zn,c)||"text"](i,e);return!s&&y(),g&&g(),await new Promise(((t,n)=>{Rn(t,n,{data:o,headers:xn.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(w){if(y(),w&&"TypeError"===w.name&&/fetch/i.test(w.message))throw Object.assign(new Jt("Network Error",Jt.ERR_NETWORK,e,p),{cause:w.cause||w});throw Jt.from(w,w&&w.code,e,p)}}),rr={http:null,xhr:Bn,fetch:nr};Wt.forEach(rr,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const ir=e=>"- ".concat(e),sr=e=>Wt.isFunction(e)||null===e||!1===e,or=e=>{e=Wt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!sr(n)&&(r=rr[(t=String(n)).toLowerCase()],void 0===r))throw new Jt("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ir).join("\n"):" "+ir(e[0]):"as no adapter specified";throw new Jt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function ar(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new On(null,e)}function lr(e){ar(e),e.headers=xn.from(e.headers),e.data=Cn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return or(e.adapter||bn.adapter)(e).then((function(t){return ar(e),t.data=Cn.call(e,e.transformResponse,t),t.headers=xn.from(t.headers),t}),(function(t){return Nn(t)||(ar(e),t&&t.response&&(t.response.data=Cn.call(e,e.transformResponse,t.response),t.response.headers=xn.from(t.response.headers))),Promise.reject(t)}))}const cr="1.7.2",ur={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ur[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const hr={};ur.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Jt(r(i," has been removed"+(t?" in "+t:"")),Jt.ERR_DEPRECATED);return t&&!hr[i]&&(hr[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const dr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Jt("options must be an object",Jt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Jt("option "+s+" must be "+n,Jt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Jt("Unknown option "+s,Jt.ERR_BAD_OPTION)}},validators:ur},fr=dr.validators;class pr{constructor(e){this.defaults=e,this.interceptors={request:new cn,response:new cn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Vn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&dr.assertOptions(n,{silentJSONParsing:fr.transitional(fr.boolean),forcedJSONParsing:fr.transitional(fr.boolean),clarifyTimeoutError:fr.transitional(fr.boolean)},!1),null!=r&&(Wt.isFunction(r)?t.paramsSerializer={serialize:r}:dr.assertOptions(r,{encode:fr.function,serialize:fr.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&Wt.merge(i.common,i[t.method]);i&&Wt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=xn.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[lr.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=lr.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return ln(jn((e=Vn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Wt.forEach(["delete","get","head","options"],(function(e){pr.prototype[e]=function(t,n){return this.request(Vn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Wt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Vn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}pr.prototype[e]=t(),pr.prototype[e+"Form"]=t(!0)}));const mr=pr;class gr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new On(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new gr((function(t){e=t})),cancel:e}}}const yr=gr;const vr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vr).forEach((e=>{let[t,n]=e;vr[n]=t}));const wr=vr;const br=function e(t){const n=new mr(t),r=lt(mr.prototype.request,n);return Wt.extend(r,mr.prototype,n,{allOwnKeys:!0}),Wt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Vn(t,n))},r}(bn);br.Axios=mr,br.CanceledError=On,br.CancelToken=yr,br.isCancel=Nn,br.VERSION=cr,br.toFormData=tn,br.AxiosError=Jt,br.Cancel=br.CanceledError,br.all=function(e){return Promise.all(e)},br.spread=function(e){return function(t){return e.apply(null,t)}},br.isAxiosError=function(e){return Wt.isObject(e)&&!0===e.isAxiosError},br.mergeConfig=Vn,br.AxiosHeaders=xn,br.formToJSON=e=>vn(Wt.isHTMLForm(e)?new FormData(e):e),br.getAdapter=or,br.HttpStatusCode=wr,br.default=br;const _r=br;function Er(){return e=>{_r.get("https://example-data.draftbit.com/books?_limit=20").then((function(t){e({type:"FETCH_PRODUCTS",payload:t.data})})).catch((function(e){console.log(e)}))}}const Sr={productDetails:[]};function Ir(e){return{type:"ADD_PRODUCTS",payload:e}}const Tr=e=>({type:"SET_USER",payload:e}),kr=je({bookstore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr,t=arguments.length>1?arguments[1]:void 0;return"FETCH_PRODUCTS"===t.type?{productDetails:t.payload}:e},shoppingCart:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartProducts:[]},t=arguments.length>1?arguments[1]:void 0;const n=t.payload;if("ADD_PRODUCTS"===t.type){const t=e.cartProducts.find((e=>e.id===n.id));return t?{...e,cartProducts:e.cartProducts.map((e=>e.id===n.id?{...e,qty:e.qty+1}:e))}:{...e,cartProducts:[...e.cartProducts,{...n,qty:1}]}}if("DELETE_PRODUCTS"===t.type){const t=e.cartProducts.find((e=>e.id===n.id));if(t)return 1===t.qty?{...e,cartProducts:e.cartProducts.filter((e=>{if(e.id===t.id)return console.log("working"),!1}))}:{...e,cartProducts:e.cartProducts.map((e=>e.id===n.id?{...e,qty:e.qty-1}:e))}}return e},user:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?t.payload:e}});function xr(){return xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xr.apply(this,arguments)}var Cr;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Cr||(Cr={}));const Nr="popstate";function Ar(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Or(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Rr(e,t){return{usr:e.state,key:e.key,idx:t}}function Pr(e,t,n,r){return void 0===n&&(n=null),xr({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Lr(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Dr(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Lr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Fr(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Cr.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=Cr.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Dr(e);return n=n.replace(/ $/,"%20"),Ar(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(xr({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Nr,h),l=e,()=>{i.removeEventListener(Nr,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Cr.Push;let r=Pr(f.location,e,t);n&&n(r,e),c=u()+1;let h=Rr(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=Cr.Replace;let r=Pr(f.location,e,t);n&&n(r,e),c=u();let i=Rr(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var Mr;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Mr||(Mr={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function jr(e,t,n){return void 0===n&&(n="/"),Ur(e,t,n,!1)}function Ur(e,t,n,r){let i=Zr(("string"===typeof t?Lr(t):t).pathname||"/",n);if(null==i)return null;let s=Vr(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=Xr(i);o=Jr(s[a],e,r)}return o}function Vr(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Ar(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=ii([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(Ar(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Vr(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:$r(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of zr(e.path))i(e,t,r);else i(e,t)})),t}function zr(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=zr(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Br=/^:[\w-]+$/,qr=3,Kr=2,Hr=1,Wr=10,Gr=-2,Qr=e=>"*"===e;function $r(e,t){let n=e.split("/"),r=n.length;return n.some(Qr)&&(r+=Gr),t&&(r+=Kr),n.filter((e=>!Qr(e))).reduce(((e,t)=>e+(Br.test(t)?qr:""===t?Hr:Wr)),r)}function Jr(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=Yr({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=Yr({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:ii([s,u.pathname]),pathnameBase:si(ii([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=ii([s,u.pathnameBase]))}return o}function Yr(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Or("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function Xr(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Or(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Zr(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ei(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ti(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ni(e,t){let n=ti(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function ri(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Lr(e):(i=xr({},e),Ar(!i.pathname||!i.pathname.includes("?"),ei("?","pathname","search",i)),Ar(!i.pathname||!i.pathname.includes("#"),ei("#","pathname","hash",i)),Ar(!i.search||!i.search.includes("#"),ei("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Lr(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:oi(r),hash:ai(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const ii=e=>e.join("/").replace(/\/\/+/g,"/"),si=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oi=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ai=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function li(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const ci=["post","put","patch","delete"],ui=(new Set(ci),["get",...ci]);new Set(ui),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hi.apply(this,arguments)}const di=r.createContext(null);const fi=r.createContext(null);const pi=r.createContext(null);const mi=r.createContext(null);const gi=r.createContext({outlet:null,matches:[],isDataRoute:!1});const yi=r.createContext(null);function vi(){return null!=r.useContext(mi)}function wi(){return vi()||Ar(!1),r.useContext(mi).location}function bi(e){r.useContext(pi).static||r.useLayoutEffect(e)}function _i(){let{isDataRoute:e}=r.useContext(gi);return e?function(){let{router:e}=Oi(Ni.UseNavigateStable),t=Pi(Ai.UseNavigateStable),n=r.useRef(!1);bi((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,hi({fromRouteId:t},i)))}),[e,t]);return i}():function(){vi()||Ar(!1);let e=r.useContext(di),{basename:t,future:n,navigator:i}=r.useContext(pi),{matches:s}=r.useContext(gi),{pathname:o}=wi(),a=JSON.stringify(ni(s,n.v7_relativeSplatPath)),l=r.useRef(!1);bi((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=ri(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:ii([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}function Ei(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(pi),{matches:s}=r.useContext(gi),{pathname:o}=wi(),a=JSON.stringify(ni(s,i.v7_relativeSplatPath));return r.useMemo((()=>ri(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function Si(e,t,n,i){vi()||Ar(!1);let{navigator:s}=r.useContext(pi),{matches:o}=r.useContext(gi),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=wi();if(t){var d;let e="string"===typeof t?Lr(t):t;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||Ar(!1),u=e}else u=h;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=jr(e,{pathname:p});let g=Ci(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ii([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ii([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,i);return t&&g?r.createElement(mi.Provider,{value:{location:hi({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cr.Pop}},g):g}function Ii(){let e=function(){var e;let t=r.useContext(yi),n=Ri(Ai.UseRouteError),i=Pi(Ai.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=li(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const Ti=r.createElement(Ii,null);class ki extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(gi.Provider,{value:this.props.routeContext},r.createElement(yi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xi(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(di);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(gi.Provider,{value:t},i)}function Ci(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||Ar(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||Ti,c&&(u<0&&0===s?(p="route-fallback",!1||Di[p]||(Di[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(xi,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ki,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var Ni=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ni||{}),Ai=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ai||{});function Oi(e){let t=r.useContext(di);return t||Ar(!1),t}function Ri(e){let t=r.useContext(fi);return t||Ar(!1),t}function Pi(e){let t=function(e){let t=r.useContext(gi);return t||Ar(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Ar(!1),n.route.id}const Di={};i.startTransition;function Li(e){Ar(!1)}function Fi(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Cr.Pop,navigator:o,static:a=!1,future:l}=e;vi()&&Ar(!1);let c=t.replace(/^\/*/,"/"),u=r.useMemo((()=>({basename:c,navigator:o,static:a,future:hi({v7_relativeSplatPath:!1},l)})),[c,l,o,a]);"string"===typeof i&&(i=Lr(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=r.useMemo((()=>{let e=Zr(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}}),[c,h,d,f,p,m,s]);return null==g?null:r.createElement(pi.Provider,{value:u},r.createElement(mi.Provider,{children:n,value:g}))}function Mi(e){let{children:t,location:n}=e;return Si(ji(t),n)}new Promise((()=>{}));r.Component;function ji(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ji(e.props.children,s));e.type!==Li&&Ar(!1),e.props.index&&e.props.children&&Ar(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ji(e.props.children,s)),n.push(o)})),n}function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ui.apply(this,arguments)}function Vi(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const zi=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(kC){}new Map;const Bi=i.startTransition;o.flushSync,i.useId;function qi(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),Fr((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Pr("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Dr(t)}),null,e)}({window:s,v5Compat:!0}));let a=o.current,[l,c]=r.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=r.useCallback((e=>{u&&Bi?Bi((()=>c(e))):c(e)}),[c,u]);return r.useLayoutEffect((()=>a.listen(h)),[a,h]),r.createElement(Fi,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}const Ki="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Hi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wi=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Vi(e,zi),{basename:p}=r.useContext(pi),m=!1;if("string"===typeof u&&Hi.test(u)&&(n=u,Ki))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Zr(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(kC){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;vi()||Ar(!1);let{basename:i,navigator:s}=r.useContext(pi),{hash:o,pathname:a,search:l}=Ei(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:ii([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),y=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=_i(),u=wi(),h=Ei(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:Dr(u)===Dr(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});return r.createElement("a",Ui({},f,{href:n||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var Gi,Qi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gi||(Gi={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qi||(Qi={}));const $i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ji={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Yi;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Yi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xi=function(e){return function(e){const t=$i(e);return Ji.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Zi=function(e){try{return Ji.decodeString(e,!0)}catch(kC){console.error("base64Decode failed: ",kC)}return null};function es(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=es(e[n],t[n]));return e}const ts=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ns=()=>{try{return ts()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/bookstore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(kC){return}const t=e&&Zi(e[1]);return t&&JSON.parse(t)})()}catch(kC){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(kC))}},rs=()=>{var e;return null===(e=ns())||void 0===e?void 0:e.config};class is{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ss(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function os(){var e;const t=null===(e=ns())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(kC){return!1}}function as(){return"object"===typeof self&&self.self===self}function ls(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function cs(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function us(){const e=ss();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function hs(){return!os()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ds(){try{return"object"===typeof indexedDB}catch(kC){return!1}}class fs extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ps.prototype.create)}}class ps{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ms,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new fs(n,s,t)}}const ms=/\{\$([^}]+)}/g;function gs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ys(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(vs(n)&&vs(s)){if(!ys(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vs(e){return null!==e&&"object"===typeof e}function ws(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function bs(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function _s(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Es(e,t){const n=new Ss(e,t);return n.subscribe.bind(n)}class Ss{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Is),void 0===r.error&&(r.error=Is),void 0===r.complete&&(r.complete=Is);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(kC){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(kC){"undefined"!==typeof console&&console.error&&console.error(kC)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Is(){}function Ts(e){return e&&e._delegate?e._delegate:e}class ks{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xs="[DEFAULT]";class Cs{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new is;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(kC){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(kC){if(r)return null;throw kC}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch(kC){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(kC){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===xs?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs;return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ns{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Cs(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const As=[];var Os;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Os||(Os={}));const Rs={debug:Os.DEBUG,verbose:Os.VERBOSE,info:Os.INFO,warn:Os.WARN,error:Os.ERROR,silent:Os.SILENT},Ps=Os.INFO,Ds={[Os.DEBUG]:"log",[Os.VERBOSE]:"log",[Os.INFO]:"info",[Os.WARN]:"warn",[Os.ERROR]:"error"},Ls=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ds[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Fs{constructor(e){this.name=e,this._logLevel=Ps,this._logHandler=Ls,this._userLogHandler=null,As.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Os))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Rs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.DEBUG,...t),this._logHandler(this,Os.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.VERBOSE,...t),this._logHandler(this,Os.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.INFO,...t),this._logHandler(this,Os.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.WARN,...t),this._logHandler(this,Os.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.ERROR,...t),this._logHandler(this,Os.ERROR,...t)}}const Ms=(e,t)=>t.some((t=>e instanceof t));let js,Us;const Vs=new WeakMap,zs=new WeakMap,Bs=new WeakMap,qs=new WeakMap,Ks=new WeakMap;let Hs={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return zs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Bs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ws(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Us||(Us=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply($s(this),n),Qs(Vs.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qs(e.apply($s(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call($s(this),t,...r);return Bs.set(s,t.sort?t.sort():[t]),Qs(s)}}function Gs(e){return"function"===typeof e?Ws(e):(e instanceof IDBTransaction&&function(e){if(zs.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));zs.set(e,t)}(e),Ms(e,js||(js=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Hs):e)}function Qs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Qs(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Vs.set(t,e)})).catch((()=>{})),Ks.set(t,e),t}(e);if(qs.has(e))return qs.get(e);const t=Gs(e);return t!==e&&(qs.set(e,t),Ks.set(t,e)),t}const $s=e=>Ks.get(e);const Js=["get","getKey","getAll","getAllKeys","count"],Ys=["put","add","delete","clear"],Xs=new Map;function Zs(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Xs.get(t))return Xs.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ys.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Js.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Xs.set(t,s),s}Hs=(e=>({...e,get:(t,n,r)=>Zs(t,n)||e.get(t,n,r),has:(t,n)=>!!Zs(t,n)||e.has(t,n)}))(Hs);class eo{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const to="@firebase/app",no="0.10.5",ro=new Fs("@firebase/app"),io="@firebase/app-compat",so="@firebase/analytics-compat",oo="@firebase/analytics",ao="@firebase/app-check-compat",lo="@firebase/app-check",co="@firebase/auth",uo="@firebase/auth-compat",ho="@firebase/database",fo="@firebase/database-compat",po="@firebase/functions",mo="@firebase/functions-compat",go="@firebase/installations",yo="@firebase/installations-compat",vo="@firebase/messaging",wo="@firebase/messaging-compat",bo="@firebase/performance",_o="@firebase/performance-compat",Eo="@firebase/remote-config",So="@firebase/remote-config-compat",Io="@firebase/storage",To="@firebase/storage-compat",ko="@firebase/firestore",xo="@firebase/vertexai-preview",Co="@firebase/firestore-compat",No="firebase",Ao="[DEFAULT]",Oo={[to]:"fire-core",[io]:"fire-core-compat",[oo]:"fire-analytics",[so]:"fire-analytics-compat",[lo]:"fire-app-check",[ao]:"fire-app-check-compat",[co]:"fire-auth",[uo]:"fire-auth-compat",[ho]:"fire-rtdb",[fo]:"fire-rtdb-compat",[po]:"fire-fn",[mo]:"fire-fn-compat",[go]:"fire-iid",[yo]:"fire-iid-compat",[vo]:"fire-fcm",[wo]:"fire-fcm-compat",[bo]:"fire-perf",[_o]:"fire-perf-compat",[Eo]:"fire-rc",[So]:"fire-rc-compat",[Io]:"fire-gcs",[To]:"fire-gcs-compat",[ko]:"fire-fst",[Co]:"fire-fst-compat",[xo]:"fire-vertex","fire-js":"fire-js",[No]:"fire-js-all"},Ro=new Map,Po=new Map,Do=new Map;function Lo(e,t){try{e.container.addComponent(t)}catch(kC){ro.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kC)}}function Fo(e,t){e.container.addOrOverwriteComponent(t)}function Mo(e){const t=e.name;if(Do.has(t))return ro.debug("There were multiple attempts to register component ".concat(t,".")),!1;Do.set(t,e);for(const n of Ro.values())Lo(n,e);for(const n of Po.values())Lo(n,e);return!0}function jo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ao;jo(e,t).clearInstance(n)}function Vo(e){return void 0!==e.options}function zo(e){return void 0!==e.settings}function Bo(){Do.clear()}const qo=new ps("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ko{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ks("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qo.create("app-deleted",{appName:this._name})}}class Ho extends Ko{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Xo(to,no,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Yo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw qo.create("server-app-deleted")}}const Wo="10.12.2";function Go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ao,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw qo.create("bad-app-name",{appName:String(i)});if(n||(n=rs()),!n)throw qo.create("no-options");const s=Ro.get(i);if(s){if(ys(n,s.options)&&ys(r,s.config))return s;throw qo.create("duplicate-app",{appName:i})}const o=new Ns(i);for(const l of Do.values())o.addComponent(l);const a=new Ko(n,r,o);return Ro.set(i,a),a}function Qo(e,t){if(as())throw qo.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Vo(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw qo.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Po.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Ns(i);for(const c of Do.values())a.addComponent(c);const l=new Ho(n,t,i,a);return Po.set(i,l),l}function $o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;const t=Ro.get(e);if(!t&&e===Ao&&rs())return Go();if(!t)throw qo.create("no-app",{appName:e});return t}function Jo(){return Array.from(Ro.values())}async function Yo(e){let t=!1;const n=e.name;if(Ro.has(n))t=!0,Ro.delete(n);else if(Po.has(n)){e.decRefCount()<=0&&(Po.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Xo(e,t,n){var r;let i=null!==(r=Oo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ro.warn(e.join(" "))}Mo(new ks("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Zo(e,t){if(null!==e&&"function"!==typeof e)throw qo.create("invalid-log-argument");!function(e,t){for(const n of As){let r=null;t&&t.level&&(r=Rs[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Os[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ea(e){var t;t=e,As.forEach((e=>{e.setLogLevel(t)}))}const ta="firebase-heartbeat-database",na=1,ra="firebase-heartbeat-store";let ia=null;function sa(){return ia||(ia=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Qs(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Qs(o.result),e.oldVersion,e.newVersion,Qs(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ta,na,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ra)}catch(kC){console.warn(kC)}}}).catch((e=>{throw qo.create("idb-open",{originalErrorMessage:e.message})}))),ia}async function oa(e,t){try{const n=(await sa()).transaction(ra,"readwrite"),r=n.objectStore(ra);await r.put(t,aa(e)),await n.done}catch(kC){if(kC instanceof fs)ro.warn(kC.message);else{const t=qo.create("idb-set",{originalErrorMessage:null===kC||void 0===kC?void 0:kC.message});ro.warn(t.message)}}}function aa(e){return"".concat(e.name,"!").concat(e.options.appId)}class la{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ua(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ca();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ca(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ha(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ha(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Xi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ca(){return(new Date).toISOString().substring(0,10)}class ua{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ds()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await sa()).transaction(ra),n=await t.objectStore(ra).get(aa(e));return await t.done,n}catch(kC){if(kC instanceof fs)ro.warn(kC.message);else{const t=qo.create("idb-get",{originalErrorMessage:null===kC||void 0===kC?void 0:kC.message});ro.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return oa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return oa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ha(e){return Xi(JSON.stringify({version:2,heartbeats:e})).length}var da;da="",Mo(new ks("platform-logger",(e=>new eo(e)),"PRIVATE")),Mo(new ks("heartbeat",(e=>new la(e)),"PRIVATE")),Xo(to,no,da),Xo(to,no,"esm2017"),Xo("fire-js","");class fa{constructor(e,t){this._delegate=e,this.firebase=t,Lo(e,new ks("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Yo(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ao;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Lo(this._delegate,e)}_addOrOverwriteComponent(e){Fo(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pa=new ps("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ma=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Go(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(gs(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Xo,setLogLevel:ea,onLog:Zo,apps:null,SDK_VERSION:Wo,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(Mo(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw pa.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&es(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!gs(n,e=e||Ao))throw pa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(fa);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){es(n,e)},createSubscribe:Es,ErrorFactory:ps,deepExtend:es}),n}(),ga=new Fs("@firebase/app-compat");if(as()&&void 0!==self.firebase){ga.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ga.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ya=ma;!function(e){Xo("@firebase/app-compat","0.2.35",e)}();ya.registerVersion("firebase","10.12.2","app-compat");var va,wa,ba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_a={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,wa=_a.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},va=_a.Integer=r}).apply("undefined"!==typeof ba?ba:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ea,Sa,Ia,Ta,ka,xa,Ca,Na,Aa,Oa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ra={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Oa&&Oa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function I(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,C=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);x=()=>{e.then(O)}};var O=()=>{for(var e;e=I();){try{e.h.call(e.g)}catch(n){S(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:F[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var F={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var K="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[K]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function $(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)$(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[K]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[K])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){$(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function we(){P.call(this,"c")}h(ve,P),h(we,P);var be={},_e=null;function Ee(){return _e=_e||new ne}function Se(e){P.call(this,be.La,e)}function Ie(e){const t=Ee();re(t,new Se(t))}function Te(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ee();re(t,new Te(t,e))}function xe(e,t){P.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Se,P),be.STAT_EVENT="statevent",h(Te,P),be.Ma="timingevent",h(xe,P),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Oe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Oe=new De;var Me={},je={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Fe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ie(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,Ke(e,e.I)}function Ke(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):$t(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ie()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Ie(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ge(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==je){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),We(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ie(),ke(17)),Ge(this),this.s=2,We(this)):Ke(this,this.S-e)};var $e=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){Et(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return Et(e),t=kt(e,t),e.g.has(t)}function Tt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(kC){throw t.push(r+"type="+encodeURIComponent("_badmap")),kC}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ot(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ft(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,It(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Ot(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Ot,ne),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Dt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var jt=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Kt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(kC){}}}function Kt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(La){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function $t(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;x||A(),C||(x(),C=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Ft(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Nt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;x||A(),C||(x(),C=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ft(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new xe(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(xt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),xt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)})).catch((()=>{clearTimeout(r),xt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),Yt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?me(this.o):me(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Ft(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){$t(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new $e(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Aa=Ra.createWebChannelTransport=function(){return new mn},Na=Ra.getStatEventTarget=function(){return Ee()},Ca=Ra.Event=be,xa=Ra.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,ka=Ra.ErrorCode=Re,Pe.COMPLETE="complete",Ta=Ra.EventType=Pe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ia=Ra.WebChannel=ge,Sa=Ra.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Ea=Ra.XhrIo=Mt}).apply("undefined"!==typeof Oa?Oa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Pa="@firebase/firestore";class Da{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Da.UNAUTHENTICATED=new Da(null),Da.GOOGLE_CREDENTIALS=new Da("google-credentials-uid"),Da.FIRST_PARTY=new Da("first-party-uid"),Da.MOCK_USER=new Da("mock-user");let La="10.12.1";const Fa=new Fs("@firebase/firestore");function Ma(){return Fa.logLevel}function ja(e){if(Fa.logLevel<=Os.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(za);Fa.debug("Firestore (".concat(La,"): ").concat(e),...i)}}function Ua(e){if(Fa.logLevel<=Os.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(za);Fa.error("Firestore (".concat(La,"): ").concat(e),...i)}}function Va(e){if(Fa.logLevel<=Os.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(za);Fa.warn("Firestore (".concat(La,"): ").concat(e),...i)}}function za(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(La,") INTERNAL ASSERTION FAILED: ")+e;throw Ua(t),new Error(t)}function qa(e,t){e||Ba()}function Ka(e,t){return e}const Ha={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wa extends fs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ga{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Qa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $a{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Da.UNAUTHENTICATED)))}shutdown(){}}class Ja{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ya{constructor(e){this.t=e,this.currentUser=Da.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ga,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ja("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ja("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ga)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ja("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qa("string"==typeof t.accessToken),new Qa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qa(null===e||"string"==typeof e),new Da(e)}}class Xa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Da.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Za{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Da.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class el{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ja("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ja("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ja("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ja("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(qa("string"==typeof e.token),this.R=e.token,new el(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class rl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function il(e,t){return e<t?-1:e>t?1:0}function sl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function ol(e){return e+"\0"}class al{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wa(Ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wa(Ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Wa(Ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wa(Ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return al.fromMillis(Date.now())}static fromDate(e){return al.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new al(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?il(this.nanoseconds,e.nanoseconds):il(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ll{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ll(e)}static min(){return new ll(new al(0,0))}static max(){return new ll(new al(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ba(),void 0===n?n=e.length-t:n>e.length-t&&Ba(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ul extends cl{construct(e,t,n){return new ul(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ul(e)}static emptyPath(){return new ul([])}}const hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dl extends cl{construct(e,t,n){return new dl(e,t,n)}static isValidIdentifier(e){return hl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Wa(Ha.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wa(Ha.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Wa(Ha.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dl(t)}static emptyPath(){return new dl([])}}class fl{constructor(e){this.path=e}static fromPath(e){return new fl(ul.fromString(e))}static fromName(e){return new fl(ul.fromString(e).popFirst(5))}static empty(){return new fl(ul.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ul.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ul.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fl(new ul(e.slice()))}}class pl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ml(e){return e.fields.find((e=>2===e.kind))}function gl(e){return e.fields.filter((e=>2!==e.kind))}pl.UNKNOWN_ID=-1;class yl{constructor(e,t){this.fieldPath=e,this.kind=t}}class vl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vl(0,_l.min())}}function wl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ll.fromTimestamp(1e9===r?new al(n+1,0):new al(n,r));return new _l(i,fl.empty(),t)}function bl(e){return new _l(e.readTime,e.key,-1)}class _l{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _l(ll.min(),fl.empty(),-1)}static max(){return new _l(ll.max(),fl.empty(),-1)}}function El(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=fl.comparator(e.documentKey,t.documentKey),0!==n?n:il(e.largestBatchId,t.largestBatchId))}const Sl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Il{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tl(e){if(e.code!==Ha.FAILED_PRECONDITION||e.message!==Sl)throw e;ja("LocalStore","Unexpectedly lost primary lease")}class kl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ba(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new kl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof kl?t:kl.resolve(t)}catch(e){return kl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):kl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):kl.reject(t)}static resolve(e){return new kl(((t,n)=>{t(e)}))}static reject(e){return new kl(((t,n)=>{n(e)}))}static waitFor(e){return new kl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=kl.resolve(!1);for(const n of e)t=t.next((e=>e?kl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new kl(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new kl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class xl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ga,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ol(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Fl(t.target.error);this.V.reject(new Ol(e,n))}}static open(e,t,n,r){try{return new xl(t,e.transaction(r,n))}catch(e){throw new Ol(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ja("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pl(t)}}class Cl{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Cl.S(ss())&&Ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ja("SimpleDb","Removing database:",e),Dl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ds())return!1;if(Cl.C())return!0;const e=ss(),t=Cl.S(e),n=0<t&&t<10,r=Nl(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ja("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ol(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Wa(Ha.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Wa(Ha.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ol(e,r))},r.onupgradeneeded=e=>{ja("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{ja("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=xl.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),kl.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(ja("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Nl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Al{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Dl(this.B.delete())}}class Ol extends Wa{constructor(e,t){super(Ha.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Rl(e){return"IndexedDbTransactionError"===e.name}class Pl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ja("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ja("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Dl(n)}add(e){return ja("SimpleDb","ADD",this.store.name,e,e),Dl(this.store.add(e))}get(e){return Dl(this.store.get(e)).next((t=>(void 0===t&&(t=null),ja("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ja("SimpleDb","DELETE",this.store.name,e),Dl(this.store.delete(e))}count(){return ja("SimpleDb","COUNT",this.store.name),Dl(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new kl(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new kl(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){ja("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new kl(((n,r)=>{t.onerror=e=>{const t=Fl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new kl(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Al(i),o=t(i.primaryKey,i.value,s);if(o instanceof kl){const e=o.catch((e=>(s.done(),kl.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>kl.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Dl(e){return new kl(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Fl(e.target.error);n(t)}}))}let Ll=!1;function Fl(e){const t=Cl.S(ss());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Wa("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ll||(Ll=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ml{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){ja("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ja("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Rl(e)?ja("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Tl(e)}await this.X(6e4)}))}}class jl{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return kl.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ja("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(ja("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=bl(t);El(r,n)>0&&(n=r)})),new _l(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ul{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Vl(e){return null==e}function zl(e){return 0===e&&1/e==-1/0}function Bl(e){return"number"==typeof e&&Number.isInteger(e)&&!zl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ql(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Hl(t)),t=Kl(e.get(n),t);return Hl(t)}function Kl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Hl(e){return e+"\x01\x01"}function Wl(e){const t=e.length;if(qa(t>=2),2===t)return qa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ul.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ba(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ba()}s=t+2}return new ul(r)}Ul.oe=-1;const Gl=["userId","batchId"];function Ql(e,t){return[e,ql(t)]}function $l(e,t,n){return[e,ql(t),n]}const Jl={},Yl=["prefixPath","collectionGroup","readTime","documentId"],Xl=["prefixPath","collectionGroup","documentId"],Zl=["collectionGroup","readTime","prefixPath","documentId"],ec=["canonicalId","targetId"],tc=["targetId","path"],nc=["path","targetId"],rc=["collectionId","parent"],ic=["indexId","uid"],sc=["uid","sequenceNumber"],oc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ac=["indexId","uid","orderedDocumentKey"],lc=["userId","collectionPath","documentId"],cc=["userId","collectionPath","largestBatchId"],uc=["userId","collectionGroup","largestBatchId"],hc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dc=[...hc,"documentOverlays"],fc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pc=fc,mc=[...pc,"indexConfiguration","indexState","indexEntries"],gc=mc;class yc extends Il{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function vc(e,t){const n=Ka(e);return Cl.F(n._e,t)}function wc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _c(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ec{constructor(e,t){this.comparator=e,this.root=t||Ic.EMPTY}insert(e,t){return new Ec(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ic.BLACK,null,null))}remove(e){return new Ec(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ic.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ic{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ic.RED,this.left=null!=r?r:Ic.EMPTY,this.right=null!=i?i:Ic.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ic(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ic.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ic.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ic.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ic.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ba();if(this.right.isRed())throw Ba();const e=this.left.check();if(e!==this.right.check())throw Ba();return e+(this.isRed()?0:1)}}Ic.EMPTY=null,Ic.RED=!0,Ic.BLACK=!1,Ic.EMPTY=new class{constructor(){this.size=0}get key(){throw Ba()}get value(){throw Ba()}get color(){throw Ba()}get left(){throw Ba()}get right(){throw Ba()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ic(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tc{constructor(e){this.comparator=e,this.data=new Ec(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kc(this.data.getIterator())}getIteratorFrom(e){return new kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Tc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tc(this.comparator);return t.data=e,t}}class kc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xc(e){return e.hasNext()?e.getNext():void 0}class Cc{constructor(e){this.fields=e,e.sort(dl.comparator)}static empty(){return new Cc([])}unionWith(e){let t=new Tc(dl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Cc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Nc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ac{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nc("Invalid base64 string: "+e):e}}(e);return new Ac(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ac(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return il(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ac.EMPTY_BYTE_STRING=new Ac("");const Oc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rc(e){if(qa(!!e),"string"==typeof e){let t=0;const n=Oc.exec(e);if(qa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pc(e.seconds),nanos:Pc(e.nanos)}}function Pc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dc(e){return"string"==typeof e?Ac.fromBase64String(e):Ac.fromUint8Array(e)}function Lc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fc(e){const t=e.mapValue.fields.__previous_value__;return Lc(t)?Fc(t):t}function Mc(e){const t=Rc(e.mapValue.fields.__local_write_time__.timestampValue);return new al(t.seconds,t.nanos)}class jc{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Uc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}const Vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zc={nullValue:"NULL_VALUE"};function Bc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lc(e)?4:nu(e)?9007199254740991:10:Ba()}function qc(e,t){if(e===t)return!0;const n=Bc(e);if(n!==Bc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mc(e).isEqual(Mc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Rc(e.timestampValue),r=Rc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dc(e.bytesValue).isEqual(Dc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pc(e.geoPointValue.latitude)===Pc(t.geoPointValue.latitude)&&Pc(e.geoPointValue.longitude)===Pc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pc(e.integerValue)===Pc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pc(e.doubleValue),r=Pc(t.doubleValue);return n===r?zl(n)===zl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sl(e.arrayValue.values||[],t.arrayValue.values||[],qc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wc(n)!==wc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qc(n[i],r[i])))return!1;return!0}(e,t);default:return Ba()}}function Kc(e,t){return void 0!==(e.values||[]).find((e=>qc(e,t)))}function Hc(e,t){if(e===t)return 0;const n=Bc(e),r=Bc(t);if(n!==r)return il(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return il(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pc(e.integerValue||e.doubleValue),r=Pc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wc(e.timestampValue,t.timestampValue);case 4:return Wc(Mc(e),Mc(t));case 5:return il(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Dc(e),r=Dc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=il(n[i],r[i]);if(0!==e)return e}return il(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=il(Pc(e.latitude),Pc(t.latitude));return 0!==n?n:il(Pc(e.longitude),Pc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Hc(n[i],r[i]);if(e)return e}return il(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vc.mapValue&&t===Vc.mapValue)return 0;if(e===Vc.mapValue)return 1;if(t===Vc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=il(r[o],s[o]);if(0!==e)return e;const t=Hc(n[r[o]],i[s[o]]);if(0!==t)return t}return il(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ba()}}function Wc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return il(e,t);const n=Rc(e),r=Rc(t),i=il(n.seconds,r.seconds);return 0!==i?i:il(n.nanos,r.nanos)}function Gc(e){return Qc(e)}function Qc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Rc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Dc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return fl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Qc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Qc(e.fields[i]));return n+"}"}(e.mapValue):Ba()}function $c(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jc(e){return!!e&&"integerValue"in e}function Yc(e){return!!e&&"arrayValue"in e}function Xc(e){return!!e&&"nullValue"in e}function Zc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eu(e){return!!e&&"mapValue"in e}function tu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=tu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ru(e){return"nullValue"in e?zc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$c(Uc.empty(),fl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ba()}function iu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$c(Uc.empty(),fl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vc:Ba()}function su(e,t){const n=Hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ou(e,t){const n=Hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class au{constructor(e){this.value=e}static empty(){return new au({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!eu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=dl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=tu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());eu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new au(tu(this.value))}}function lu(e){const t=[];return bc(e.fields,((e,n)=>{const r=new dl([e]);if(eu(n)){const e=lu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Cc(t)}class cu{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new cu(e,0,ll.min(),ll.min(),ll.min(),au.empty(),0)}static newFoundDocument(e,t,n,r){return new cu(e,1,t,ll.min(),n,r,0)}static newNoDocument(e,t){return new cu(e,2,t,ll.min(),ll.min(),au.empty(),0)}static newUnknownDocument(e,t){return new cu(e,3,t,ll.min(),ll.min(),au.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ll.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=au.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=au.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ll.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}function hu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?fl.comparator(fl.fromName(o.referenceValue),n.key):Hc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function du(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qc(e.position[n],t.position[n]))return!1;return!0}class fu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function pu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mu{}class gu extends mu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ku(e,t,n):"array-contains"===t?new Au(e,n):"in"===t?new Ou(e,n):"not-in"===t?new Ru(e,n):"array-contains-any"===t?new Pu(e,n):new gu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xu(e,n):new Cu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hc(t,this.value)):null!==t&&Bc(this.value)===Bc(t)&&this.matchesComparison(Hc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ba()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yu extends mu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new yu(e,t)}matches(e){return vu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vu(e){return"and"===e.op}function wu(e){return"or"===e.op}function bu(e){return _u(e)&&vu(e)}function _u(e){for(const t of e.filters)if(t instanceof yu)return!1;return!0}function Eu(e){if(e instanceof gu)return e.field.canonicalString()+e.op.toString()+Gc(e.value);if(bu(e))return e.filters.map((e=>Eu(e))).join(",");{const t=e.filters.map((e=>Eu(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Su(e,t){return e instanceof gu?function(e,t){return t instanceof gu&&e.op===t.op&&e.field.isEqual(t.field)&&qc(e.value,t.value)}(e,t):e instanceof yu?function(e,t){return t instanceof yu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Su(n,t.filters[r])),!0)}(e,t):void Ba()}function Iu(e,t){const n=e.filters.concat(t);return yu.create(n,e.op)}function Tu(e){return e instanceof gu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gc(e.value))}(e):e instanceof yu?function(e){return e.op.toString()+" {"+e.getFilters().map(Tu).join(" ,")+"}"}(e):"Filter"}class ku extends gu{constructor(e,t,n){super(e,t,n),this.key=fl.fromName(n.referenceValue)}matches(e){const t=fl.comparator(e.key,this.key);return this.matchesComparison(t)}}class xu extends gu{constructor(e,t){super(e,"in",t),this.keys=Nu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Cu extends gu{constructor(e,t){super(e,"not-in",t),this.keys=Nu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Nu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>fl.fromName(e.referenceValue)))}class Au extends gu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yc(t)&&Kc(t.arrayValue,this.value)}}class Ou extends gu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kc(this.value.arrayValue,t)}}class Ru extends gu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kc(this.value.arrayValue,t)}}class Pu extends gu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Kc(this.value.arrayValue,e)))}}class Du{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Lu(e){return new Du(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Fu(e){const t=Ka(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Eu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Vl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gc(e))).join(",")),t.ue=e}return t.ue}function Mu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!pu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Su(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!du(e.startAt,t.startAt)&&du(e.endAt,t.endAt)}function ju(e){return fl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Uu(e,t){return e.filters.filter((e=>e instanceof gu&&e.field.isEqual(t)))}function Vu(e,t,n){let r=zc,i=!0;for(const s of Uu(e,t)){let e=zc,t=!0;switch(s.op){case"<":case"<=":e=ru(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=zc}su({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];su({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function zu(e,t,n){let r=Vc,i=!0;for(const s of Uu(e,t)){let e=Vc,t=!0;switch(s.op){case">=":case">":e=iu(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Vc}ou({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ou({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qu(e,t,n,r,i,s,o,a){return new Bu(e,t,n,r,i,s,o,a)}function Ku(e){return new Bu(e)}function Hu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wu(e){return null!==e.collectionGroup}function Gu(e){const t=Ka(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Tc(dl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new fu(r,n))})),e.has(dl.keyField().canonicalString())||t.ce.push(new fu(dl.keyField(),n))}return t.ce}function Qu(e){const t=Ka(e);return t.le||(t.le=$u(t,Gu(e))),t.le}function $u(e,t){if("F"===e.limitType)return Lu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fu(e.field,t)}));const n=e.endAt?new uu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new uu(e.startAt.position,e.startAt.inclusive):null;return Lu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ju(e,t){const n=e.filters.concat([t]);return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yu(e,t,n){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xu(e,t){return Mu(Qu(e),Qu(t))&&e.limitType===t.limitType}function Zu(e){return"".concat(Fu(Qu(e)),"|lt:").concat(e.limitType)}function eh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Tu(e))).join(", "),"]")),Vl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gc(e))).join(",")),"Target(".concat(t,")")}(Qu(e)),"; limitType=").concat(e.limitType,")")}function th(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Gu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=hu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gu(e),t))&&!(e.endAt&&!function(e,t,n){const r=hu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gu(e),t))}(e,t)}function nh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rh(e){return(t,n)=>{let r=!1;for(const i of Gu(e)){const e=ih(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ih(e,t,n){const r=e.field.isKeyField()?fl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Hc(r,i):Ba()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ba()}}class sh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return _c(this.inner)}size(){return this.innerSize}}const oh=new Ec(fl.comparator);function ah(){return oh}const lh=new Ec(fl.comparator);function ch(){let e=lh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function uh(e){let t=lh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function hh(){return fh()}function dh(){return fh()}function fh(){return new sh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ph=new Ec(fl.comparator),mh=new Tc(fl.comparator);function gh(){let e=mh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const yh=new Tc(il);function vh(){return yh}function wh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(t)?"-0":t}}function bh(e){return{integerValue:""+e}}function _h(e,t){return Bl(t)?bh(t):wh(e,t)}class Eh{constructor(){this._=void 0}}function Sh(e,t,n){return e instanceof kh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lc(t)&&(t=Fc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xh?Ch(e,t):e instanceof Nh?Ah(e,t):function(e,t){const n=Th(e,t),r=Rh(n)+Rh(e.Pe);return Jc(n)&&Jc(e.Pe)?bh(r):wh(e.serializer,r)}(e,t)}function Ih(e,t,n){return e instanceof xh?Ch(e,t):e instanceof Nh?Ah(e,t):n}function Th(e,t){return e instanceof Oh?function(e){return Jc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class kh extends Eh{}class xh extends Eh{constructor(e){super(),this.elements=e}}function Ch(e,t){const n=Ph(t);for(const r of e.elements)n.some((e=>qc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Nh extends Eh{constructor(e){super(),this.elements=e}}function Ah(e,t){let n=Ph(t);for(const r of e.elements)n=n.filter((e=>!qc(e,r)));return{arrayValue:{values:n}}}class Oh extends Eh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Rh(e){return Pc(e.integerValue||e.doubleValue)}function Ph(e){return Yc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Dh{constructor(e,t){this.field=e,this.transform=t}}class Lh{constructor(e,t){this.version=e,this.transformResults=t}}class Fh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fh}static exists(e){return new Fh(void 0,e)}static updateTime(e){return new Fh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class jh{}function Uh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $h(e.key,Fh.none()):new Kh(e.key,e.data,Fh.none());{const n=e.data,r=au.empty();let i=new Tc(dl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Hh(e.key,r,new Cc(i.toArray()),Fh.none())}}function Vh(e,t,n){e instanceof Kh?function(e,t,n){const r=e.value.clone(),i=Gh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hh?function(e,t,n){if(!Mh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zh(e,t,n,r){return e instanceof Kh?function(e,t,n,r){if(!Mh(e.precondition,t))return n;const i=e.value.clone(),s=Qh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hh?function(e,t,n,r){if(!Mh(e.precondition,t))return n;const i=Qh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Wh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Mh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Th(r.transform,e||null);null!=i&&(null===n&&(n=au.empty()),n.set(r.field,i))}return n||null}function qh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xh&&t instanceof xh||e instanceof Nh&&t instanceof Nh?sl(e.elements,t.elements,qc):e instanceof Oh&&t instanceof Oh?qc(e.Pe,t.Pe):e instanceof kh&&t instanceof kh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Kh extends jh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hh extends jh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Gh(e,t,n){const r=new Map;qa(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ih(o,a,n[i]))}return r}function Qh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Sh(e,s,t))}return r}class $h extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jh extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=zh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=zh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=dh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Uh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ll.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gh())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,((e,t)=>qh(e,t)))&&sl(this.baseMutations,e.baseMutations,((e,t)=>qh(e,t)))}}class Xh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qa(e.mutations.length===n.length);let r=ph;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xh(e,t,n,r)}}class Zh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ed{constructor(e,t){this.count=e,this.unchangedNames=t}}var td,nd;function rd(e){switch(e){default:return Ba();case Ha.CANCELLED:case Ha.UNKNOWN:case Ha.DEADLINE_EXCEEDED:case Ha.RESOURCE_EXHAUSTED:case Ha.INTERNAL:case Ha.UNAVAILABLE:case Ha.UNAUTHENTICATED:return!1;case Ha.INVALID_ARGUMENT:case Ha.NOT_FOUND:case Ha.ALREADY_EXISTS:case Ha.PERMISSION_DENIED:case Ha.FAILED_PRECONDITION:case Ha.ABORTED:case Ha.OUT_OF_RANGE:case Ha.UNIMPLEMENTED:case Ha.DATA_LOSS:return!0}}function id(e){if(void 0===e)return Ua("GRPC error has no .code"),Ha.UNKNOWN;switch(e){case td.OK:return Ha.OK;case td.CANCELLED:return Ha.CANCELLED;case td.UNKNOWN:return Ha.UNKNOWN;case td.DEADLINE_EXCEEDED:return Ha.DEADLINE_EXCEEDED;case td.RESOURCE_EXHAUSTED:return Ha.RESOURCE_EXHAUSTED;case td.INTERNAL:return Ha.INTERNAL;case td.UNAVAILABLE:return Ha.UNAVAILABLE;case td.UNAUTHENTICATED:return Ha.UNAUTHENTICATED;case td.INVALID_ARGUMENT:return Ha.INVALID_ARGUMENT;case td.NOT_FOUND:return Ha.NOT_FOUND;case td.ALREADY_EXISTS:return Ha.ALREADY_EXISTS;case td.PERMISSION_DENIED:return Ha.PERMISSION_DENIED;case td.FAILED_PRECONDITION:return Ha.FAILED_PRECONDITION;case td.ABORTED:return Ha.ABORTED;case td.OUT_OF_RANGE:return Ha.OUT_OF_RANGE;case td.UNIMPLEMENTED:return Ha.UNIMPLEMENTED;case td.DATA_LOSS:return Ha.DATA_LOSS;default:return Ba()}}(nd=td||(td={}))[nd.OK=0]="OK",nd[nd.CANCELLED=1]="CANCELLED",nd[nd.UNKNOWN=2]="UNKNOWN",nd[nd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nd[nd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nd[nd.NOT_FOUND=5]="NOT_FOUND",nd[nd.ALREADY_EXISTS=6]="ALREADY_EXISTS",nd[nd.PERMISSION_DENIED=7]="PERMISSION_DENIED",nd[nd.UNAUTHENTICATED=16]="UNAUTHENTICATED",nd[nd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nd[nd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nd[nd.ABORTED=10]="ABORTED",nd[nd.OUT_OF_RANGE=11]="OUT_OF_RANGE",nd[nd.UNIMPLEMENTED=12]="UNIMPLEMENTED",nd[nd.INTERNAL=13]="INTERNAL",nd[nd.UNAVAILABLE=14]="UNAVAILABLE",nd[nd.DATA_LOSS=15]="DATA_LOSS";let sd=null;function od(){return new TextEncoder}const ad=new va([4294967295,4294967295],0);function ld(e){const t=od().encode(e),n=new wa;return n.update(t),new Uint8Array(n.digest())}function cd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new va([n,r],0),new va([i,s],0)]}class ud{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hd("Invalid padding: ".concat(t));if(n<0)throw new hd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new hd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new hd("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=va.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(va.fromNumber(n)));return 1===r.compare(ad)&&(r=new va([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ud(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new dd(ll.min(),r,new Ec(il),ah(),gh())}}class fd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fd(n,t,gh(),gh(),gh())}}class pd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class md{constructor(e,t){this.targetId=e,this.me=t}}class gd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ac.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yd{constructor(){this.fe=0,this.ge=bd(),this.pe=Ac.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=gh(),t=gh(),n=gh();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ba()}})),new fd(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=bd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qa(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vd{constructor(e){this.Le=e,this.Be=new Map,this.ke=ah(),this.qe=wd(),this.Qe=new Ec(il)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ba()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(ju(i))if(0===n){const e=new fl(i.path);this.Ue(t,e,cu.newNoDocument(e,ll.min()))}else qa(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==sd||sd.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Dc(n).toUint8Array()}catch(e){if(e instanceof Nc)return Va("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ud(s,r,i)}catch(e){return Va(e instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&ju(i.target)){const t=new fl(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,cu.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=gh();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new dd(e,t,this.Qe,this.ke,n);return this.ke=ah(),this.qe=wd(),this.Qe=new Ec(il),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new yd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Tc(il),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ja("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function wd(){return new Ec(fl.comparator)}function bd(){return new Ec(fl.comparator)}const _d={asc:"ASCENDING",desc:"DESCENDING"},Ed={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sd={and:"AND",or:"OR"};class Id{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Td(e,t){return e.useProto3Json||Vl(t)?t:{value:t}}function kd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Cd(e,t){return kd(e,t.toTimestamp())}function Nd(e){return qa(!!e),ll.fromTimestamp(function(e){const t=Rc(e);return new al(t.seconds,t.nanos)}(e))}function Ad(e,t){return Od(e,t).canonicalString()}function Od(e,t){const n=function(e){return new ul(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Rd(e){const t=ul.fromString(e);return qa(ef(t)),t}function Pd(e,t){return Ad(e.databaseId,t.path)}function Dd(e,t){const n=Rd(t);if(n.get(1)!==e.databaseId.projectId)throw new Wa(Ha.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wa(Ha.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fl(jd(n))}function Ld(e,t){return Ad(e.databaseId,t)}function Fd(e){const t=Rd(e);return 4===t.length?ul.emptyPath():jd(t)}function Md(e){return new ul(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jd(e){return qa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ud(e,t,n){return{name:Pd(e,t),fields:n.value.mapValue.fields}}function Vd(e,t,n){const r=Dd(e,t.name),i=Nd(t.updateTime),s=t.createTime?Nd(t.createTime):ll.min(),o=new au({mapValue:{fields:t.fields}}),a=cu.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zd(e,t){let n;if(t instanceof Kh)n={update:Ud(e,t.key,t.value)};else if(t instanceof $h)n={delete:Pd(e,t.key)};else if(t instanceof Hh)n={update:Ud(e,t.key,t.data),updateMask:Zd(t.fieldMask)};else{if(!(t instanceof Jh))return Ba();n={verify:Pd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof kh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Oh)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ba()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ba()}(e,t.precondition)),n}function Bd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Fh.updateTime(Nd(e.updateTime)):void 0!==e.exists?Fh.exists(e.exists):Fh.none()}(t.currentDocument):Fh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)qa("REQUEST_TIME"===t.setToServerValue),n=new kh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new xh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Nh(e)}else"increment"in t?n=new Oh(e,t.increment):Ba();const r=dl.fromServerFormat(t.fieldPath);return new Dh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Dd(e,t.update.name),s=new au({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Cc(t.map((e=>dl.fromServerFormat(e))))}(t.updateMask);return new Hh(i,s,e,n,r)}return new Kh(i,s,n,r)}if(t.delete){const r=Dd(e,t.delete);return new $h(r,n)}if(t.verify){const r=Dd(e,t.verify);return new Jh(r,n)}return Ba()}function qd(e,t){return{documents:[Ld(e,t.path)]}}function Kd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ld(e,i);const s=function(e){if(0!==e.length)return Xd(yu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Jd(e.field),direction:Gd(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Td(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Hd(e){let t=Fd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qa(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Wd(e);return t instanceof yu&&bu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new fu(Yd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Vl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new uu(n,t)}(n.endAt)),qu(t,i,o,s,a,"F",l,c)}function Wd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yd(e.unaryFilter.field);return gu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yd(e.unaryFilter.field);return gu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yd(e.unaryFilter.field);return gu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yd(e.unaryFilter.field);return gu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ba()}}(e):void 0!==e.fieldFilter?function(e){return gu.create(Yd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ba()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yu.create(e.compositeFilter.filters.map((e=>Wd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ba()}}(e.compositeFilter.op))}(e):Ba()}function Gd(e){return _d[e]}function Qd(e){return Ed[e]}function $d(e){return Sd[e]}function Jd(e){return{fieldPath:e.canonicalString()}}function Yd(e){return dl.fromServerFormat(e.fieldPath)}function Xd(e){return e instanceof gu?function(e){if("=="===e.op){if(Zc(e.value))return{unaryFilter:{field:Jd(e.field),op:"IS_NAN"}};if(Xc(e.value))return{unaryFilter:{field:Jd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zc(e.value))return{unaryFilter:{field:Jd(e.field),op:"IS_NOT_NAN"}};if(Xc(e.value))return{unaryFilter:{field:Jd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jd(e.field),op:Qd(e.op),value:e.value}}}(e):e instanceof yu?function(e){const t=e.getFilters().map((e=>Xd(e)));return 1===t.length?t[0]:{compositeFilter:{op:$d(e.op),filters:t}}}(e):Ba()}function Zd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ef(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class tf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ll.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ll.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ac.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new tf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nf{constructor(e){this.ct=e}}function rf(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Pd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:kd(e,t.version.toTimestamp()),createTime:kd(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:of(t.version)};else{if(!t.isUnknownDocument())return Ba();r.unknownDocument={path:n.path.toArray(),version:of(t.version)}}return r}function sf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function of(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function af(e){const t=new al(e.seconds,e.nanoseconds);return ll.fromTimestamp(t)}function lf(e,t){const n=(t.baseMutations||[]).map((t=>Bd(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Bd(e.ct,t))),i=al.fromMillis(t.localWriteTimeMs);return new Yh(t.batchId,i,n,r)}function cf(e){const t=af(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?af(e.lastLimboFreeSnapshotVersion):ll.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return qa(1===e.documents.length),Qu(Ku(Fd(e.documents[0])))}(e.query):function(e){return Qu(Hd(e))}(e.query),new tf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Ac.fromBase64String(e.resumeToken))}function uf(e,t){const n=of(t.snapshotVersion),r=of(t.lastLimboFreeSnapshotVersion);let i;i=ju(t.target)?qd(e.ct,t.target):Kd(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Fu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hf(e){const t=Hd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yu(t,t.limit,"L"):t}function df(e,t){return new Zh(t.largestBatchId,Bd(e.ct,t.overlayMutation))}function ff(e,t){const n=t.path.lastSegment();return[e,ql(t.path.popLast()),n]}function pf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:of(r.readTime),documentKey:ql(r.documentKey.path),largestBatchId:r.largestBatchId}}class mf{getBundleMetadata(e,t){return gf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:af(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return gf(e).put(function(e){return{bundleId:e.id,createTime:of(Nd(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return yf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:hf(e.bundledQuery),readTime:af(e.readTime)}}(e)}))}saveNamedQuery(e,t){return yf(e).put(function(e){return{name:e.name,readTime:of(Nd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function gf(e){return vc(e,"bundles")}function yf(e){return vc(e,"namedQueries")}class vf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new vf(e,n)}getOverlay(e,t){return wf(e).get(ff(this.userId,t)).next((e=>e?df(this.serializer,e):null))}getOverlays(e,t){const n=hh();return kl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Zh(t,i);r.push(this.ht(e,s))})),kl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(ql(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(wf(e).j("collectionPathOverlayIndex",r))})),kl.waitFor(i)}getOverlaysForCollection(e,t,n){const r=hh(),i=ql(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return wf(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=df(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=hh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wf(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=df(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return wf(e).put(function(e,t,n){const[r,i,s]=ff(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zd(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function wf(e){return vc(e,"documentOverlays")}class bf{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Pc(e.integerValue));else if("doubleValue"in e){const n=Pc(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),zl(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Rc(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Dc(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?nu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ba()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),fl.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function _f(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ef(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=_f(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}bf.bt=new bf;class Sf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=Ef(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=Ef(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class If{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Tf{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class kf{constructor(){this.Gt=new Sf,this.zt=new If(this.Gt),this.jt=new Tf(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class xf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new xf(this.indexId,this.documentKey,this.arrayValue,n)}}function Cf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Nf(e.arrayValue,t.arrayValue),0!==n?n:(n=Nf(e.directionalValue,t.directionalValue),0!==n?n:fl.comparator(e.documentKey,t.documentKey)))}function Nf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Af{constructor(e){this.Yt=new Tc(((e,t)=>dl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(qa(e.collectionGroup===this.collectionId),this.en)return!1;const t=ml(e);if(void 0!==t&&!this.nn(t))return!1;const n=gl(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Tc(dl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new yl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new yl(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new yl(n.field,"asc"===n.dir?0:1)));return new pl(pl.UNKNOWN_ID,this.collectionId,t,vl.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Of(e){var t,n;if(qa(e instanceof gu||e instanceof yu),e instanceof gu){if(e instanceof Ou){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>gu.create(e.field,"==",t))))||[];return yu.create(r,"or")}return e}const r=e.filters.map((e=>Of(e)));return yu.create(r,e.op)}function Rf(e){if(0===e.getFilters().length)return[];const t=Ff(Of(e));return qa(Lf(t)),Pf(t)||Df(t)?[t]:t.getFilters()}function Pf(e){return e instanceof gu}function Df(e){return e instanceof yu&&bu(e)}function Lf(e){return Pf(e)||Df(e)||function(e){if(e instanceof yu&&wu(e)){for(const t of e.getFilters())if(!Pf(t)&&!Df(t))return!1;return!0}return!1}(e)}function Ff(e){if(qa(e instanceof gu||e instanceof yu),e instanceof gu)return e;if(1===e.filters.length)return Ff(e.filters[0]);const t=e.filters.map((e=>Ff(e)));let n=yu.create(t,e.op);return n=Uf(n),Lf(n)?n:(qa(n instanceof yu),qa(vu(n)),qa(n.filters.length>1),n.filters.reduce(((e,t)=>Mf(e,t))))}function Mf(e,t){let n;return qa(e instanceof gu||e instanceof yu),qa(t instanceof gu||t instanceof yu),n=e instanceof gu?t instanceof gu?function(e,t){return yu.create([e,t],"and")}(e,t):jf(e,t):t instanceof gu?jf(t,e):function(e,t){if(qa(e.filters.length>0&&t.filters.length>0),vu(e)&&vu(t))return Iu(e,t.getFilters());const n=wu(e)?e:t,r=wu(e)?t:e,i=n.filters.map((e=>Mf(e,r)));return yu.create(i,"or")}(e,t),Uf(n)}function jf(e,t){if(vu(t))return Iu(t,e.getFilters());{const n=t.filters.map((t=>Mf(e,t)));return yu.create(n,"or")}}function Uf(e){if(qa(e instanceof gu||e instanceof yu),e instanceof gu)return e;const t=e.getFilters();if(1===t.length)return Uf(t[0]);if(_u(e))return e;const n=t.map((e=>Uf(e))),r=[];return n.forEach((t=>{t instanceof gu?r.push(t):t instanceof yu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:yu.create(r,e.op)}class Vf{constructor(){this._n=new zf}addToCollectionParentIndex(e,t){return this._n.add(t),kl.resolve()}getCollectionParents(e,t){return kl.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return kl.resolve()}deleteFieldIndex(e,t){return kl.resolve()}deleteAllFieldIndexes(e){return kl.resolve()}createTargetIndexes(e,t){return kl.resolve()}getDocumentsMatchingTarget(e,t){return kl.resolve(null)}getIndexType(e,t){return kl.resolve(0)}getFieldIndexes(e,t){return kl.resolve([])}getNextCollectionGroupToUpdate(e){return kl.resolve(null)}getMinOffset(e,t){return kl.resolve(_l.min())}getMinOffsetFromCollectionGroup(e,t){return kl.resolve(_l.min())}updateCollectionGroup(e,t,n){return kl.resolve()}updateIndexEntries(e,t){return kl.resolve()}}class zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tc(ul.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Tc(ul.comparator)).toArray()}}const Bf=new Uint8Array(0);class qf{constructor(e,t){this.databaseId=t,this.an=new zf,this.un=new sh((e=>Fu(e)),((e,t)=>Mu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:ql(r)};return Kf(e).put(i)}return kl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ol(t),""],!1,!0);return Kf(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Wl(r.parent))}return n}))}addFieldIndex(e,t){const n=Wf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Gf(e);return i.next((e=>{n.put(pf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Wf(e),r=Gf(e),i=Hf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Wf(e),n=Hf(e),r=Gf(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return kl.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Af(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Hf(e);let r=!0;const i=new Map;return kl.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=gh();const r=[];return kl.forEach(i,((i,s)=>{ja("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Fu(t)));const o=function(e,t){const n=ml(t);if(void 0===n)return null;for(const r of Uu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of gl(t))for(const t of Uu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of gl(t)){const t=0===i.kind?Vu(e,i.fieldPath,e.startAt):zu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new uu(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of gl(t)){const t=0===i.kind?zu(e,i.fieldPath,e.endAt):Vu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new uu(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return kl.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=fl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return kl.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Rf(yu.create(e.filters,"and")).map((t=>Lu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Bf,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new xf(e,fl.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new xf(e,fl.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Af(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return kl.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Tc(dl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new kf;for(const r of gl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);bf.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new kf;return bf.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new kf;return bf.bt.Pt($c(this.databaseId,t),n.Ht(function(e){const t=gl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new kf);let i=0;for(const s of gl(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Yc(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);bf.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new kf;n.seed(e.Wt()),bf.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof gu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Wf(e),r=Gf(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return kl.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new vl(t.sequenceNumber,new _l(af(t.readTime),new fl(Wl(t.documentKey)),t.largestBatchId)):vl.empty(),r=e.fields.map((e=>{let[t,n]=e;return new yl(dl.fromServerFormat(t),n)}));return new pl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:il(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Wf(e),i=Gf(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>kl.forEach(t,(t=>i.put(pf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return kl.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?kl.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),kl.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?kl.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Hf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Hf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Hf(e);let i=new Tc(Cf);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new xf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Tc(Cf);const r=this.An(t,e);if(null==r)return n;const i=ml(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Yc(s))for(const i of s.arrayValue.values||[])n=n.add(new xf(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new xf(t.indexId,e.key,Bf,r));return n}wn(e,t,n,r,i){ja("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=xc(s),l=xc(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=xc(o)):t?(i(a),a=xc(s)):(a=xc(s),l=xc(o))}}(r,i,Cf,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),kl.waitFor(s)}gn(e){let t=1;return Gf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Cf(e,t))).filter(((e,t,n)=>!t||0!==Cf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Cf(s,e),i=Cf(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Bf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Bf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Cf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qf)}getMinOffset(e,t){return kl.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Ba())))).next(Qf)}}function Kf(e){return vc(e,"collectionParents")}function Hf(e){return vc(e,"indexEntries")}function Wf(e){return vc(e,"indexConfiguration")}function Gf(e){return vc(e,"indexState")}function Qf(e){qa(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;El(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _l(t.readTime,t.documentKey,n)}const $f={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Jf(e,Jf.DEFAULT_COLLECTION_PERCENTILE,Jf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{qa(1===a)})));const c=[];for(const u of n.mutations){const e=$l(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return kl.waitFor(s).next((()=>c))}function Xf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ba();t=e.noDocument}return JSON.stringify(t).length}Jf.DEFAULT_COLLECTION_PERCENTILE=10,Jf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jf.DEFAULT=new Jf(41943040,Jf.DEFAULT_COLLECTION_PERCENTILE,Jf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jf.DISABLED=new Jf(-1,0,0);class Zf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){qa(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Zf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=np(e),s=tp(e);return s.add({}).next((o=>{qa("number"==typeof o);const a=new Yh(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>zd(e.ct,t))),i=n.mutations.map((t=>zd(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Tc(((e,t)=>il(e.canonicalString(),t.canonicalString())));for(const e of r){const t=$l(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Jl))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),kl.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return tp(e).get(t).next((e=>e?(qa(e.userId===this.userId),lf(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?kl.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return tp(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(qa(t.batchId>=n),i=lf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return tp(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).U("userMutationsIndex",t).next((e=>e.map((e=>lf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ql(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return np(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Wl(a);if(o===this.userId&&t.path.isEqual(c))return tp(e).get(l).next((e=>{if(!e)throw Ba();qa(e.userId===this.userId),i.push(lf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tc(il);const r=[];return t.forEach((t=>{const i=Ql(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=np(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Wl(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),kl.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ql(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Tc(il);return np(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Wl(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(tp(e).get(t).next((e=>{if(null===e)throw Ba();qa(e.userId===this.userId),n.push(lf(this.serializer,e))})))})),kl.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Yf(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),kl.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return kl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return np(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Wl(e[1]);r.push(t)}else n.done()})).next((()=>{qa(0===r.length)}))}))}containsKey(e,t){return ep(e,this.userId,t)}xn(e){return rp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function ep(e,t,n){const r=Ql(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return np(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function tp(e){return vc(e,"mutations")}function np(e){return vc(e,"documentMutations")}function rp(e){return vc(e,"mutationQueues")}class ip{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ip(0)}static Ln(){return new ip(-1)}}class sp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new ip(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>ll.fromTimestamp(new al(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>op(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(qa(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return op(e).J(((s,o)=>{const a=cf(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>kl.waitFor(i))).next((()=>r))}forEachTarget(e,t){return op(e).J(((e,n)=>{const r=cf(n);t(r)}))}Bn(e){return ap(e).get("targetGlobalKey").next((e=>(qa(null!==e),e)))}kn(e,t){return ap(e).put("targetGlobalKey",t)}qn(e,t){return op(e).put(uf(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Fu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return op(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=cf(n);Mu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=lp(e);return t.forEach((t=>{const s=ql(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),kl.waitFor(r)}removeMatchingKeys(e,t,n){const r=lp(e);return kl.forEach(t,(t=>{const i=ql(t.path);return kl.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=lp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lp(e);let i=gh();return r.J({range:n,H:!0},((e,t,n)=>{const r=Wl(e[1]),s=new fl(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=ql(t.path),r=IDBKeyRange.bound([n],[ol(n)],!1,!0);let i=0;return lp(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return op(e).get(t).next((e=>e?cf(e):null))}}function op(e){return vc(e,"targets")}function ap(e){return vc(e,"targetGlobal")}function lp(e){return vc(e,"targetDocuments")}function cp(e,t){let[n,r]=e,[i,s]=t;const o=il(n,i);return 0===o?il(r,s):o}class up{constructor(e){this.Kn=e,this.buffer=new Tc(cp),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();cp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){ja("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Rl(e)?ja("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Tl(e)}await this.zn(3e5)}))}}class dp{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return kl.resolve(Ul.oe);const n=new up(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ja("LruGarbageCollector","Garbage collection skipped; disabled"),kl.resolve($f)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ja("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),$f):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ja("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ma()<=Os.DEBUG&&ja("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),kl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function fp(e,t){return new dp(e,t)}class pp{constructor(e,t){this.db=e,this.garbageCollector=fp(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return mp(e,n)}removeReference(e,t,n){return mp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return mp(e,t)}er(e,t){return function(e,t){let n=!1;return rp(e).Y((r=>ep(e,r,t).next((e=>(e&&(n=!0),kl.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ll.min()),lp(e).delete(function(e){return[0,ql(e.path)]}(s)))))}));r.push(t)}})).next((()=>kl.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return mp(e,t)}Xn(e,t){const n=lp(e);let r,i=Ul.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ul.oe&&t(new fl(Wl(r)),i),i=l,r=a):i=Ul.oe})).next((()=>{i!==Ul.oe&&t(new fl(Wl(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mp(e,t){return lp(e).put(function(e,t){return{targetId:0,path:ql(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class gp{constructor(){this.changes=new sh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?kl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return _p(e).put(n)}removeEntry(e,t,n){return _p(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],sf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=cu.newInvalidDocument(t);return _p(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ep(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:cu.newInvalidDocument(t)};return _p(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ep(t))},((e,r)=>{n={document:this.nr(t,r),size:Xf(r)}})).next((()=>n))}getEntries(e,t){let n=ah();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=ah(),r=new Ec(fl.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Xf(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return kl.resolve();let r=new Tc(Ip);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Ep(r.first()),Ep(r.last())),s=r.getIterator();let o=s.getNext();return _p(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=fl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ip(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(Ep(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),sf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _p(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=ah();for(const i of e){const e=this.nr(fl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(th(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ah();const s=Sp(t,n),o=Sp(t,_l.max());return _p(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(fl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new wp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return bp(e).get("remoteDocumentGlobalKey").next((e=>(qa(!!e),e)))}tr(e,t){return bp(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Vd(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=fl.fromSegments(t.noDocument.path),r=af(t.noDocument.readTime);n=cu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ba();{const e=fl.fromSegments(t.unknownDocument.path),r=af(t.unknownDocument.version);n=cu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new al(e[0],e[1]);return ll.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ll.min()))return e}return cu.newInvalidDocument(e)}}function vp(e){return new yp(e)}class wp extends gp{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new sh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Tc(((e,t)=>il(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=rf(this.ar.serializer,s);r=r.add(i.path.popLast());const l=Xf(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=rf(this.ar.serializer,s.convertToNoDocument(ll.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),kl.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function bp(e){return vc(e,"remoteDocumentGlobal")}function _p(e){return vc(e,"remoteDocumentsV14")}function Ep(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Sp(e,t){const n=t.documentKey.path.toArray();return[e,sf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ip(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=il(n[s],r[s]),i)return i;return i=il(n.length,r.length),i||(i=il(n[n.length-2],r[r.length-2]),i||il(n[n.length-1],r[r.length-1]))}class Tp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&zh(n.mutation,e,Cc.empty(),al.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,gh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gh();const r=hh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ch();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=hh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ah();const s=fh(),o=fh();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Hh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),zh(o.mutation,t,o.mutation.getFieldMask(),al.now())):s.set(t.key,Cc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Tp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=fh();let r=new Ec(((e,t)=>e-t)),i=gh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Cc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||gh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=dh();l.forEach((e=>{if(!i.has(e)){const r=Uh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return kl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return fl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):kl.resolve(hh());let o=-1,a=i;return s.next((t=>kl.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?kl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,gh()))).next((e=>({batchId:o,changes:uh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fl(t)).next((e=>{let t=ch();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ch();return this.indexManager.getCollectionParents(e,i).next((o=>kl.forEach(o,(o=>{const a=function(e,t){return new Bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,cu.newInvalidDocument(r)))}));let n=ch();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&zh(s.mutation,r,Cc.empty(),al.now()),th(t,r)&&(n=n.insert(e,r))})),n}))}}class xp{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return kl.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Nd(e.createTime)}}(t)),kl.resolve()}getNamedQuery(e,t){return kl.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:hf(e.bundledQuery),readTime:Nd(e.readTime)}}(t)),kl.resolve()}}class Cp{constructor(){this.overlays=new Ec(fl.comparator),this.hr=new Map}getOverlay(e,t){return kl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hh();return kl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),kl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),kl.resolve()}getOverlaysForCollection(e,t,n){const r=hh(),i=t.length+1,s=new fl(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return kl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ec(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=hh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=hh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return kl.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Zh(t,n));let i=this.hr.get(t);void 0===i&&(i=gh(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Np{constructor(){this.Pr=new Tc(Ap.Ir),this.Tr=new Tc(Ap.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Ap(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Ap(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new fl(new ul([])),n=new Ap(t,e),r=new Ap(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new fl(new ul([])),n=new Ap(t,e),r=new Ap(t,e+1);let i=gh();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ap(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ap{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return fl.comparator(e.key,t.key)||il(e.pr,t.pr)}static Er(e,t){return il(e.pr,t.pr)||fl.comparator(e.key,t.key)}}class Op{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Tc(Ap.Ir)}checkEmpty(e){return kl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Yh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Ap(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return kl.resolve(s)}lookupMutationBatch(e,t){return kl.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return kl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return kl.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return kl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ap(t,0),r=new Ap(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),kl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tc(il);return t.forEach((e=>{const t=new Ap(e,0),r=new Ap(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),kl.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;fl.isDocumentKey(i)||(i=i.child(""));const s=new Ap(new fl(i),0);let o=new Tc(il);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),kl.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){qa(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return kl.forEach(t.mutations,(r=>{const i=new Ap(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Ap(t,0),r=this.wr.firstAfterOrEqual(n);return kl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,kl.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Rp{constructor(e){this.vr=e,this.docs=new Ec(fl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return kl.resolve(n?n.document.mutableCopy():cu.newInvalidDocument(t))}getEntries(e,t){let n=ah();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():cu.newInvalidDocument(e))})),kl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ah();const s=t.path,o=new fl(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||El(bl(o),n)<=0||(r.has(o.key)||th(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return kl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ba()}Fr(e,t){return kl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Pp(this)}getSize(e){return kl.resolve(this.size)}}class Pp extends gp{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),kl.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Dp{constructor(e){this.persistence=e,this.Mr=new sh((e=>Fu(e)),Mu),this.lastRemoteSnapshotVersion=ll.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Np,this.targetCount=0,this.Lr=ip.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),kl.resolve()}getLastRemoteSnapshotVersion(e){return kl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return kl.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),kl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),kl.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new ip(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,kl.resolve()}updateTargetData(e,t){return this.qn(t),kl.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,kl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),kl.waitFor(i).next((()=>r))}getTargetCount(e){return kl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return kl.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),kl.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),kl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),kl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return kl.resolve(n)}containsKey(e,t){return kl.resolve(this.Nr.containsKey(t))}}class Lp{constructor(e,t){this.Br={},this.overlays={},this.kr=new Ul(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Dp(this),this.indexManager=new Vf,this.remoteDocumentCache=function(e){return new Rp(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new nf(t),this.$r=new xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Op(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){ja("MemoryPersistence","Starting transaction:",e);const r=new Fp(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return kl.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Fp extends Il{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.zr=new Np,this.jr=null}static Hr(e){return new Mp(e)}get Jr(){if(this.jr)return this.jr;throw Ba()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),kl.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),kl.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),kl.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kl.forEach(this.Jr,(n=>{const r=fl.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ll.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return kl.or([()=>kl.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class jp{constructor(e){this.serializer=e}O(e,t,n,r){const i=new xl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Up(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=kl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Up(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ll.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return kl.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:lc});t.createIndex("collectionPathOverlayIndex",cc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",uc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Yl});t.createIndex("documentKeyIndex",Xl),t.createIndex("collectionGroupIndex",Zl)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ic}).createIndex("sequenceNumberIndex",sc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:oc}).createIndex("documentKeyIndex",ac,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Xf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>kl.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>kl.forEach(n,(n=>{qa(n.userId===t.userId);const r=lf(this.serializer,n);return Yf(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new ul(n),o=function(e){return[0,ql(e)]}(s);r.push(t.get(o).next((n=>n?kl.resolve():(n=>t.put({targetId:0,path:ql(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>kl.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:rc});const n=t.store("collectionParents"),r=new zf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:ql(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new ul(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Wl(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=cf(n),i=uf(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new fl(ul.fromString(e.document.name).popFirst(5)):e.noDocument?fl.fromSegments(e.noDocument.path):e.unknownDocument?fl.fromSegments(e.unknownDocument.path):Ba()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>kl.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=vp(this.serializer),i=new Lp(Mp.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:gh();lf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),kl.forEach(n,((e,n)=>{const s=new Da(n),o=vf.lt(this.serializer,s),a=i.getIndexManager(s),l=Zf.lt(s,this.serializer,a,i.referenceDelegate);return new kp(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new yc(t,Ul.oe),e).next()}))}))}}function Up(e){e.createObjectStore("targetDocuments",{keyPath:tc}).createIndex("documentTargetsIndex",nc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ec,{unique:!0}),e.createObjectStore("targetGlobal")}const Vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zp{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!zp.D())throw new Wa(Ha.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pp(this,r),this.Ti=t+"main",this.serializer=new nf(a),this.Ei=new Cl(this.Ti,this.ui,new jp(this.serializer)),this.Qr=new sp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vp(this.serializer),this.$r=new mf,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wa(Ha.FAILED_PRECONDITION,Vp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Ul(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Rl(e))return ja("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ja("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Bp(e).get("owner").next((e=>kl.resolve(this.Si(e))))}bi(e){return qp(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=vc(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return kl.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?kl.resolve(!0):Bp(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Wa(Ha.FAILED_PRECONDITION,Vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||qp(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ja("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new yc(e,Ul.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>qp(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Zf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){ja("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?gc:15===e?mc:14===e?pc:13===e?fc:12===e?dc:11===e?hc:void Ba()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new yc(r,this.kr?this.kr.next():Ul.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Ua("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Wa(Ha.FAILED_PRECONDITION,Sl);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Bp(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Wa(Ha.FAILED_PRECONDITION,Vp)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bp(e).put("owner",t)}static D(){return Cl.D()}yi(e){const t=Bp(e);return t.get("owner").next((e=>this.Si(e)?(ja("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):kl.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ua("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;hs()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ja("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ua("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(kC){Ua("Failed to set zombie client id.",kC)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(kC){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Bp(e){return vc(e,"owner")}function qp(e){return vc(e,"clientMetadata")}function Kp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Hp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=gh(),r=gh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Hp(e,t.fromCache,n,r)}}class Wp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gp{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=hs()?8:Nl(ss())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Wp;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Ma()<=Os.DEBUG&&ja("QueryEngine","SDK will not create cache indexes for query:",eh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),kl.resolve()):(Ma()<=Os.DEBUG&&ja("QueryEngine","Query:",eh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ma()<=Os.DEBUG&&ja("QueryEngine","The SDK decides to create cache indexes for query:",eh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qu(t))):kl.resolve())}ji(e,t){if(Hu(t))return kl.resolve(null);let n=Qu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Yu(t,null,"F"),n=Qu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=gh(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Yu(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Hu(t)||r.isEqual(ll.min())?kl.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?kl.resolve(null):(Ma()<=Os.DEBUG&&ja("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eh(t)),this.es(e,s,t,wl(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Tc(rh(e));return t.forEach(((t,r)=>{th(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Ma()<=Os.DEBUG&&ja("QueryEngine","Using full collection scan to execute query:",eh(t)),this.zi.getDocumentsMatchingQuery(e,t,_l.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Qp{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ec(il),this.rs=new sh((e=>Fu(e)),Mu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function $p(e,t,n,r){return new Qp(e,t,n,r)}async function Jp(e,t){const n=Ka(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=gh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Yp(e){const t=Ka(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Xp(e,t,n){let r=gh(),i=gh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ah();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ll.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ja("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Zp(e,t){const n=Ka(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function em(e,t){const n=Ka(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,kl.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new tf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function tm(e,t,n){const r=Ka(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Rl(e))throw e;ja("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function nm(e,t,n){const r=Ka(e);let i=ll.min(),s=gh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ka(e),i=r.rs.get(n);return void 0!==i?kl.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Qu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ll.min(),n?s:gh()))).next((e=>(sm(r,nh(t),e),{documents:e,hs:s})))))}function rm(e,t){const n=Ka(e),r=Ka(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function im(e,t){const n=Ka(e),r=n.ss.get(t)||ll.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,wl(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(sm(n,t,e),e)))}function sm(e,t,n){let r=e.ss.get(t)||ll.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gh();const r=await em(e,Qu(hf(t.bundledQuery))),i=Ka(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Nd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Ac.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function am(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function lm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cm(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class um{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Wa(r.error.code,r.error.message))),s?new um(e,t,r.state,i):(Ua("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Wa(n.error.code,n.error.message))),i?new hm(e,n.state,r):(Ua("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=vh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Bl(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new dm(e,i):(Ua("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class fm{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fm(t.clientId,t.onlineState):(Ua("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class pm{constructor(){this.activeTargetIds=vh()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mm{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ec(il),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=am(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new pm),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(am(this.persistenceKey,n));if(e){const t=dm.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(cm(this.persistenceKey,e));if(n){const r=hm.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cm(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ja("SharedClientState","READ",e,t),t}setItem(e,t){ja("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ja("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(ja("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Ul.oe;if(null!=e)try{const n=JSON.parse(e);qa("number"==typeof n),t=n}catch(e){Ua("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ul.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new um(this.currentUser,e,t,n),i=lm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=lm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=cm(this.persistenceKey,e),i=new hm(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return dm.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return um.Es(new Da(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return hm.Es(r,t)}xs(e){return fm.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);ja("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=vh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class gm{constructor(){this.no=new pm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new pm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ym{io(e){}shutdown(){}}class vm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ja("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ja("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wm=null;function bm(){return null===wm?wm=268435456+Math.round(2147483648*Math.random()):wm++,"0x"+wm.toString(16)}const _m={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Em{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Sm="WebChannelConnection";class Im extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=bm(),o=this.vo(e,t.toUriEncodedString());ja("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(ja("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Va("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+La,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=_m[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=bm();return new Promise(((s,o)=>{const a=new Ea;a.setWithCredentials(!0),a.listenOnce(Ta.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ka.NO_ERROR:const t=a.getResponseJson();ja(Sm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ka.TIMEOUT:ja(Sm,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Wa(Ha.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const n=a.getStatus();if(ja(Sm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ha).indexOf(t)>=0?t:Ha.UNKNOWN}(t.status);o(new Wa(e,t.message))}else o(new Wa(Ha.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Wa(Ha.UNAVAILABLE,"Connection failed."));break;default:Ba()}}finally{ja(Sm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);ja(Sm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=bm(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Aa(),o=Na(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Sa({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");ja(Sm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Em({lo:t=>{d?ja(Sm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ja(Sm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),ja(Sm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ia.EventType.OPEN,(()=>{d||(ja(Sm,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,Ia.EventType.CLOSE,(()=>{d||(d=!0,ja(Sm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,Ia.EventType.ERROR,(t=>{d||(d=!0,Va(Sm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new Wa(Ha.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ia.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];qa(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ja(Sm,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=td[e];if(void 0!==t)return id(t)}(t),i=o.message;void 0===n&&(n=Ha.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new Wa(n,i)),u.close()}else ja(Sm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(o,Ca.STAT_EVENT,(t=>{t.stat===xa.PROXY?ja(Sm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===xa.NOPROXY&&ja(Sm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Tm(){return"undefined"!=typeof window?window:null}function km(){return"undefined"!=typeof document?document:null}function xm(e){return new Id(e,!0)}class Cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&ja("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Nm{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Cm(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Ha.RESOURCE_EXHAUSTED?(Ua(t.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Ha.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new Wa(Ha.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return ja("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(ja("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Am extends Nm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ba()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(qa(void 0===t||"string"==typeof t),Ac.fromBase64String(t||"")):(qa(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ac.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ha.UNKNOWN:id(e.code);return new Wa(t,e.message||"")}(o);n=new gd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Dd(e,r.document.name),s=Nd(r.document.updateTime),o=r.document.createTime?Nd(r.document.createTime):ll.min(),a=new au({mapValue:{fields:r.document.fields}}),l=cu.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Dd(e,r.document),s=r.readTime?Nd(r.readTime):ll.min(),o=cu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Dd(e,r.document),s=r.removedTargetIds||[];n=new pd([],s,i,null)}else{if(!("filter"in t))return Ba();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ed(r,i),o=e.targetId;n=new md(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ll.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ll.min():t.readTime?Nd(t.readTime):ll.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Md(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ju(r)?{documents:qd(e,r)}:{query:Kd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=xd(e,t.resumeToken);const r=Td(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ll.min())>0){n.readTime=kd(e,t.snapshotVersion.toTimestamp());const r=Td(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ba()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Md(this.serializer),t.removeTarget=e,this.i_(t)}}class Om extends Nm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(qa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(qa(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Nd(e.updateTime):Nd(t);return n.isEqual(ll.min())&&(n=Nd(t)),new Lh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Nd(e.commitTime);return this.listener.A_(n,t)}return qa(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Md(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>zd(this.serializer,e)))};this.i_(t)}}class Rm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Wa(Ha.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,Od(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wa(Ha.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,Od(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wa(Ha.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Pm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Ua(t),this.y_=!1):ja("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Dm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{qm(this)&&(ja("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ka(e);t.M_.add(4),await Fm(t),t.N_.set("Unknown"),t.M_.delete(4),await Lm(t)}(this))}))})),this.N_=new Pm(n,r)}}async function Lm(e){if(qm(e))for(const t of e.x_)await t(!0)}async function Fm(e){for(const t of e.x_)await t(!1)}function Mm(e,t){const n=Ka(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Bm(n)?zm(n):lg(n).Xo()&&Um(n,t))}function jm(e,t){const n=Ka(e),r=lg(n);n.F_.delete(t),r.Xo()&&Vm(n,t),0===n.F_.size&&(r.Xo()?r.n_():qm(n)&&n.N_.set("Unknown"))}function Um(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ll.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}lg(e).P_(t)}function Vm(e,t){e.L_.xe(t),lg(e).I_(t)}function zm(e){e.L_=new vd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),lg(e).start(),e.N_.w_()}function Bm(e){return qm(e)&&!lg(e).Zo()&&e.F_.size>0}function qm(e){return 0===Ka(e).M_.size}function Km(e){e.L_=void 0}async function Hm(e){e.N_.set("Online")}async function Wm(e){e.F_.forEach(((t,n)=>{Um(e,t)}))}async function Gm(e,t){Km(e),Bm(e)?(e.N_.D_(t),zm(e)):e.N_.set("Unknown")}async function Qm(e,t,n){if(e.N_.set("Online"),t instanceof gd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){ja("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await $m(e,n)}else if(t instanceof pd?e.L_.Ke(t):t instanceof md?e.L_.He(t):e.L_.We(t),!n.isEqual(ll.min()))try{const t=await Yp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Ac.EMPTY_BYTE_STRING,r.snapshotVersion)),Vm(e,t);const i=new tf(r.target,t,n,r.sequenceNumber);Um(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ja("RemoteStore","Failed to raise snapshot:",t),await $m(e,t)}}async function $m(e,t,n){if(!Rl(t))throw t;e.M_.add(1),await Fm(e),e.N_.set("Offline"),n||(n=()=>Yp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ja("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Lm(e)}))}function Jm(e,t){return t().catch((n=>$m(e,n,t)))}async function Ym(e){const t=Ka(e),n=cg(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Xm(t);)try{const e=await Zp(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Zm(t,e)}catch(e){await $m(t,e)}eg(t)&&tg(t)}function Xm(e){return qm(e)&&e.v_.length<10}function Zm(e,t){e.v_.push(t);const n=cg(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function eg(e){return qm(e)&&!cg(e).Zo()&&e.v_.length>0}function tg(e){cg(e).start()}async function ng(e){cg(e).V_()}async function rg(e){const t=cg(e);for(const n of e.v_)t.d_(n.mutations)}async function ig(e,t,n){const r=e.v_.shift(),i=Xh.from(r,t,n);await Jm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Ym(e)}async function sg(e,t){t&&cg(e).E_&&await async function(e,t){if(function(e){return rd(e)&&e!==Ha.ABORTED}(t.code)){const n=e.v_.shift();cg(e).t_(),await Jm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ym(e)}}(e,t),eg(e)&&tg(e)}async function og(e,t){const n=Ka(e);n.asyncQueue.verifyOperationInProgress(),ja("RemoteStore","RemoteStore received new credentials");const r=qm(n);n.M_.add(3),await Fm(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Lm(n)}async function ag(e,t){const n=Ka(e);t?(n.M_.delete(2),await Lm(n)):t||(n.M_.add(2),await Fm(n),n.N_.set("Unknown"))}function lg(e){return e.B_||(e.B_=function(e,t,n){const r=Ka(e);return r.f_(),new Am(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Hm.bind(null,e),To:Wm.bind(null,e),Ao:Gm.bind(null,e),h_:Qm.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Bm(e)?zm(e):e.N_.set("Unknown")):(await e.B_.stop(),Km(e))}))),e.B_}function cg(e){return e.k_||(e.k_=function(e,t,n){const r=Ka(e);return r.f_(),new Om(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:ng.bind(null,e),Ao:sg.bind(null,e),R_:rg.bind(null,e),A_:ig.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Ym(e)):(await e.k_.stop(),e.v_.length>0&&(ja("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class ug{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ug(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wa(Ha.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(e,t){if(Ua("AsyncQueue","".concat(t,": ").concat(e)),Rl(e))return new Wa(Ha.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class dg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||fl.comparator(t.key,n.key):(e,t)=>fl.comparator(e.key,t.key),this.keyedMap=ch(),this.sortedSet=new Ec(this.comparator)}static emptySet(e){return new dg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new dg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class fg{constructor(){this.q_=new Ec(fl.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ba():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class pg{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new pg(e,t,dg.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class mg{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class gg{constructor(){this.queries=new sh((e=>Zu(e)),Xu),this.onlineState="Unknown",this.z_=new Set}}async function yg(e,t){const n=Ka(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new mg,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=hg(e,"Initialization of query '".concat(eh(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&_g(n)}async function vg(e,t){const n=Ka(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wg(e,t){const n=Ka(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&_g(n)}function bg(e,t,n){const r=Ka(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function _g(e){e.z_.forEach((e=>{e.next()}))}var Eg,Sg;(Sg=Eg||(Eg={})).J_="default",Sg.Cache="cache";class Ig{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new pg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=pg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Eg.Cache}}class Tg{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class kg{constructor(e){this.serializer=e}Ps(e){return Dd(this.serializer,e)}Is(e){return e.metadata.exists?Vd(this.serializer,e.document,!1):cu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Nd(e)}}class xg{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cg(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=ul.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new kg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||gh()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ka(e);let s=gh(),o=ah();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await em(i,function(e){return Qu(Ku(ul.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Xp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new kg(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await om(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function Cg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ng{constructor(e){this.key=e}}class Ag{constructor(e){this.key=e}}class Og{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=gh(),this.mutatedKeys=gh(),this.Ia=rh(e),this.Ta=new dg(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new fg,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=th(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ba()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new pg(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new fg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=gh(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Ag(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Ng(n))})),t}pa(e){this.la=e.hs,this.Pa=gh();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return pg.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Rg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Pg{constructor(e){this.key=e,this.wa=!1}}class Dg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new sh((e=>Zu(e)),Xu),this.Da=new Map,this.Ca=new Set,this.va=new Ec(fl.comparator),this.Fa=new Map,this.Ma=new Np,this.xa={},this.Oa=new Map,this.Na=ip.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Lg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=uy(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Mg(r,t,n,!0),i}async function Fg(e,t){const n=uy(e);await Mg(n,t,!0,!1)}async function Mg(e,t,n,r){const i=await em(e.localStore,Qu(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await jg(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Mm(e.remoteStore,i),a}async function jg(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await nm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Jg(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await nm(e.localStore,t,!0),o=new Og(t,s.hs),a=o.da(s.documents),l=fd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Jg(e,n,c.fa);const u=new Rg(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function Ug(e,t,n){const r=Ka(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Xu(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jm(r.remoteStore,i.targetId),Qg(r,i.targetId)})).catch(Tl)):(Qg(r,i.targetId),await tm(r.localStore,i.targetId,!0))}async function Vg(e,t){const n=Ka(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jm(n.remoteStore,r.targetId))}async function zg(e,t){const n=Ka(e);try{const e=await function(e,t){const n=Ka(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Ac.EMPTY_BYTE_STRING,ll.min()).withLastLimboFreeSnapshotVersion(ll.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=ah(),l=gh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Xp(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(ll.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return kl.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(qa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?qa(r.wa):e.removedDocuments.size>0&&(qa(r.wa),r.wa=!1))})),await Zg(n,e,t)}catch(e){await Tl(e)}}function Bg(e,t,n){const r=Ka(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ka(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&_g(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qg(e,t,n){const r=Ka(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Ec(fl.comparator);e=e.insert(s,cu.newNoDocument(s,ll.min()));const n=gh().add(s),i=new dd(ll.min(),new Map,new Ec(il),e,n);await zg(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Xg(r)}else await tm(r.localStore,t,!1).then((()=>Qg(r,t,n))).catch(Tl)}async function Kg(e,t){const n=Ka(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ka(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=kl.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);qa(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Gg(n,r,null),Wg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zg(n,e)}catch(e){await Tl(e)}}async function Hg(e,t,n){const r=Ka(e);try{const e=await function(e,t){const n=Ka(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(qa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Gg(r,t,n),Wg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zg(r,e)}catch(n){await Tl(n)}}function Wg(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Gg(e,t,n){const r=Ka(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||$g(e,t)}))}function $g(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(jm(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Xg(e))}function Jg(e,t,n){for(const r of n)r instanceof Ng?(e.Ma.addReference(r.key,t),Yg(e,r)):r instanceof Ag?(ja("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||$g(e,r.key)):Ba()}function Yg(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(ja("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Xg(e))}function Xg(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new fl(ul.fromString(t)),r=e.Na.next();e.Fa.set(r,new Pg(n)),e.va=e.va.insert(n,r),Mm(e.remoteStore,new tf(Qu(Ku(n.path)),r,"TargetPurposeLimboResolution",Ul.oe))}}async function Zg(e,t,n){const r=Ka(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Hp.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Ka(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>kl.forEach(t,(t=>kl.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>kl.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Rl(e))throw e;ja("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function ey(e,t){const n=Ka(e);if(!n.currentUser.isEqual(t)){ja("SyncEngine","User change. New user:",t.toKey());const e=await Jp(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Wa(Ha.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zg(n,e.us)}}function ty(e,t){const n=Ka(e),r=n.Fa.get(t);if(r&&r.wa)return gh().add(r.key);{let e=gh();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function ny(e,t){const n=Ka(e),r=await nm(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&Jg(n,t.targetId,i.fa),i}async function ry(e,t){const n=Ka(e);return im(n.localStore,t).then((e=>Zg(n,e)))}async function iy(e,t,n,r){const i=Ka(e),s=await function(e,t){const n=Ka(e),r=Ka(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):kl.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Ym(i.remoteStore):"acknowledged"===n||"rejected"===n?(Gg(i,t,r||null),Wg(i,t),function(e,t){Ka(Ka(e).mutationQueue).Mn(t)}(i.localStore,t)):Ba(),await Zg(i,s)):ja("SyncEngine","Cannot apply mutation batch with id: "+t)}async function sy(e,t,n){const r=Ka(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await em(r.localStore,Qu(t[0]));for(const e of t){const t=r.ba.get(e),n=await ny(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await rm(r.localStore,o);e=await em(r.localStore,t),await jg(r,oy(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function oy(e){return qu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ay(e){return function(e){return Ka(Ka(e).persistence).Bi()}(Ka(e).localStore)}async function ly(e,t,n,r){const i=Ka(e);if(i.La)return void ja("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await im(i.localStore,nh(s[0])),r=dd.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Ac.EMPTY_BYTE_STRING);await Zg(i,e,r);break}case"rejected":await tm(i.localStore,t,!0),Qg(i,t,r);break;default:Ba()}}async function cy(e,t,n){const r=uy(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){ja("SyncEngine","Adding an already active target "+e);continue}const t=await rm(r.localStore,e),n=await em(r.localStore,t);await jg(r,oy(t),n.targetId,!1,n.resumeToken),Mm(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await tm(r.localStore,e,!1).then((()=>{jm(r.remoteStore,e),Qg(r,e)})).catch(Tl)}}function uy(e){const t=Ka(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ty.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qg.bind(null,t),t.Sa.h_=wg.bind(null,t.eventManager),t.Sa.ka=bg.bind(null,t.eventManager),t}function hy(e){const t=Ka(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Kg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Hg.bind(null,t),t}class dy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $p(this.persistence,new Gp,e.initialUser,this.serializer)}createPersistence(e){return new Lp(Mp.Hr,this.serializer)}createSharedClientState(e){return new gm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fy extends dy{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await hy(this.Qa.syncEngine),await Ym(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return $p(this.persistence,new Gp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new hp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new jl(t,this.persistence);return new Ml(e.asyncQueue,n)}createPersistence(e){const t=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jf.withCacheSize(this.cacheSizeBytes):Jf.DEFAULT;return new zp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tm(),km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gm}}class py extends fy{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof mm&&(this.sharedClientState.syncEngine={Zs:iy.bind(null,t),Xs:ly.bind(null,t),eo:cy.bind(null,t),Bi:ay.bind(null,t),Ys:ry.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ka(e);if(uy(n),hy(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await sy(n,e.toArray());n.La=!0,await ag(n.remoteStore,!0);for(const r of t)Mm(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Qg(n,i),tm(n.localStore,i,!0)))),jm(n.remoteStore,i)})),await t,await sy(n,e),function(e){const t=Ka(e);t.Fa.forEach(((e,n)=>{jm(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new Ec(fl.comparator)}(n),n.La=!1,await ag(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Tm();if(!mm.D(t))throw new Wa(Ha.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mm(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class my{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ey.bind(null,this.syncEngine),await ag(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gg}createDatastore(e){const t=xm(e.databaseInfo.databaseId),n=function(e){return new Im(e)}(e.databaseInfo);return function(e,t,n,r){return new Rm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Dm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Bg(this.syncEngine,e,0)),vm.D()?new vm:new ym)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Dg(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ka(e);ja("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Fm(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function gy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ua("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class vy{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Ga,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new Tg(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class wy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Wa(Ha.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ka(e),r={documents:t.map((e=>Pd(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,ul.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){qa(!!t.found),t.found.name,t.found.updateTime;const n=Dd(e,t.found.name),r=Nd(t.found.updateTime),i=t.found.createTime?Nd(t.found.createTime):ll.min(),s=new au({mapValue:{fields:t.found.fields}});return cu.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){qa(!!t.missing),qa(!!t.readTime);const n=Dd(e,t.missing),r=Nd(t.readTime);return cu.newNoDocument(n,r)}(e,t):Ba()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());qa(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new $h(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=fl.fromPath(t);this.mutations.push(new Jh(n,this.precondition(n)))})),await async function(e,t){const n=Ka(e),r={writes:t.map((e=>zd(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,ul.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ba();t=ll.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wa(Ha.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ll.min())?Fh.exists(!1):Fh.updateTime(t):Fh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ll.min()))throw new Wa(Ha.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fh.updateTime(t)}return Fh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class by{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new Cm(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new wy(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Vl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rd(t)}return!1}}class _y{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Da.UNAUTHENTICATED,this.clientId=rl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ja("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ja("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wa(Ha.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=hg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ey(e,t){e.asyncQueue.verifyOperationInProgress(),ja("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Jp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Sy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ty(e);ja("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>og(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>og(t.remoteStore,n))),e._onlineComponents=t}function Iy(e){return"FirebaseError"===e.name?e.code===Ha.FAILED_PRECONDITION||e.code===Ha.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ty(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ja("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ey(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Iy(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await Ey(e,new dy)}}else ja("FirestoreClient","Using default OfflineComponentProvider"),await Ey(e,new dy);return e._offlineComponents}async function ky(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ja("FirestoreClient","Using user provided OnlineComponentProvider"),await Sy(e,e._uninitializedComponentsProvider._online)):(ja("FirestoreClient","Using default OnlineComponentProvider"),await Sy(e,new my))),e._onlineComponents}function xy(e){return Ty(e).then((e=>e.persistence))}function Cy(e){return Ty(e).then((e=>e.localStore))}function Ny(e){return ky(e).then((e=>e.remoteStore))}function Ay(e){return ky(e).then((e=>e.syncEngine))}function Oy(e){return ky(e).then((e=>e.datastore))}async function Ry(e){const t=await ky(e),n=t.eventManager;return n.onListen=Lg.bind(null,t.syncEngine),n.onUnlisten=Ug.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Fg.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Vg.bind(null,t.syncEngine),n}function Py(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new yy({next:s=>{t.enqueueAndForget((()=>vg(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Wa(Ha.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Wa(Ha.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Ig(Ku(n.path),s,{includeMetadataChanges:!0,ra:!0});return yg(e,o)}(await Ry(e),e.asyncQueue,t,n,r))),r.promise}function Dy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new yy({next:n=>{t.enqueueAndForget((()=>vg(e,o))),n.fromCache&&"server"===r.source?i.reject(new Wa(Ha.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ig(n,s,{includeMetadataChanges:!0,ra:!0});return yg(e,o)}(await Ry(e),e.asyncQueue,t,n,r))),r.promise}function Ly(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?od().encode(e):e,function(e,t){return new vy(e,t)}(function(e,t){if(e instanceof Uint8Array)return gy(e,t);if(e instanceof ArrayBuffer)return gy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,xm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ka(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ka(e),r=Nd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Cg(r));const i=new xg(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await Zg(e,o.ca,void 0),await function(e,t){const n=Ka(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return Va("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Ay(e),i,r)}))}function Fy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const My=new Map;function jy(e,t,n){if(!n)throw new Wa(Ha.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Uy(e,t,n,r){if(!0===t&&!0===r)throw new Wa(Ha.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Vy(e){if(!fl.isDocumentKey(e))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zy(e){if(fl.isDocumentKey(e))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function By(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ba()}function qy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wa(Ha.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=By(e);throw new Wa(Ha.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ky(e,t){if(t<=0)throw new Wa(Ha.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Hy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wa(Ha.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Wa(Ha.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wa(Ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Wa(Ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Wa(Ha.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wa(Ha.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wa(Ha.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $a;switch(e.type){case"firstParty":return new Za(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wa(Ha.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=My.get(e);t&&(ja("ComponentProvider","Removing Datastore"),My.delete(e),t.terminate())}(this),Promise.resolve()}}function Gy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=qy(e,Wy))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Da.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xi(JSON.stringify({alg:"none",type:"JWT"})),Xi(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Wa(Ha.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Da(s)}e._authCredentials=new Ja(new Qa(t,n))}}class Qy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qy(this.firestore,e,this._query)}}class $y{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $y(this.firestore,e,this._key)}}class Jy extends Qy{constructor(e,t,n){super(e,t,Ku(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $y(this.firestore,null,new fl(e))}withConverter(e){return new Jy(this.firestore,e,this._path)}}function Yy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ts(e),jy("collection","path",t),e instanceof Wy){const n=ul.fromString(t,...r);return zy(n),new Jy(e,null,n)}{if(!(e instanceof $y||e instanceof Jy))throw new Wa(Ha.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ul.fromString(t,...r));return zy(n),new Jy(e.firestore,null,n)}}function Xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ts(e),1===arguments.length&&(t=rl.newId()),jy("doc","path",t),e instanceof Wy){const n=ul.fromString(t,...r);return Vy(n),new $y(e,null,new fl(n))}{if(!(e instanceof $y||e instanceof Jy))throw new Wa(Ha.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ul.fromString(t,...r));return Vy(n),new $y(e.firestore,e instanceof Jy?e.converter:null,new fl(n))}}function Zy(e,t){return e=Ts(e),t=Ts(t),(e instanceof $y||e instanceof Jy)&&(t instanceof $y||t instanceof Jy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ev(e,t){return e=Ts(e),t=Ts(t),e instanceof Qy&&t instanceof Qy&&e.firestore===t.firestore&&Xu(e._query,t._query)&&e.converter===t.converter}class tv{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Cm(this,"async_queue_retry"),this.hu=()=>{const e=km();e&&ja("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=km();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=km();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Ga;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(kC){if(!Rl(kC))throw kC;ja("AsyncQueue","Operation failed with retryable error: "+kC)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ua("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=ug.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Ba()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function nv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ga,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class iv extends Wy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new tv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ov(this),this._firestoreClient.terminate()}}function sv(e){return e._firestoreClient||ov(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ov(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new jc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Fy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new _y(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function av(e,t,n){const r=new Ga;return e.asyncQueue.enqueue((async()=>{try{await Ey(e,n),await Sy(e,t),r.resolve()}catch(e){const n=e;if(!Iy(n))throw n;Va("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function lv(e){return function(e){const t=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ka(e);qm(n.remoteStore)||ja("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ka(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=hg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Ay(e),t))),t.promise}(sv(e=qy(e,iv)))}function cv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xy(e),n=await Ny(e);return t.setNetworkEnabled(!0),function(e){const t=Ka(e);return t.M_.delete(0),Lm(t)}(n)}))}(sv(e=qy(e,iv)))}function uv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xy(e),n=await Ny(e);return t.setNetworkEnabled(!1),async function(e){const t=Ka(e);t.M_.add(0),await Fm(t),t.N_.set("Offline")}(n)}))}(sv(e=qy(e,iv)))}function hv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ka(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Cy(e),t)))}(sv(e=qy(e,iv)),t).then((t=>t?new Qy(e,null,t.query):null))}function dv(e){if(e._initialized||e._terminated)throw new Wa(Ha.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fv(Ac.fromBase64String(e))}catch(e){throw new Wa(Ha.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fv(Ac.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mv{constructor(e){this._methodName=e}}class gv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wa(Ha.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wa(Ha.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return il(this._lat,e._lat)||il(this._long,e._long)}}const yv=/^__.*__$/;class vv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kh(e,this.data,t,this.fieldTransforms)}}class wv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ba()}}class _v{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return zv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(bv(this.fu)&&yv.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Ev{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xm(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _v({fu:e,methodName:t,vu:n,path:dl.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sv(e){const t=e._freezeSettings(),n=xm(e._databaseId);return new Ev(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Iv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Mv("Data must be an object, but it was:",o,r);const a=Lv(r,o);let l,c;if(s.merge)l=new Cc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=jv(t,r,n);if(!o.contains(i))throw new Wa(Ha.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Bv(e,i)||e.push(i)}l=new Cc(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new vv(new au(a),l,c)}class Tv extends mv{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tv}}function kv(e,t,n){return new _v({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class xv extends mv{_toFieldTransform(e){return new Dh(e.path,new kh)}isEqual(e){return e instanceof xv}}class Cv extends mv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=kv(this,e,!0),n=this.Mu.map((e=>Dv(e,t))),r=new xh(n);return new Dh(e.path,r)}isEqual(e){return e instanceof Cv&&ys(this.Mu,e.Mu)}}class Nv extends mv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=kv(this,e,!0),n=this.Mu.map((e=>Dv(e,t))),r=new Nh(n);return new Dh(e.path,r)}isEqual(e){return e instanceof Nv&&ys(this.Mu,e.Mu)}}class Av extends mv{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Oh(e.serializer,_h(e.serializer,this.xu));return new Dh(e.path,t)}isEqual(e){return e instanceof Av&&this.xu===e.xu}}function Ov(e,t,n,r){const i=e.Fu(1,t,n);Mv("Data must be an object, but it was:",i,r);const s=[],o=au.empty();bc(r,((e,r)=>{const a=Vv(t,e,n);r=Ts(r);const l=i.Su(a);if(r instanceof Tv)s.push(a);else{const e=Dv(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Cc(s);return new wv(o,a,i.fieldTransforms)}function Rv(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[jv(t,r,n)],l=[i];if(s.length%2!=0)throw new Wa(Ha.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(jv(t,s[d])),l.push(s[d+1]);const c=[],u=au.empty();for(let d=a.length-1;d>=0;--d)if(!Bv(c,a[d])){const e=a[d];let t=l[d];t=Ts(t);const n=o.Su(e);if(t instanceof Tv)c.push(e);else{const r=Dv(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Cc(c);return new wv(u,h,o.fieldTransforms)}function Pv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dv(n,e.Fu(r?4:3,t))}function Dv(e,t){if(Fv(e=Ts(e)))return Mv("Unsupported field value:",t,e),Lv(e,t);if(e instanceof mv)return function(e,t){if(!bv(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Dv(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ts(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _h(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=al.fromDate(e);return{timestampValue:kd(t.serializer,n)}}if(e instanceof al){const n=new al(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kd(t.serializer,n)}}if(e instanceof gv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fv)return{bytesValue:xd(t.serializer,e._byteString)};if(e instanceof $y){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ad(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(By(e)))}(e,t)}function Lv(e,t){const n={};return _c(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bc(e,((e,r)=>{const i=Dv(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Fv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof al||e instanceof gv||e instanceof fv||e instanceof $y||e instanceof mv)}function Mv(e,t,n){if(!Fv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=By(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function jv(e,t,n){if((t=Ts(t))instanceof pv)return t._internalPath;if("string"==typeof t)return Vv(e,t);throw zv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Uv=new RegExp("[~\\*/\\[\\]]");function Vv(e,t,n){if(t.search(Uv)>=0)throw zv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pv(...t.split("."))._internalPath}catch(r){throw zv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function zv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Wa(Ha.INVALID_ARGUMENT,a+e+l)}function Bv(e,t){return e.some((e=>e.isEqual(t)))}class qv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $y(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kv extends qv{data(){return super.data()}}function Hv(e,t){return"string"==typeof t?Vv(e,t):t instanceof pv?t._internalPath:t._delegate._internalPath}function Wv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wa(Ha.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gv{}class Qv extends Gv{}function $v(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Gv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Yv)).length,n=e.filter((e=>e instanceof Jv)).length;if(t>1||t>0&&n>0)throw new Wa(Ha.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Jv extends Qv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Jv(e,t,n)}_apply(e){const t=this._parse(e);return sw(e._query,t),new Qy(e.firestore,e.converter,Ju(e._query,t))}_parse(e){const t=Sv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){iw(o,s);const t=[];for(const n of o)t.push(rw(r,e,n));a={arrayValue:{values:t}}}else a=rw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||iw(o,s),a=Pv(n,t,o,"in"===s||"not-in"===s);return gu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Yv extends Gv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:yu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sw(n,i),n=Ju(n,i)}(e._query,t),new Qy(e.firestore,e.converter,Ju(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xv extends Qv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(t,n)}(e._query,this._field,this._direction);return new Qy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Zv extends Qv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Zv(e,t,n)}_apply(e){return new Qy(e.firestore,e.converter,Yu(e._query,this._limit,this._limitType))}}class ew extends Qv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ew(e,t,n)}_apply(e){const t=nw(e,this.type,this._docOrFields,this._inclusive);return new Qy(e.firestore,e.converter,function(e,t){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class tw extends Qv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new tw(e,t,n)}_apply(e){const t=nw(e,this.type,this._docOrFields,this._inclusive);return new Qy(e.firestore,e.converter,function(e,t){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function nw(e,t,n,r){if(n[0]=Ts(n[0]),n[0]instanceof qv)return function(e,t,n,r,i){if(!r)throw new Wa(Ha.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Gu(e))if(o.field.isKeyField())s.push($c(t,r.key));else{const e=r.data.field(o.field);if(Lc(e))throw new Wa(Ha.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new uu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Sv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Wa(Ha.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Wu(e)&&-1!==s.indexOf("/"))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ul.fromString(s));if(!fl.isDocumentKey(n))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new fl(n);a.push($c(t,i))}else{const e=Pv(n,r,s);a.push(e)}}return new uu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function rw(e,t,n){if("string"==typeof(n=Ts(n))){if(""===n)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wu(t)&&-1!==n.indexOf("/"))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ul.fromString(n));if(!fl.isDocumentKey(r))throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $c(e,new fl(r))}if(n instanceof $y)return $c(e,n._key);throw new Wa(Ha.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(By(n),"."))}function iw(e,t){if(!Array.isArray(e)||0===e.length)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wa(Ha.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wa(Ha.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ow{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ba()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return bc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new gv(Pc(e.latitude),Pc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=Rc(e);return new al(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ul.fromString(e);qa(ef(n));const r=new Uc(n.get(1),n.get(3)),i=new fl(n.popFirst(5));return r.isEqual(t)||Ua("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function aw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lw extends ow{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $y(this.firestore,null,t)}}class cw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uw extends qv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new hw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hw extends uw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new hw(this._firestore,this._userDataWriter,n.key,n,new cw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wa(Ha.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new hw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new hw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:fw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function fw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ba()}}function pw(e,t){return e instanceof uw&&t instanceof uw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dw&&t instanceof dw&&e._firestore===t._firestore&&ev(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class mw extends ow{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $y(this.firestore,null,t)}}function gw(e){e=qy(e,$y);const t=qy(e.firestore,iv),n=sv(t),r=new mw(t);return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ka(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Wa(Ha.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=hg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Cy(e),t,n))),n.promise}(n,e._key).then((n=>new uw(t,r,e._key,n,new cw(null!==n&&n.hasLocalMutations,!0),e.converter)))}function yw(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mw(t);return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await nm(e,t,!0),i=new Og(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=hg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Cy(e),t,n))),n.promise}(n,e._query).then((n=>new dw(t,r,e,n)))}function vw(e,t,n){e=qy(e,$y);const r=qy(e.firestore,iv),i=aw(e.converter,t,n);return Ew(r,[Iv(Sv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fh.none())])}function ww(e,t,n){e=qy(e,$y);const r=qy(e.firestore,iv),i=Sv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ts(t))||t instanceof pv?Rv(i,"updateDoc",e._key,t,n,a):Ov(i,"updateDoc",e._key,t),Ew(r,[s.toMutation(e._key,Fh.exists(!0))])}function bw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ts(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||nv(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(nv(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof $y)h=qy(e.firestore,iv),d=Ku(e._key.path),u={next:t=>{n[l]&&n[l](Sw(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=qy(e,Qy);h=qy(t.firestore,iv),d=t._query;const r=new mw(h);u={next:e=>{n[l]&&n[l](new dw(h,r,t,e))},error:n[l+1],complete:n[l+2]},Wv(e._query)}return function(e,t,n,r){const i=new yy(r),s=new Ig(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>yg(await Ry(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>vg(await Ry(e),s)))}}(sv(h),d,c,u)}function _w(e,t){return function(e,t){const n=new yy(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ka(e).z_.add(t),t.next()}(await Ry(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ka(e).z_.delete(t)}(await Ry(e),n)))}}(sv(e=qy(e,iv)),nv(t)?t:{next:t})}function Ew(e,t){return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=hy(e);try{const e=await function(e,t){const n=Ka(e),r=al.now(),i=t.reduce(((e,t)=>e.add(t.key)),gh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ah(),l=gh();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Bh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Hh(e.key,t,lu(t.value.mapValue),Fh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:uh(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Ec(il)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zg(r,e.changes),await Ym(r.remoteStore)}catch(e){const t=hg(e,"Failed to persist write");n.reject(t)}}(await Ay(e),t,n))),n.promise}(sv(e),t)}function Sw(e,t,n){const r=n.docs.get(t._key),i=new mw(e);return new uw(e,i,t._key,r,new cw(n.hasPendingWrites,n.fromCache),t.converter)}const Iw={maxAttempts:5};class Tw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sv(e)}set(e,t,n){this._verifyNotCommitted();const r=kw(e,this._firestore),i=aw(r.converter,t,n),s=Iv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Fh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=kw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ts(t))||t instanceof pv?Rv(this._dataReader,"WriteBatch.update",r._key,t,n,o):Ov(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Fh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kw(e,this._firestore);return this._mutations=this._mutations.concat(new $h(t._key,Fh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wa(Ha.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kw(e,t){if((e=Ts(e)).firestore!==t)throw new Wa(Ha.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class xw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sv(e)}get(e){const t=kw(e,this._firestore),n=new lw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ba();const r=e[0];if(r.isFoundDocument())return new qv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new qv(this._firestore,n,t._key,null,t.converter);throw Ba()}))}set(e,t,n){const r=kw(e,this._firestore),i=aw(r.converter,t,n),s=Iv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=kw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ts(t))||t instanceof pv?Rv(this._dataReader,"Transaction.update",r._key,t,n,o):Ov(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=kw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kw(e,this._firestore),n=new mw(this._firestore);return super.get(e).then((e=>new uw(this._firestore,n,t._key,e._document,new cw(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){La=e}(Wo),Mo(new ks("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new iv(new Ya(e.getProvider("auth-internal")),new tl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wa(Ha.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Xo(Pa,"4.6.3",e),Xo(Pa,"4.6.3","esm2017")}();function Cw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Wa("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Nw(){if("undefined"===typeof Uint8Array)throw new Wa("unimplemented","Uint8Arrays are not available in this environment.")}function Aw(){if("undefined"==typeof atob)throw new Wa("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ow{constructor(e){this._delegate=e}static fromBase64String(e){return Aw(),new Ow(fv.fromBase64String(e))}static fromUint8Array(e){return Nw(),new Ow(fv.fromUint8Array(e))}toBase64(){return Aw(),this._delegate.toBase64()}toUint8Array(){return Nw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Pw{enableIndexedDbPersistence(e,t){return function(e,t){dv(e=qy(e,iv));const n=sv(e);if(n._uninitializedComponentsProvider)throw new Wa(Ha.FAILED_PRECONDITION,"SDK cache is already specified.");Va("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new my;return av(n,i,new fy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){dv(e=qy(e,iv));const t=sv(e);if(t._uninitializedComponentsProvider)throw new Wa(Ha.FAILED_PRECONDITION,"SDK cache is already specified.");Va("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new my;return av(t,r,new py(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Wa(Ha.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ga;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Cl.D())return Promise.resolve();const t=e+"main";await Cl.delete(t)}(Kp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Dw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Va("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Gy(this._delegate,e,t,n)}enableNetwork(){return cv(this._delegate)}disableNetwork(){return uv(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Uy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lv(this._delegate)}onSnapshotsInSync(e){return _w(this._delegate,e)}get app(){if(!this._appCompat)throw new Wa("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qw(this,Yy(this._delegate,e))}catch(kC){throw Vw(kC,"collection()","Firestore.collection()")}}doc(e){try{return new Uw(this,Xy(this._delegate,e))}catch(kC){throw Vw(kC,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hw(this,function(e,t){if(e=qy(e,Wy),jy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wa(Ha.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Qy(e,null,function(e){return new Bu(ul.emptyPath(),e)}(t))}(this._delegate,e))}catch(kC){throw Vw(kC,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=qy(e,iv);const r=Object.assign(Object.assign({},Iw),n);return function(e){if(e.maxAttempts<1)throw new Wa(Ha.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Ga;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Oy(e);new by(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(sv(e),(n=>t(new xw(e,n))),r)}(this._delegate,(t=>e(new Fw(this,t))))}batch(){return sv(this._delegate),new Mw(new Tw(this._delegate,(e=>Ew(this._delegate,e))))}loadBundle(e){return function(e,t){const n=sv(e=qy(e,iv)),r=new rv;return Ly(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return hv(this._delegate,e).then((e=>e?new Hw(this,e):null))}}class Lw extends ow{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ow(new fv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Uw.forKey(t,this.firestore,null)}}class Fw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Lw(e)}get(e){const t=$w(e);return this._delegate.get(t).then((e=>new qw(this._firestore,new uw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=$w(e);return n?(Cw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=$w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=$w(e);return this._delegate.delete(t),this}}class Mw{constructor(e){this._delegate=e}set(e,t,n){const r=$w(e);return n?(Cw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=$w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=$w(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new hw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=jw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new jw(e,new Lw(e),t),r.set(t,i)),i}}jw.INSTANCES=new WeakMap;class Uw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Wa("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Uw(t,new $y(t._delegate,n,new fl(e)))}static forKey(e,t,n){return new Uw(t,new $y(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Qw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qw(this.firestore,Yy(this._delegate,e))}catch(kC){throw Vw(kC,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ts(e))instanceof $y&&Zy(this._delegate,e)}set(e,t){t=Cw("DocumentReference.set",t);try{return t?vw(this._delegate,e,t):vw(this._delegate,e)}catch(kC){throw Vw(kC,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ww(this._delegate,e):ww(this._delegate,e,t,...r)}catch(kC){throw Vw(kC,"updateDoc()","DocumentReference.update()")}}delete(){return Ew(qy((e=this._delegate).firestore,iv),[new $h(e._key,Fh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zw(t),i=Bw(t,(e=>new qw(this.firestore,new uw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return bw(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?gw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qy(e,$y);const t=qy(e.firestore,iv);return Py(sv(t),e._key,{source:"server"}).then((n=>Sw(t,e,n)))}(this._delegate):function(e){e=qy(e,$y);const t=qy(e.firestore,iv);return Py(sv(t),e._key).then((n=>Sw(t,e,n)))}(this._delegate),t.then((e=>new qw(this.firestore,new uw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Uw(this.firestore,e?this._delegate.withConverter(jw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Vw(e,t,n){return e.message=e.message.replace(t,n),e}function zw(e){for(const t of e)if("object"===typeof t&&!Rw(t))return t;return{}}function Bw(e,t){var n,r;let i;return i=Rw(e[0])?e[0]:Rw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Uw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pw(this._delegate,e._delegate)}}class Kw extends qw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Ba(),t}}class Hw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lw(e)}where(e,t,n){try{return new Hw(this.firestore,$v(this._delegate,function(e,t,n){const r=t,i=Hv("where",e);return Jv._create(i,r,n)}(e,t,n)))}catch(kC){throw Vw(kC,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hw(this.firestore,$v(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Hv("orderBy",e);return Xv._create(n,t)}(e,t)))}catch(kC){throw Vw(kC,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hw(this.firestore,$v(this._delegate,(Ky("limit",t=e),Zv._create("limit",t,"F"))))}catch(t){throw Vw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Hw(this.firestore,$v(this._delegate,(Ky("limitToLast",t=e),Zv._create("limitToLast",t,"L"))))}catch(t){throw Vw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Hw(this.firestore,$v(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ew._create("startAt",t,!0)}(...arguments)))}catch(kC){throw Vw(kC,"startAt()","Query.startAt()")}}startAfter(){try{return new Hw(this.firestore,$v(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ew._create("startAfter",t,!1)}(...arguments)))}catch(kC){throw Vw(kC,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Hw(this.firestore,$v(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tw._create("endBefore",t,!1)}(...arguments)))}catch(kC){throw Vw(kC,"endBefore()","Query.endBefore()")}}endAt(){try{return new Hw(this.firestore,$v(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tw._create("endAt",t,!0)}(...arguments)))}catch(kC){throw Vw(kC,"endAt()","Query.endAt()")}}isEqual(e){return ev(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?yw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mw(t);return Dy(n,e._query,{source:"server"}).then((n=>new dw(t,r,e,n)))}(this._delegate):function(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mw(t);return Wv(e._query),Dy(n,e._query).then((n=>new dw(t,r,e,n)))}(this._delegate),t.then((e=>new Gw(this.firestore,new dw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=zw(t),i=Bw(t,(e=>new Gw(this.firestore,new dw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return bw(this._delegate,r,i)}withConverter(e){return new Hw(this.firestore,e?this._delegate.withConverter(jw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ww{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Gw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Kw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ww(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Kw(this._firestore,n))}))}isEqual(e){return pw(this._delegate,e._delegate)}}class Qw extends Hw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Uw(this.firestore,e):null}doc(e){try{return new Uw(this.firestore,void 0===e?Xy(this._delegate):Xy(this._delegate,e))}catch(kC){throw Vw(kC,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=qy(e.firestore,iv),r=Xy(e),i=aw(e.converter,t);return Ew(n,[Iv(Sv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Uw(this.firestore,e)))}isEqual(e){return Zy(this._delegate,e._delegate)}withConverter(e){return new Qw(this.firestore,e?this._delegate.withConverter(jw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $w(e){return qy(e,$y)}class Jw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new pv(...t)}static documentId(){return new Jw(dl.keyField().canonicalString())}isEqual(e){return(e=Ts(e))instanceof pv&&this._delegate._internalPath.isEqual(e._internalPath)}}class Yw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Yw(e)}static delete(){const e=new Tv("deleteField");return e._methodName="FieldValue.delete",new Yw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Yw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Yw(e)}static increment(e){const t=new Av("increment",e);return t._methodName="FieldValue.increment",new Yw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Xw={Firestore:Dw,GeoPoint:gv,Timestamp:al,Blob:Ow,Transaction:Fw,WriteBatch:Mw,DocumentReference:Uw,DocumentSnapshot:qw,Query:Hw,QueryDocumentSnapshot:Kw,QuerySnapshot:Gw,CollectionReference:Qw,FieldPath:Jw,FieldValue:Yw,setLogLevel:function(e){var t;t=e,Fa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Zw;(function(e,t){e.INTERNAL.registerComponent(new ks("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Xw)))})(Zw=ya,((e,t)=>new Dw(e,t,new Pw))),Zw.registerVersion("@firebase/firestore-compat","0.3.32");function eb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const tb={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},nb="EMAIL_SIGNIN",rb="PASSWORD_RESET",ib="RECOVER_EMAIL",sb="REVERT_SECOND_FACTOR_ADDITION",ob="VERIFY_AND_CHANGE_EMAIL",ab="VERIFY_EMAIL";function lb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cb=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ub=lb,hb=new ps("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),db=new Fs("@firebase/auth");function fb(e){if(db.logLevel<=Os.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];db.error("Auth (".concat(Wo,"): ").concat(e),...n)}}function pb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wb(e,...n)}function mb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wb(e,...n)}function gb(e,t,n){const r=Object.assign(Object.assign({},ub()),{[t]:n});return new ps("auth","Firebase",r).create(t,{appName:e.name})}function yb(e){return gb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pb(e,"argument-error"),gb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return hb.create(e,...n)}function bb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wb(t,...r)}}function _b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fb(t),new Error(t)}function Eb(e,t){e||_b(t)}function Sb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ib(){return"http:"===Tb()||"https:"===Tb()}function Tb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class kb{constructor(e,t){this.shortDelay=e,this.longDelay=t,Eb(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ss())||cs()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ib()||ls()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function xb(e,t){Eb(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Cb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ab=new kb(3e4,6e4);function Ob(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Rb(e,t,n,r){return Pb(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ws(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Cb.fetch()(Lb(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Pb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Nb),t);try{const t=new Mb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw jb(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw jb(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw jb(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw jb(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw gb(e,a,o);pb(e,a)}}catch(kC){if(kC instanceof fs)throw kC;pb(e,"network-request-failed",{message:String(kC)})}}async function Db(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Rb(e,t,n,r,i);return"mfaPendingCredential"in s&&pb(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Lb(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?xb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Fb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(mb(this.auth,"network-request-failed"))),Ab.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function jb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mb(e,t,r);return i.customData._tokenResponse=n,i}function Ub(e){return void 0!==e&&void 0!==e.getResponse}function Vb(e){return void 0!==e&&void 0!==e.enterprise}class zb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Bb(e,t){return Rb(e,"GET","/v2/recaptchaConfig",Ob(e,t))}async function qb(e,t){return Rb(e,"POST","/v1/accounts:lookup",t)}function Kb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(kC){}}function Hb(e){return 1e3*Number(e)}function Wb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return fb("JWT malformed, contained fewer than 3 sections"),null;try{const e=Zi(n);return e?JSON.parse(e):(fb("Failed to decode base64 JWT payload"),null)}catch(kC){return fb("Caught error parsing JWT payload as JSON",null===kC||void 0===kC?void 0:kC.toString()),null}}function Gb(e){const t=Wb(e);return bb(t,"internal-error"),bb("undefined"!==typeof t.exp,"internal-error"),bb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Qb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(kC){throw kC instanceof fs&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(kC)&&e.auth.currentUser===e&&await e.auth.signOut(),kC}}class $b{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(kC){return void((null===kC||void 0===kC?void 0:kC.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Jb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kb(this.lastLoginAt),this.creationTime=Kb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yb(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qb(e,qb(n,{idToken:r}));bb(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Xb(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Xb(e){return e.map((e=>{var{providerId:t}=e,n=eb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Zb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bb(e.idToken,"internal-error"),bb("undefined"!==typeof e.idToken,"internal-error"),bb("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){bb(0!==e.length,"internal-error");const t=Gb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(bb(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Pb(e,{},(async()=>{const n=ws({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Lb(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Cb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Zb;return n&&(bb("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(bb("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(bb("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zb,this.toJSON())}_performRefresh(){return _b("not implemented")}}function e_(e,t){bb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class t_{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=eb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $b(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qb(this,this.stsTokenManager.getToken(this.auth,e));return bb(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ts(e),r=await n.getIdToken(t),i=Wb(r);bb(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kb(Hb(i.auth_time)),issuedAtTime:Kb(Hb(i.iat)),expirationTime:Kb(Hb(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ts(e);await Yb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(bb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new t_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){bb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zo(this.auth.app))return Promise.reject(yb(this.auth));const e=await this.getIdToken();return await Qb(this,async function(e,t){return Rb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;bb(v&&E,e,"internal-error");const S=Zb.fromJSON(this.name,E);bb("string"===typeof v,e,"internal-error"),e_(u,e.name),e_(h,e.name),bb("boolean"===typeof w,e,"internal-error"),bb("boolean"===typeof b,e,"internal-error"),e_(d,e.name),e_(f,e.name),e_(p,e.name),e_(m,e.name),e_(g,e.name),e_(y,e.name);const I=new t_({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zb;r.updateFromServerResponse(t);const i=new t_({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Yb(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];bb(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Xb(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Zb;o.updateFromIdToken(n);const a=new t_({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Jb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const n_=new Map;function r_(e){Eb(e instanceof Function,"Expected a class definition");let t=n_.get(e);return t?(Eb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,n_.set(e,t),t)}class i_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}i_.type="NONE";const s_=i_;function o_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class a_{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=o_(this.userKey,r.apiKey,i),this.fullPersistenceKey=o_("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?t_._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new a_(r_(s_),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||r_(s_);const s=o_(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=t_._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new a_(i,e,n)):new a_(i,e,n)}}function l_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(d_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(c_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(p_(t))return"Blackberry";if(m_(t))return"Webos";if(u_(t))return"Safari";if((t.includes("chrome/")||h_(t))&&!t.includes("edge/"))return"Chrome";if(f_(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function c_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/firefox\//i.test(e)}function u_(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/crios\//i.test(e)}function d_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/iemobile/i.test(e)}function f_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/android/i.test(e)}function p_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/blackberry/i.test(e)}function m_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/webos/i.test(e)}function g_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function y_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return g_(e)||f_(e)||m_(e)||p_(e)||/windows phone/i.test(e)||d_(e)}function v_(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=l_(ss());break;case"Worker":t="".concat(l_(ss()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wo,"/").concat(r)}class w_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(kC){r(kC)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(kC){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===kC||void 0===kC?void 0:kC.message})}}}class b_{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class __{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S_(this),this.idTokenSubscription=new S_(this),this.beforeStateQueue=new w_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=r_(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await a_.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(kC){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qb(this,{idToken:e}),n=await t_._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(zo(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(kC){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(kC)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bb(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(kC){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yb(e)}catch(kC){if((null===kC||void 0===kC?void 0:kC.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zo(this.app))return Promise.reject(yb(this));const t=e?Ts(e):null;return t&&bb(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&bb(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return zo(this.app)?Promise.reject(yb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zo(this.app)?Promise.reject(yb(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(r_(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rb(e,"GET","/v2/passwordPolicy",Ob(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new b_(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ps("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rb(e,"POST","/v2/accounts:revokeToken",Ob(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&r_(e)||this._popupRedirectResolver;bb(t,this,"argument-error"),this.redirectPersistenceManager=await a_.create(this,[r_(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bb(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bb(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(db.logLevel<=Os.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];db.warn("Auth (".concat(Wo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function E_(e){return Ts(e)}class S_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Es((e=>this.observer=e))}get next(){return bb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let I_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T_(e){return I_.loadJS(e)}function k_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class x_{constructor(e){this.type="recaptcha-enterprise",this.auth=E_(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Vb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new zb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Vb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=I_.recaptchaEnterpriseScript;0!==t.length&&(t+=i),T_(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function C_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new x_(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function N_(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await C_(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await C_(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function A_(e,t,n){const r=E_(e);bb(r._canInitEmulator,r,"emulator-config-failed"),bb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=O_(t),{host:o,port:a}=function(e){const t=O_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:R_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:R_(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function O_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function R_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class P_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _b("not implemented")}_getIdTokenResponse(e){return _b("not implemented")}_linkToIdToken(e,t){return _b("not implemented")}_getReauthenticationResolver(e){return _b("not implemented")}}async function D_(e,t){return Rb(e,"POST","/v1/accounts:resetPassword",Ob(e,t))}async function L_(e,t){return Rb(e,"POST","/v1/accounts:signUp",t)}async function F_(e,t){return Db(e,"POST","/v1/accounts:signInWithPassword",Ob(e,t))}async function M_(e,t){return Rb(e,"POST","/v1/accounts:sendOobCode",Ob(e,t))}async function j_(e,t){return M_(e,t)}async function U_(e,t){return M_(e,t)}class V_ extends P_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new V_(e,t,"password")}static _fromEmailAndCode(e,t){return new V_(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return N_(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",F_);case"emailLink":return async function(e,t){return Db(e,"POST","/v1/accounts:signInWithEmailLink",Ob(e,t))}(e,{email:this._email,oobCode:this._password});default:pb(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return N_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",L_);case"emailLink":return async function(e,t){return Db(e,"POST","/v1/accounts:signInWithEmailLink",Ob(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:pb(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function z_(e,t){return Db(e,"POST","/v1/accounts:signInWithIdp",Ob(e,t))}class B_ extends P_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new B_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pb("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=eb(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new B_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return z_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,z_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,z_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ws(t)}return e}}const q_={USER_NOT_FOUND:"user-not-found"};class K_ extends P_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new K_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new K_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Db(e,"POST","/v1/accounts:signInWithPhoneNumber",Ob(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Db(e,"POST","/v1/accounts:signInWithPhoneNumber",Ob(e,t));if(n.temporaryProof)throw jb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Db(e,"POST","/v1/accounts:signInWithPhoneNumber",Ob(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),q_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new K_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class H_{constructor(e){var t,n,r,i,s,o;const a=bs(_s(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);bb(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=bs(_s(e)).link,n=t?bs(_s(t)).deep_link_id:null,r=bs(_s(e)).deep_link_id;return(r?bs(_s(r)).link:null)||r||n||t||e}(e);try{return new H_(t)}catch(n){return null}}}class W_{constructor(){this.providerId=W_.PROVIDER_ID}static credential(e,t){return V_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=H_.parseLink(t);return bb(n,"argument-error"),V_._fromEmailAndCode(e,n.code,n.tenantId)}}W_.PROVIDER_ID="password",W_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",W_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class G_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Q_ extends G_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $_ extends Q_{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return bb("providerId"in t&&"signInMethod"in t,"argument-error"),B_._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return bb(e.idToken||e.accessToken,"argument-error"),B_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return $_.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $_.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new $_(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(kC){return null}}}class J_ extends Q_{constructor(){super("facebook.com")}static credential(e){return B_._fromParams({providerId:J_.PROVIDER_ID,signInMethod:J_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return J_.credentialFromTaggedObject(e)}static credentialFromError(e){return J_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return J_.credential(t.oauthAccessToken)}catch(n){return null}}}J_.FACEBOOK_SIGN_IN_METHOD="facebook.com",J_.PROVIDER_ID="facebook.com";class Y_ extends Q_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return B_._fromParams({providerId:Y_.PROVIDER_ID,signInMethod:Y_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Y_.credentialFromTaggedObject(e)}static credentialFromError(e){return Y_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Y_.credential(n,r)}catch(i){return null}}}Y_.GOOGLE_SIGN_IN_METHOD="google.com",Y_.PROVIDER_ID="google.com";class X_ extends Q_{constructor(){super("github.com")}static credential(e){return B_._fromParams({providerId:X_.PROVIDER_ID,signInMethod:X_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return X_.credentialFromTaggedObject(e)}static credentialFromError(e){return X_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return X_.credential(t.oauthAccessToken)}catch(n){return null}}}X_.GITHUB_SIGN_IN_METHOD="github.com",X_.PROVIDER_ID="github.com";class Z_ extends P_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return z_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,z_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,z_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Z_(n,i):null}static _create(e,t){return new Z_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class eE extends G_{constructor(e){bb(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return eE.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return eE.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Z_.fromJSON(e);return bb(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Z_._create(r,n)}catch(kC){return null}}}class tE extends Q_{constructor(){super("twitter.com")}static credential(e,t){return B_._fromParams({providerId:tE.PROVIDER_ID,signInMethod:tE.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tE.credentialFromTaggedObject(e)}static credentialFromError(e){return tE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return tE.credential(n,r)}catch(i){return null}}}async function nE(e,t){return Db(e,"POST","/v1/accounts:signUp",Ob(e,t))}tE.TWITTER_SIGN_IN_METHOD="twitter.com",tE.PROVIDER_ID="twitter.com";class rE{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await t_._fromIdTokenResponse(e,n,r),s=iE(n);return new rE({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=iE(n);return new rE({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function iE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class sE extends fs{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,sE.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new sE(e,t,n,r)}}function oE(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw sE._fromErrorAndOperation(e,n,t,r);throw n}))}function aE(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function lE(e,t){const n=Ts(e);await uE(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Rb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=aE(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function cE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rE._forOperation(e,"link",r)}async function uE(e,t,n){await Yb(t);const r=!1===e?"provider-already-linked":"no-such-provider";bb(aE(t.providerData).has(n)===e,t.auth,r)}async function hE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(zo(r.app))return Promise.reject(yb(r));const i="reauthenticate";try{const s=await Qb(e,oE(r,i,t,e),n);bb(s.idToken,r,"internal-error");const o=Wb(s.idToken);bb(o,r,"internal-error");const{sub:a}=o;return bb(e.uid===a,r,"user-mismatch"),rE._forOperation(e,i,s)}catch(kC){throw(null===kC||void 0===kC?void 0:kC.code)==="auth/".concat("user-not-found")&&pb(r,"user-mismatch"),kC}}async function dE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(zo(e.app))return Promise.reject(yb(e));const r="signIn",i=await oE(e,r,t),s=await rE._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function fE(e,t){return dE(E_(e),t)}async function pE(e,t){const n=Ts(e);return await uE(!1,n,t.providerId),cE(n,t)}async function mE(e,t){return hE(Ts(e),t)}async function gE(e,t){if(zo(e.app))return Promise.reject(yb(e));const n=E_(e),r=await async function(e,t){return Db(e,"POST","/v1/accounts:signInWithCustomToken",Ob(e,t))}(n,{token:t,returnSecureToken:!0}),i=await rE._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class yE{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?vE._fromServerResponse(e,t):"totpInfo"in t?wE._fromServerResponse(e,t):pb(e,"internal-error")}}class vE extends yE{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new vE(t)}}class wE extends yE{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new wE(t)}}function bE(e,t,n){var r;bb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),bb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(bb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(bb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function _E(e){const t=E_(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function EE(e,t){await async function(e,t){return Rb(e,"POST","/v1/accounts:update",Ob(e,t))}(Ts(e),{oobCode:t})}async function SE(e,t){const n=Ts(e),r=await D_(n,{oobCode:t}),i=r.requestType;switch(bb(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":bb(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":bb(r.mfaInfo,n,"internal-error");default:bb(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=yE._fromServerResponse(E_(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function IE(e,t){const n={identifier:t,continueUri:Ib()?Sb():"http://localhost"},{signinMethods:r}=await async function(e,t){return Rb(e,"POST","/v1/accounts:createAuthUri",Ob(e,t))}(Ts(e),n);return r||[]}async function TE(e,t){const n=Ts(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&bE(n.auth,r,t);const{email:i}=await async function(e,t){return M_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function kE(e,t,n){const r=Ts(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&bE(r.auth,i,n);const{email:s}=await async function(e,t){return M_(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function xE(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Ts(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Qb(i,async function(e,t){return Rb(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function CE(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Qb(e,async function(e,t){return Rb(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class NE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class AE extends NE{constructor(e,t,n,r){super(e,t,n),this.username=r}}class OE extends NE{constructor(e,t){super(e,"facebook.com",t)}}class RE extends AE{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class PE extends NE{constructor(e,t){super(e,"google.com",t)}}class DE extends AE{constructor(e,t,n){super(e,"twitter.com",t,n)}}function LE(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Wb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new NE(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new OE(s,i);case"github.com":return new RE(s,i);case"google.com":return new PE(s,i);case"twitter.com":return new DE(s,i,e.screenName||null);case"custom":case"anonymous":return new NE(s,null);default:return new NE(s,r,i)}}(n)}class FE{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new FE("enroll",e,t)}static _fromMfaPendingCredential(e){return new FE("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return FE._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return FE._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ME{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=E_(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>yE._fromServerResponse(n,e)));bb(r.mfaPendingCredential,n,"internal-error");const s=FE._fromMfaPendingCredential(r.mfaPendingCredential);return new ME(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await rE._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return bb(t.user,n,"internal-error"),rE._forOperation(t.user,t.operationType,o);default:pb(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class jE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>yE._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new jE(e)}async getSession(){return FE._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qb(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Qb(this.user,function(e,t){return Rb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ob(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(kC){throw kC}}}const UE=new WeakMap;const VE="__sak";class zE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(VE,"1"),this.storage.removeItem(VE),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class BE extends zE{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ss();return u_(e)||g_(e)}()&&function(){try{return!(!window||window===window.top)}catch(kC){return!1}}(),this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);us()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BE.type="LOCAL";const qE=BE;class KE extends zE{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KE.type="SESSION";const HE=KE;class WE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new WE(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function GE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}WE.receivers=[];class QE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=GE("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function $E(){return window}function JE(){return"undefined"!==typeof $E().WorkerGlobalScope&&"function"===typeof $E().importScripts}const YE="firebaseLocalStorageDb",XE="firebaseLocalStorage",ZE="fbase_key";class eS{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function tS(e,t){return e.transaction([XE],t?"readwrite":"readonly").objectStore(XE)}function nS(){const e=indexedDB.open(YE,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(XE,{keyPath:ZE})}catch(kC){n(kC)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(XE)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(YE);return new eS(e).toPromise()}(),t(await nS()))}))}))}async function rS(e,t,n){const r=tS(e,!0).put({[ZE]:t,value:n});return new eS(r).toPromise()}function iS(e,t){const n=tS(e,!0).delete(t);return new eS(n).toPromise()}class sS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await nS()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(kC){if(t++>3)throw kC;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=WE._getInstance(JE()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new QE(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nS();return await rS(e,VE,"1"),await iS(e,VE),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>rS(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=tS(e,!1).get(t),r=await new eS(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>iS(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=tS(e,!1).getAll();return new eS(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}sS.type="LOCAL";const oS=sS;const aS=1e12;class lS{constructor(e){this.auth=e,this.counter=aS,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new cS(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||aS;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||aS;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||aS;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class cS{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;bb(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(kC){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(kC){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uS=k_("rcb"),hS=new kb(3e4,6e4);class dS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=$E().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return bb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ub($E().grecaptcha)?Promise.resolve($E().grecaptcha):new Promise(((n,r)=>{const i=$E().setTimeout((()=>{r(mb(e,"network-request-failed"))}),hS.get());$E()[uS]=()=>{$E().clearTimeout(i),delete $E()[uS];const s=$E().grecaptcha;if(!s||!Ub(s))return void r(mb(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};T_("".concat(I_.recaptchaV2Script,"?").concat(ws({onload:uS,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(mb(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=$E().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fS{async load(e){return new lS(e)}clearedOneInstance(){}}const pS="recaptcha",mS={theme:"light",type:"image"};class gS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},mS);this.parameters=n,this.type=pS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=E_(e),this.isInvisible="invisible"===this.parameters.size,bb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;bb(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fS:new dS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(kC){return Promise.reject(kC)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){bb(!this.parameters.sitekey,this.auth,"argument-error"),bb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),bb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=$E()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){bb(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){bb(Ib()&&!JE(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Rb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);bb(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return bb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yS{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=K_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function vS(e,t,n){var r;const i=await n.verify();try{let s;if(bb("string"===typeof i,e,"argument-error"),bb(n.type===pS,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){bb("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Rb(e,"POST","/v2/accounts/mfaEnrollment:start",Ob(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{bb("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;bb(n,e,"missing-multi-factor-info");const o=await function(e,t){return Rb(e,"POST","/v2/accounts/mfaSignIn:start",Ob(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Rb(e,"POST","/v1/accounts:sendVerificationCode",Ob(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class wS{constructor(e){this.providerId=wS.PROVIDER_ID,this.auth=E_(e)}verifyPhoneNumber(e,t){return vS(this.auth,e,Ts(t))}static credential(e,t){return K_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wS.credentialFromTaggedObject(t)}static credentialFromError(e){return wS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?K_._fromTokenResponse(n,r):null}}function bS(e,t){return t?r_(t):(bb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wS.PROVIDER_ID="phone",wS.PHONE_SIGN_IN_METHOD="phone";class _S extends P_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return z_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return z_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return z_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ES(e){return dE(e.auth,new _S(e),e.bypassAuthState)}function SS(e){const{auth:t,user:n}=e;return bb(n,t,"internal-error"),hE(n,new _S(e),e.bypassAuthState)}async function IS(e){const{auth:t,user:n}=e;return bb(n,t,"internal-error"),cE(n,new _S(e),e.bypassAuthState)}class TS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(kC){this.reject(kC)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(kC){this.reject(kC)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ES;case"linkViaPopup":case"linkViaRedirect":return IS;case"reauthViaPopup":case"reauthViaRedirect":return SS;default:pb(this.auth,"internal-error")}}resolve(e){Eb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Eb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kS=new kb(2e3,1e4);class xS extends TS{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,xS.currentPopupAction&&xS.currentPopupAction.cancel(),xS.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bb(e,this.auth,"internal-error"),e}async onExecution(){Eb(1===this.filter.length,"Popup operations only handle one event");const e=GE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(mb(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xS.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(mb(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,kS.get())};e()}}xS.currentPopupAction=null;const CS="pendingRedirect",NS=new Map;class AS extends TS{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=NS.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=DS(t),r=PS(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(kC){e=()=>Promise.reject(kC)}NS.set(this.auth._key(),e)}return this.bypassAuthState||NS.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function OS(e,t){return PS(e)._set(DS(t),"true")}function RS(e,t){NS.set(e._key(),t)}function PS(e){return r_(e._redirectPersistence)}function DS(e){return o_(CS,e.config.apiKey,e.name)}function LS(e,t,n){return async function(e,t,n){if(zo(e.app))return Promise.reject(yb(e));const r=E_(e);vb(e,t,G_),await r._initializationPromise;const i=bS(r,n);return await OS(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function FS(e,t,n){return async function(e,t,n){const r=Ts(e);if(vb(r.auth,t,G_),zo(r.auth.app))return Promise.reject(yb(r.auth));await r.auth._initializationPromise;const i=bS(r.auth,n);await OS(i,r.auth);const s=await US(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function MS(e,t,n){return async function(e,t,n){const r=Ts(e);vb(r.auth,t,G_),await r.auth._initializationPromise;const i=bS(r.auth,n);await uE(!1,r,t.providerId),await OS(i,r.auth);const s=await US(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function jS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(zo(e.app))return Promise.reject(yb(e));const r=E_(e),i=bS(r,t),s=new AS(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function US(e){const t=GE("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class VS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!BS(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mb(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zS(e))}saveEventToCache(e){this.cachedEventUids.add(zS(e)),this.lastProcessedEventTime=Date.now()}}function zS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function BS(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function qS(e){return Rb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const KS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;function WS(e){const t=Sb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!HS.test(n))return!1;if(KS.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const GS=new kb(3e4,6e4);function QS(){const e=$E().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function $S(e){return new Promise(((t,n)=>{var r,i,s;function o(){QS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{QS(),n(mb(e,"network-request-failed"))},timeout:GS.get()})}if(null===(i=null===(r=$E().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=$E().gapi)||void 0===s?void 0:s.load)){const t=k_("iframefcb");return $E()[t]=()=>{gapi.load?o():n(mb(e,"network-request-failed"))},T_("".concat(I_.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw JS=null,e}))}let JS=null;const YS=new kb(5e3,15e3),XS="__/auth/iframe",ZS="emulator/auth/iframe",eI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nI(e){const t=e.config;bb(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?xb(t,ZS):"https://".concat(e.config.authDomain,"/").concat(XS),r={apiKey:t.apiKey,appName:e.name,v:Wo},i=tI.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ws(r).slice(1))}async function rI(e){const t=await function(e){return JS=JS||$S(e),JS}(e),n=$E().gapi;return bb(n,e,"internal-error"),t.open({where:document.body,url:nI(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eI,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=mb(e,"network-request-failed"),s=$E().setTimeout((()=>{r(i)}),YS.get());function o(){$E().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const iI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(kC){}}}function oI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},iI),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ss().toLowerCase();n&&(a=h_(c)?"_blank":n),c_(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return g_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new sI(null);const h=window.open(t||"",a,u);bb(h,e,"popup-blocked");try{h.focus()}catch(kC){}return new sI(h)}const aI="__/auth/handler",lI="emulator/auth/handler",cI=encodeURIComponent("fac");async function uI(e,t,n,r,i,s){bb(e.config.authDomain,e,"auth-domain-config-required"),bb(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wo,eventId:i};if(t instanceof G_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Q_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(cI,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(aI);return xb(t,lI)}(e),"?").concat(ws(a).slice(1)).concat(c)}const hI="webStorageSupport";const dI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=jS,this._overrideRedirectResult=RS}async _openPopup(e,t,n,r){var i;Eb(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return oI(e,await uI(e,t,n,Sb(),r),GE())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){$E().location.href=e}(await uI(e,t,n,Sb(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Eb(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await rI(e),n=new VS(e);return t.register("authEvent",(t=>{bb(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hI,{type:hI},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[hI];void 0!==i&&t(!!i),pb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qS(e);for(const r of t)try{if(WS(r))return}catch(n){}pb(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y_()||u_()||g_()}};class fI{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _b("unexpected MultiFactorSessionType")}}}class pI extends fI{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new pI(e)}_finalizeEnroll(e,t,n){return function(e,t){return Rb(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ob(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Rb(e,"POST","/v2/accounts/mfaSignIn:finalize",Ob(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mI{constructor(){}static assertion(e){return pI._fromCredential(e)}}mI.FACTOR_ID="phone";var gI="@firebase/auth",yI="1.7.4";class vI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ns())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var wI;function bI(){return window}I_={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=mb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},wI="Browser",Mo(new ks("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;bb(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:wI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(wI)},c=new __(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(r_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Mo(new ks("auth-internal",(e=>(e=>new vI(e))(E_(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Xo(gI,yI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wI)),Xo(gI,yI,"esm2017");async function _I(e,t,n){var r;const{BuildInfo:i}=bI();Eb(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Eb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return g_()?o.ibi=i.packageName:f_()?o.apn=i.packageName:pb(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,uI(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function EI(e){const{cordova:t}=bI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const SI=20;class II extends VS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function TI(e){const t=await CI()._get(NI(e));return t&&await CI()._remove(NI(e)),t}function kI(e,t){var n,r;const i=function(e){const t=AI(e),n=t.link?decodeURIComponent(t.link):void 0,r=AI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return AI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=AI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(kC){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?mb(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function xI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<SI;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function CI(){return r_(qE)}function NI(e){return o_("authEvent",e.config.apiKey,e.name)}function AI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return bs(n.join("?"))}const OI=class{constructor(){this._redirectPersistence=HE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jS,this._overrideRedirectResult=RS}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new II(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){pb(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=bI();bb("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),bb("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),bb("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),bb("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),bb("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),NS.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:xI(),postBody:null,tenantId:e.tenantId,error:mb(e,"no-auth-event")}}(e,n,r);await function(e,t){return CI()._set(NI(e),t)}(e,s);const o=await _I(e,s,t);return async function(e,t,n){const{cordova:r}=bI();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(mb(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),f_()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await EI(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=bI(),n={};g_()?n.iosBundleId=t.packageName:f_()?n.androidPackageName=t.packageName:pb(e,"operation-not-supported-in-this-environment"),await qS(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=bI(),s=setTimeout((async()=>{await TI(e),t.onEvent(RI())}),500),o=async n=>{clearTimeout(s);const r=await TI(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=kI(r,n.url)),t.onEvent(i||RI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");bI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(kC){console.error(kC)}}}};function RI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mb("no-auth-event")}}function PI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function DI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return!("file:"!==PI()&&"ionic:"!==PI()&&"capacitor:"!==PI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function LI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return us()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss();return/Edge\/\d+/.test(e)}(e)}function FI(){try{const e=self.localStorage,t=GE();if(e)return e.setItem(t,"1"),e.removeItem(t),!LI()||ds()}catch(kC){return MI()&&ds()}return!1}function MI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function jI(){return("http:"===PI()||"https:"===PI()||ls()||DI())&&!(cs()||os())&&FI()&&!MI()}function UI(){return DI()&&"undefined"!==typeof document}const VI={LOCAL:"local",NONE:"none",SESSION:"session"},zI=bb,BI="persistence";async function qI(e){await e._initializationPromise;const t=KI(),n=o_(BI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function KI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(kC){return null}}const HI=bb;class WI{constructor(){this.browserResolver=r_(dI),this.cordovaResolver=r_(OI),this.underlyingResolver=null,this._redirectPersistence=HE,this._completeRedirectFn=jS,this._overrideRedirectResult=RS}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return UI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return HI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!UI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function GI(e){return e.unwrap()}function QI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new XI(e,function(e,t){var n;const r=Ts(e),i=t;return bb(t.customData.operationType,r,"argument-error"),bb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ME._fromError(r,i)}(e,t))}else if(r){const e=$I(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function $I(e){const{_tokenResponse:t}=e instanceof fs?e.customData:e;if(!t)return null;if(!(e instanceof fs)&&"temporaryProof"in t&&"phoneNumber"in t)return wS.credentialFromResult(e);const n=t.providerId;if(!n||n===tb.PASSWORD)return null;let r;switch(n){case tb.GOOGLE:r=Y_;break;case tb.FACEBOOK:r=J_;break;case tb.GITHUB:r=X_;break;case tb.TWITTER:r=tE;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Z_._create(n,o):B_._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new $_(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof fs?r.credentialFromError(e):r.credentialFromResult(e)}function JI(e,t){return t.catch((t=>{throw t instanceof fs&&QI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,$I(r)),additionalUserInfo:LE(e),user:ZI.getOrCreate(n)};var r}))}async function YI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>JI(e,n.confirm(t))}}class XI{constructor(e,t){this.resolver=t,this.auth=function(e){return e.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return JI(GI(this.auth),this.resolver.resolveSignIn(e))}}class ZI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ts(e);return UE.has(t)||UE.set(t,jE._fromUser(t)),UE.get(t)}(e)}static getOrCreate(e){return ZI.USER_MAP.has(e)||ZI.USER_MAP.set(e,new ZI(e)),ZI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return JI(this.auth,pE(this._delegate,e))}async linkWithPhoneNumber(e,t){return YI(this.auth,async function(e,t,n){const r=Ts(e);await uE(!1,r,"phone");const i=await vS(r.auth,t,Ts(n));return new yS(i,(e=>pE(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return JI(this.auth,async function(e,t,n){const r=Ts(e);vb(r.auth,t,G_);const i=bS(r.auth,n);return new xS(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,WI))}async linkWithRedirect(e){return await qI(E_(this.auth)),MS(this._delegate,e,WI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return JI(this.auth,mE(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return YI(this.auth,async function(e,t,n){const r=Ts(e);if(zo(r.auth.app))return Promise.reject(yb(r.auth));const i=await vS(r.auth,t,Ts(n));return new yS(i,(e=>mE(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return JI(this.auth,async function(e,t,n){const r=Ts(e);if(zo(r.auth.app))return Promise.reject(mb(r.auth,"operation-not-supported-in-this-environment"));vb(r.auth,t,G_);const i=bS(r.auth,n);return new xS(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,WI))}async reauthenticateWithRedirect(e){return await qI(E_(this.auth)),FS(this._delegate,e,WI)}sendEmailVerification(e){return TE(this._delegate,e)}async unlink(e){return await lE(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Ts(e);return zo(n.auth.app)?Promise.reject(yb(n.auth)):CE(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return CE(Ts(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Ts(e);if(zo(n.auth.app))return Promise.reject(yb(n.auth));await cE(n,t)}(this._delegate,e)}updateProfile(e){return xE(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return kE(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ZI.USER_MAP=new WeakMap;const eT=bb;class tT{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;eT(n,"invalid-api-key",{appName:e.name}),eT(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?WI:void 0;this._delegate=t.initialize({options:{persistence:rT(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(cb),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ZI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){A_(this._delegate,e,t)}applyActionCode(e){return EE(this._delegate,e)}checkActionCode(e){return SE(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await D_(Ts(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_E(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return JI(this._delegate,async function(e,t,n){if(zo(e.app))return Promise.reject(yb(e));const r=E_(e),i=N_(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nE),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_E(e),t})),o=await rE._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return IE(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=H_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){eT(jI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await E_(e)._initializationPromise,jS(e,t,!1)}(this._delegate,WI);return e?JI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){E_(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=nT(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=nT(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=E_(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){bb(t.handleCodeInApp,r,"argument-error"),t&&bE(r,e,t)}(i,n),await N_(r,i,"getOobCode",U_)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=E_(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&bE(r,i,n),await N_(r,i,"getOobCode",j_)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){zI(Object.values(VI).includes(t),e,"invalid-persistence-type"),cs()?zI(t!==VI.SESSION,e,"unsupported-persistence-type"):os()?zI(t===VI.NONE,e,"unsupported-persistence-type"):MI()?zI(t===VI.NONE||t===VI.LOCAL&&ds(),e,"unsupported-persistence-type"):zI(t===VI.NONE||FI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case VI.SESSION:t=HE;break;case VI.LOCAL:t=await r_(oS)._isAvailable()?oS:qE;break;case VI.NONE:t=s_;break;default:return pb("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return JI(this._delegate,async function(e){var t;if(zo(e.app))return Promise.reject(yb(e));const n=E_(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new rE({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await nE(n,{returnSecureToken:!0}),i=await rE._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return JI(this._delegate,fE(this._delegate,e))}signInWithCustomToken(e){return JI(this._delegate,gE(this._delegate,e))}signInWithEmailAndPassword(e,t){return JI(this._delegate,function(e,t,n){return zo(e.app)?Promise.reject(yb(e)):fE(Ts(e),W_.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_E(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return JI(this._delegate,async function(e,t,n){if(zo(e.app))return Promise.reject(yb(e));const r=Ts(e),i=W_.credentialWithLink(t,n||Sb());return bb(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),fE(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return YI(this._delegate,async function(e,t,n){if(zo(e.app))return Promise.reject(yb(e));const r=E_(e),i=await vS(r,t,Ts(n));return new yS(i,(e=>fE(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return eT(jI(),this._delegate,"operation-not-supported-in-this-environment"),JI(this._delegate,async function(e,t,n){if(zo(e.app))return Promise.reject(mb(e,"operation-not-supported-in-this-environment"));const r=E_(e);vb(e,t,G_);const i=bS(r,n);return new xS(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,WI))}async signInWithRedirect(e){return eT(jI(),this._delegate,"operation-not-supported-in-this-environment"),await qI(this._delegate),LS(this._delegate,e,WI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await SE(Ts(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function nT(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ZI.getOrCreate(e)),error:t,complete:n}}function rT(e,t){const n=function(e,t){const n=KI();if(!n)return[];const r=o_(BI,e,t);switch(n.getItem(r)){case VI.NONE:return[s_];case VI.LOCAL:return[oS,HE];case VI.SESSION:return[HE];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(oS)||n.push(oS),"undefined"!==typeof window)for(const r of[qE,HE])n.includes(r)||n.push(r);return n.includes(s_)||n.push(s_),n}tT.Persistence=VI;class iT{constructor(){this.providerId="phone",this._delegate=new wS(GI(ya.auth()))}static credential(e,t){return wS.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}iT.PHONE_SIGN_IN_METHOD=wS.PHONE_SIGN_IN_METHOD,iT.PROVIDER_ID=wS.PROVIDER_ID;const sT=bb;class oT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya.app();var r;sT(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new gS(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new ks("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new tT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:nb,PASSWORD_RESET:rb,RECOVER_EMAIL:ib,REVERT_SECOND_FACTOR_ADDITION:sb,VERIFY_AND_CHANGE_EMAIL:ob,VERIFY_EMAIL:ab}},EmailAuthProvider:W_,FacebookAuthProvider:J_,GithubAuthProvider:X_,GoogleAuthProvider:Y_,OAuthProvider:$_,SAMLAuthProvider:eE,PhoneAuthProvider:iT,PhoneMultiFactorGenerator:mI,RecaptchaVerifier:oT,TwitterAuthProvider:tE,Auth:tT,AuthCredential:P_,Error:fs}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.9")}(ya);ya.initializeApp({apiKey:"AIzaSyCAyxxvWWciV7yehwZd-CWBoCAhFw7m72E",authDomain:"bookstore-d224f.firebaseapp.com",projectId:"bookstore-d224f",storageBucket:"bookstore-d224f.appspot.com",messagingSenderId:"746163960358",appId:"1:746163960358:web:b19c74a9ee1d90d31904e7"});const aT=ya.auth();ya.firestore();var lT=n(579);const cT=function(){const e=_i(),t=O(),n=w((e=>(console.log("navbar products:",e.shoppingCart.cartProducts),e.shoppingCart.cartProducts))),i=localStorage.getItem("cartProducts"),s=n.length>0?n:JSON.parse(i),[o,a]=(0,r.useState)(s);return(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(o))}),[o]),(0,lT.jsx)("div",{children:(0,lT.jsx)("nav",{class:"navbar bg-dark border-bottom border-body","data-bs-theme":"dark",children:(0,lT.jsxs)("div",{class:"container",children:[(0,lT.jsx)(Wi,{to:"/",class:"navbar-brand fw-bold fs-4",href:"#",children:"BOOKSTORE"}),(0,lT.jsxs)("div",{className:"buttons",children:[(0,lT.jsxs)(Wi,{to:"/shoppingCart",className:"btn btn-outline-light ms-2",children:[(0,lT.jsx)("i",{className:"fa fa-shopping-cart me-1"}),"Cart (",o.length,")"]}),(0,lT.jsxs)("button",{onClick:async()=>{try{await aT.signOut(),t(Tr(!1)),e("/")}catch(n){console.error("Logout error:",n.message)}},className:"btn btn-outline-light ms-2",children:[(0,lT.jsx)("i",{className:"fa fa-sign-out me-1 "}),"Logout"]})]})]})})})};const uT=function(){let e=_i();const t=w((e=>e.bookstore.productDetails)),n=O();return(0,r.useEffect)((()=>{n(Er())}),[n]),(0,lT.jsx)("div",{className:"container",style:{marginTop:"40px"},children:(0,lT.jsx)("div",{className:"card-container",children:t.map((t=>(0,lT.jsxs)("div",{className:"card",onClick:()=>{return n=t.id,void e("/book-details/".concat(n));var n},children:[(0,lT.jsx)("img",{src:t.image_url,className:"card-img-top",alt:"book"}),(0,lT.jsxs)("div",{className:"card-body",children:[(0,lT.jsx)("h5",{className:"card-title",children:t.title}),(0,lT.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,lT.jsxs)("li",{className:"list-group-item",children:["Author: ",t.authors]}),(0,lT.jsxs)("li",{className:"list-group-item",children:["Price: Rs. ",t.num_pages]})]}),(0,lT.jsxs)("div",{className:"card-body d-flex justify-content-between",children:[(0,lT.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{n(Ir(e))})(t)},className:"btn btn-dark",children:"Add to Cart"}),(0,lT.jsx)("button",{onClick:t=>{t.stopPropagation(),e("/shoppingCart")},className:"btn btn-dark",children:"Go to Cart"})]})]})]},t.id)))})})};const hT=function(){_i();const e=w((e=>e.shoppingCart.cartProducts)),t=localStorage.getItem("cartProducts"),n=e||(t?JSON.parse(t):[]),[i,s]=(0,r.useState)(n);return(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(i))}),[i]),(0,lT.jsx)("div",{children:(0,lT.jsx)("nav",{className:"navbar bg-dark border-bottom border-body","data-bs-theme":"dark",children:(0,lT.jsxs)("div",{className:"container",children:[(0,lT.jsx)(Wi,{to:"/",className:"navbar-brand fw-bold fs-4",children:"BOOKSTORE"}),(0,lT.jsxs)("div",{className:"buttons",children:[(0,lT.jsxs)(Wi,{to:"/shoppingCart",className:"btn btn-outline-light ms-2",children:[(0,lT.jsx)("i",{className:"fa fa-shopping-cart me-1"}),"Cart (",i.length,")"]}),(0,lT.jsxs)(Wi,{to:"/login",className:"btn btn-outline-light ms-2",children:[(0,lT.jsx)("i",{className:"fa fa-sign-in me-1"}),"Login"]}),(0,lT.jsxs)(Wi,{to:"/signup",className:"btn btn-outline-light ms-2",children:[(0,lT.jsx)("i",{className:"fa fa-user-plus me-1"}),"Sign Up"]})]})]})})})},dT=()=>{const[e,t]=(0,r.useState)("All"),[n,i]=(0,r.useState)(""),s=w((e=>e.user)),o=(_i(),w((e=>e.bookstore.productDetails))),[a,l]=(0,r.useState)([]),c=O();(0,r.useEffect)((()=>{c(Er())}),[c]),(0,r.useEffect)((()=>{l(o.filter((t=>{const r=t.title.toLowerCase().includes(n.toLowerCase()),i="All"===e||t.genres.includes(e);return r&&i})))}),[o,n,e]);return(0,lT.jsxs)("div",{children:[s?(0,lT.jsx)(cT,{}):(0,lT.jsx)(hT,{}),(0,lT.jsx)("div",{className:"search-container",children:(0,lT.jsxs)("div",{className:"container",children:[(0,lT.jsx)("h2",{className:"display-3 fw-bolder text-center mb-4",children:"Find Your Book of Choice"}),(0,lT.jsxs)("div",{className:"input-group mb-3 mx-auto w-50",children:[(0,lT.jsx)("input",{onChange:e=>{i(e.target.value)},value:n,type:"text",className:"form-control",placeholder:"Search...","aria-label":"Search","aria-describedby":"button-addon2"}),(0,lT.jsx)("button",{onClick:()=>i(""),className:"btn btn-outline-secondary bg-dark text-white",type:"button",id:"button-addon2",children:"Clear"})]})]})}),(0,lT.jsxs)("div",{className:"genre d-flex justify-content-center mb-5 pb-5",children:[(0,lT.jsx)("button",{onClick:()=>t("All"),className:"btn btn-outline-dark me-2 ".concat("All"===e&&"active"),children:"All"}),(0,lT.jsx)("button",{onClick:()=>t("Romance"),className:"btn btn-outline-dark me-2 ".concat("Romance"===e&&"active"),children:"Romance"}),(0,lT.jsx)("button",{onClick:()=>t("Horror"),className:"btn btn-outline-dark me-2 ".concat("Horror"===e&&"active"),children:"Horror"}),(0,lT.jsx)("button",{onClick:()=>t("Fantasy"),className:"btn btn-outline-dark me-2 ".concat("Fantasy"===e&&"active"),children:"Fantasy"}),(0,lT.jsx)("button",{onClick:()=>t("Science Fiction"),className:"btn btn-outline-dark me-2 ".concat("Science Fiction"===e&&"active"),children:"Science Fiction"}),(0,lT.jsx)("button",{onClick:()=>t("Historical"),className:"btn btn-outline-dark me-2 ".concat("Historical"===e&&"active"),children:"History"})]}),"All"===e&&0===a.length?(0,lT.jsx)(uT,{}):(0,lT.jsx)("div",{className:"container",children:(0,lT.jsx)("div",{className:"card-container",children:a.map((e=>(0,lT.jsxs)("div",{className:"card",children:[(0,lT.jsx)("div",{className:"img-title",children:(0,lT.jsx)("img",{src:e.image_url,className:"card-img-top",alt:"book"})}),(0,lT.jsxs)("div",{className:"card-body",children:[(0,lT.jsx)("h5",{className:"card-title",children:e.title}),(0,lT.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,lT.jsxs)("li",{className:"list-group-item",children:["Author: ",e.authors]}),(0,lT.jsxs)("li",{className:"list-group-item",children:["Price: Rs. ",e.num_pages]})]}),(0,lT.jsxs)("div",{className:"buttons d-flex justify-content-between",children:[(0,lT.jsx)("button",{onClick:()=>(e=>{c(Ir(e))})(e),className:"btn btn-primary",children:"Add to Cart"}),(0,lT.jsx)(Wi,{to:"/shoppingCart",className:"btn btn-outline-primary",children:"Go to Cart"})]})]})]},e.id)))})})]})};var fT=n(139),pT=n.n(fT);const mT=["as","disabled"];function gT(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const yT=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,mT);const[s,{tagName:o}]=gT(Object.assign({tagName:n,disabled:r},i));return(0,lT.jsx)(o,Object.assign({},i,s,{ref:t}))}));yT.displayName="Button";const vT=["xxl","xl","lg","md","sm","xs"],wT="xs",bT=r.createContext({prefixes:{},breakpoints:vT,minBreakpoint:wT}),{Consumer:_T,Provider:ET}=bT;function ST(e,t){const{prefixes:n}=(0,r.useContext)(bT);return e||n[t]||t}const IT=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:l,...c}=e;const u=ST(r,"btn"),[h,{tagName:d}]=gT({tagName:n,disabled:a,...c}),f=d;return(0,lT.jsx)(f,{...h,...c,ref:t,disabled:a,className:pT()(l,u,o&&"active",i&&"".concat(u,"-").concat(i),s&&"".concat(u,"-").concat(s),c.href&&a&&"disabled")})}));IT.displayName="Button";const TT=IT,kT=!("undefined"===typeof window||!window.document||!window.document.createElement);var xT=!1,CT=!1;try{var NT={get passive(){return xT=!0},get once(){return CT=xT=!0}};kT&&(window.addEventListener("test",NT,NT),window.removeEventListener("test",NT,!0))}catch(kC){}const AT=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!CT){var i=r.once,s=r.capture,o=n;!CT&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,xT?r:s)}e.addEventListener(t,n,r)};function OT(e){return e&&e.ownerDocument||document}const RT=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var PT;function DT(e){if((!PT&&0!==PT||e)&&kT){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),PT=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return PT}const LT=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function FT(e){const t=LT(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const MT=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const jT=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=MT(e),r=MT(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};function UT(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}function VT(e,t){return function(e){var t=OT(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var zT=/([A-Z])/g;var BT=/^ms-/;function qT(e){return function(e){return e.replace(zT,"-$1").toLowerCase()}(e).replace(BT,"-ms-")}var KT=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const HT=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(qT(t))||VT(e).getPropertyValue(qT(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!KT.test(e))}(i)?n+=qT(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(qT(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const WT=function(e,t,n,r){return AT(e,t,n,r),function(){RT(e,t,n,r)}};function GT(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=WT(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function QT(e,t,n,r){null==n&&(n=function(e){var t=HT(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=GT(e,n,r),s=WT(e,"transitionend",t);return function(){i(),s()}}function $T(e){void 0===e&&(e=OT());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(kC){return e.body}}function JT(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}const YT=(XT="modal-open","".concat("data-rr-ui-").concat(XT));var XT;const ZT=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(HT(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(YT,""),HT(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(YT),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},ek=(0,r.createContext)(kT?window:void 0);ek.Provider;function tk(){return(0,r.useContext)(ek)}const nk=(e,t)=>kT?null==e?(t||OT()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const rk="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,ik="undefined"!==typeof document||rk?r.useLayoutEffect:r.useEffect;const sk=function(e){let{children:t,in:n,onExited:i,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,r.useRef)(null),l=(0,r.useRef)(n),c=FT(i);(0,r.useEffect)((()=>{n?l.current=!0:c(a.current)}),[n,c]);const u=jT(a,t.ref),h=(0,r.cloneElement)(t,{ref:u});return n?h:o||!l.current&&s?null:h};const ok=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function ak(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:s,onExiting:o,onExited:a,addEndListener:l,children:c}=e,u=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ok);const{major:h}=function(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}(),d=h>=19?c.props.ref:c.ref,f=(0,r.useRef)(null),p=jT(f,"function"===typeof c?null:d),m=e=>t=>{e&&f.current&&e(f.current,t)},g=(0,r.useCallback)(m(t),[t]),y=(0,r.useCallback)(m(n),[n]),v=(0,r.useCallback)(m(i),[i]),w=(0,r.useCallback)(m(s),[s]),b=(0,r.useCallback)(m(o),[o]),_=(0,r.useCallback)(m(a),[a]),E=(0,r.useCallback)(m(l),[l]);return Object.assign({},u,{nodeRef:f},t&&{onEnter:g},n&&{onEntering:y},i&&{onEntered:v},s&&{onExit:w},o&&{onExiting:b},a&&{onExited:_},l&&{addEndListener:E},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:p})):(0,r.cloneElement)(c,{ref:p})})}const lk=["component"];const ck=r.forwardRef(((e,t)=>{let{component:n}=e;const r=ak(function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,lk));return(0,lT.jsx)(n,Object.assign({ref:t},r))})),uk=ck;function hk(e){let{children:t,in:n,onExited:i,onEntered:s,transition:o}=e;const[a,l]=(0,r.useState)(!n);n&&a&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),s=(0,r.useRef)(!0),o=FT(n);return ik((()=>{if(!i.current)return;let e=!1;return o({in:t,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,o]),ik((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=jT(c,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:u})}function dk(e,t,n){return e?(0,lT.jsx)(uk,Object.assign({},n,{component:e})):t?(0,lT.jsx)(hk,Object.assign({},n,{transition:t})):(0,lT.jsx)(sk,Object.assign({},n))}const fk=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let pk;function mk(e){const t=tk(),n=e||function(e){return pk||(pk=new ZT({ownerDocument:null==e?void 0:e.document})),pk}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const gk=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:a,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:d,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:w=!0,restoreFocusOptions:b,renderDialog:_,renderBackdrop:E=(e=>(0,lT.jsx)("div",Object.assign({},e))),manager:S,container:I,onShow:T,onHide:k=(()=>{}),onExit:x,onExited:C,onExiting:N,onEnter:A,onEntering:O,onEntered:R}=e,P=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,fk);const D=tk(),L=function(e,t){const n=tk(),[i,s]=(0,r.useState)((()=>nk(e,null==n?void 0:n.document)));if(!i){const t=nk(e);t&&s(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=nk(e);t!==i&&s(t)}),[e,i]),i}(I),F=mk(S),M=function(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),j=function(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}(n),[U,V]=(0,r.useState)(!n),z=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>F),[F]),kT&&!j&&n&&(z.current=$T(null==D?void 0:D.document)),n&&U&&V(!1);const B=FT((()=>{if(F.add(),Q.current=WT(document,"keydown",W),G.current=WT(document,"focus",(()=>setTimeout(K)),!0),T&&T(),y){var e,t;const n=$T(null!=(e=null==(t=F.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);F.dialog&&n&&!JT(F.dialog,n)&&(z.current=n,F.dialog.focus())}})),q=FT((()=>{var e;(F.remove(),null==Q.current||Q.current(),null==G.current||G.current(),w)&&(null==(e=z.current)||null==e.focus||e.focus(b),z.current=null)}));(0,r.useEffect)((()=>{n&&L&&B()}),[n,L,B]),(0,r.useEffect)((()=>{U&&q()}),[U,q]),UT((()=>{q()}));const K=FT((()=>{if(!v||!M()||!F.isTopModal())return;const e=$T(null==D?void 0:D.document);F.dialog&&e&&!JT(F.dialog,e)&&F.dialog.focus()})),H=FT((e=>{e.target===e.currentTarget&&(null==h||h(e),!0===c&&k())})),W=FT((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&F.isTopModal()&&(null==d||d(e),e.defaultPrevented||k())})),G=(0,r.useRef)(),Q=(0,r.useRef)();if(!L)return null;const $=Object.assign({role:i,ref:F.setDialogRef,"aria-modal":"dialog"===i||void 0},P,{style:a,className:o,tabIndex:-1});let J=_?_($):(0,lT.jsx)("div",Object.assign({},$,{children:r.cloneElement(l,{role:"document"})}));J=dk(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:x,onExiting:N,onExited:function(){V(!0),null==C||C(...arguments)},onEnter:A,onEntering:O,onEntered:R,children:J});let Y=null;return c&&(Y=E({ref:F.setBackdropRef,onClick:H}),Y=dk(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Y})),(0,lT.jsx)(lT.Fragment,{children:s.createPortal((0,lT.jsxs)(lT.Fragment,{children:[Y,J]}),L)})}));gk.displayName="Modal";const yk=Object.assign(gk,{Manager:ZT});var vk=Function.prototype.bind.call(Function.prototype.call,[].slice);function wk(e,t){return vk(e.querySelectorAll(t))}function bk(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const _k=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ek=".sticky-top",Sk=".navbar-toggler";class Ik extends ZT{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,HT(t,{[e]:"".concat(parseFloat(HT(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],HT(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";wk(t,_k).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),wk(t,Ek).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),wk(t,Sk).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=bk(n.className,r):n.setAttribute("class",bk(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";wk(t,_k).forEach((e=>this.restore(i,e))),wk(t,Ek).forEach((e=>this.restore(s,e))),wk(t,Sk).forEach((e=>this.restore(s,e)))}}let Tk;function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kk(e,t)}const xk=!1,Ck=r.createContext(null);var Nk="unmounted",Ak="exited",Ok="entering",Rk="entered",Pk="exiting",Dk=function(e){var t,n;function i(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=Ak,r.appearStatus=Ok):i=Rk:i=t.unmountOnExit||t.mountOnEnter?Nk:Ak,r.state={status:i},r.nextCallback=null,r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,kk(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Nk?{status:Ak}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ok&&n!==Rk&&(t=Ok):n!==Ok&&n!==Rk||(t=Pk)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ok){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ak&&this.setState({status:Nk})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||xk?this.safeSetState({status:Rk},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:Ok},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:Rk},(function(){t.props.onEntered(o,a)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!xk?(this.props.onExit(r),this.safeSetState({status:Pk},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ak},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ak},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===Nk)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(Ck.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},i}(r.Component);function Lk(){}Dk.contextType=Ck,Dk.propTypes={},Dk.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lk,onEntering:Lk,onEntered:Lk,onExit:Lk,onExiting:Lk,onExited:Lk},Dk.UNMOUNTED=Nk,Dk.EXITED=Ak,Dk.ENTERING=Ok,Dk.ENTERED=Rk,Dk.EXITING=Pk;const Fk=Dk;function Mk(e,t){const n=HT(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function jk(e,t){const n=Mk(e,"transitionDuration"),r=Mk(e,"transitionDelay"),i=QT(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const Uk=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:a,onExiting:l,onExited:c,addEndListener:u,children:h,childRef:d,...f}=e;const p=(0,r.useRef)(null),m=jT(p,d),g=e=>{var t;m((t=e)&&"setState"in t?s.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&p.current&&e(p.current,t)},v=(0,r.useCallback)(y(n),[n]),w=(0,r.useCallback)(y(i),[i]),b=(0,r.useCallback)(y(o),[o]),_=(0,r.useCallback)(y(a),[a]),E=(0,r.useCallback)(y(l),[l]),S=(0,r.useCallback)(y(c),[c]),I=(0,r.useCallback)(y(u),[u]);return(0,lT.jsx)(Fk,{ref:t,...f,onEnter:v,onEntered:b,onEntering:w,onExit:_,onExited:S,onExiting:E,addEndListener:I,nodeRef:p,children:"function"===typeof h?(e,t)=>h(e,{...t,ref:g}):r.cloneElement(h,{ref:g})})})),Vk=Uk,zk={[Ok]:"show",[Rk]:"show"},Bk=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:s={},onEnter:o,...a}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=(0,r.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,lT.jsx)(Vk,{ref:t,addEndListener:jk,...l,onEnter:c,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:pT()("fade",n,i.props.className,zk[e],s[e])})})}));Bk.displayName="Fade";const qk=Bk,Kk=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=ST(r,"modal-body"),(0,lT.jsx)(i,{ref:t,className:pT()(n,r),...s})}));Kk.displayName="ModalBody";const Hk=Kk,Wk=r.createContext({onHide(){}}),Gk=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:l,scrollable:c,...u}=e;n=ST(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,lT.jsx)("div",{...u,ref:t,className:pT()(h,r,o&&"".concat(n,"-").concat(o),s&&"".concat(h,"-centered"),c&&"".concat(h,"-scrollable"),a&&d),children:(0,lT.jsx)("div",{className:pT()("".concat(n,"-content"),i),children:l})})}));Gk.displayName="ModalDialog";const Qk=Gk,$k=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=ST(r,"modal-footer"),(0,lT.jsx)(i,{ref:t,className:pT()(n,r),...s})}));$k.displayName="ModalFooter";const Jk=$k;var Yk=n(173),Xk=n.n(Yk);const Zk={"aria-label":Xk().string,onClick:Xk().func,variant:Xk().oneOf(["white"])},ex=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,lT.jsx)("button",{ref:t,type:"button",className:pT()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...s})}));ex.displayName="CloseButton",ex.propTypes=Zk;const tx=ex,nx=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:a,...l}=e;const c=(0,r.useContext)(Wk),u=FT((()=>{null==c||c.onHide(),null==o||o()}));return(0,lT.jsxs)("div",{ref:t,...l,children:[a,s&&(0,lT.jsx)(tx,{"aria-label":n,variant:i,onClick:u})]})})),rx=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=ST(n,"modal-header"),(0,lT.jsx)(nx,{ref:t,...o,className:pT()(r,n),closeLabel:i,closeButton:s})}));rx.displayName="ModalHeader";const ix=rx,sx=(ox="h4",r.forwardRef(((e,t)=>(0,lT.jsx)("div",{...e,ref:t,className:pT()(e.className,ox)}))));var ox;const ax=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=sx,...s}=e;return r=ST(r,"modal-title"),(0,lT.jsx)(i,{ref:t,className:pT()(n,r),...s})}));ax.displayName="ModalTitle";const lx=ax;function cx(e){return(0,lT.jsx)(qk,{...e,timeout:null})}function ux(e){return(0,lT.jsx)(qk,{...e,timeout:null})}const hx=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,style:s,dialogClassName:o,contentClassName:a,children:l,dialogAs:c=Qk,"data-bs-theme":u,"aria-labelledby":h,"aria-describedby":d,"aria-label":f,show:p=!1,animation:m=!0,backdrop:g=!0,keyboard:y=!0,onEscapeKeyDown:v,onShow:w,onHide:b,container:_,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:I=!0,restoreFocusOptions:T,onEntered:k,onExit:x,onExiting:C,onEnter:N,onEntering:A,onExited:O,backdropClassName:R,manager:P,...D}=e;const[L,F]=(0,r.useState)({}),[M,j]=(0,r.useState)(!1),U=(0,r.useRef)(!1),V=(0,r.useRef)(!1),z=(0,r.useRef)(null),[B,q]=(0,r.useState)(null),K=jT(t,q),H=FT(b),W=function(){const{dir:e}=(0,r.useContext)(bT);return"rtl"===e}();n=ST(n,"modal");const G=(0,r.useMemo)((()=>({onHide:H})),[H]);function Q(){return P||function(e){return Tk||(Tk=new Ik(e)),Tk}({isRTL:W})}function $(e){if(!kT)return;const t=Q().getScrollbarWidth()>0,n=e.scrollHeight>OT(e).documentElement.clientHeight;F({paddingRight:t&&!n?DT():void 0,paddingLeft:!t&&n?DT():void 0})}const J=FT((()=>{B&&$(B.dialog)}));UT((()=>{RT(window,"resize",J),null==z.current||z.current()}));const Y=()=>{U.current=!0},X=e=>{U.current&&B&&e.target===B.dialog&&(V.current=!0),U.current=!1},Z=()=>{j(!0),z.current=QT(B.dialog,(()=>{j(!1)}))},ee=e=>{"static"!==g?V.current||e.target!==e.currentTarget?V.current=!1:null==b||b():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,r.useCallback)((e=>(0,lT.jsx)("div",{...e,className:pT()("".concat(n,"-backdrop"),R,!m&&"show")})),[m,R,n]),ne={...s,...L};ne.display="block";return(0,lT.jsx)(Wk.Provider,{value:G,children:(0,lT.jsx)(yk,{show:p,ref:K,backdrop:g,container:_,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:I,restoreFocusOptions:T,onEscapeKeyDown:e=>{y?null==v||v(e):(e.preventDefault(),"static"===g&&Z())},onShow:w,onHide:b,onEnter:(e,t)=>{e&&$(e),null==N||N(e,t)},onEntering:(e,t)=>{null==A||A(e,t),AT(window,"resize",J)},onEntered:k,onExit:e=>{null==z.current||z.current(),null==x||x(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==O||O(e),RT(window,"resize",J)},manager:Q(),transition:m?cx:void 0,backdropTransition:m?ux:void 0,renderBackdrop:te,renderDialog:e=>(0,lT.jsx)("div",{role:"dialog",...e,style:ne,className:pT()(i,n,M&&"".concat(n,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:X,"data-bs-theme":u,"aria-label":f,"aria-labelledby":h,"aria-describedby":d,children:(0,lT.jsx)(c,{...D,onMouseDown:Y,className:o,contentClassName:a,children:l})})})})}));hx.displayName="Modal";const dx=Object.assign(hx,{Body:Hk,Header:ix,Title:lx,Footer:Jk,Dialog:Qk,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),fx=()=>{const[e,t]=(0,r.useState)(!1),n=()=>t(!1);let i=_i(),s=w((e=>e.user));const o={marginBottom:"0"};return(0,lT.jsxs)(lT.Fragment,{children:[(0,lT.jsx)(TT,{variant:"primary",onClick:function(){s?t(!0):(alert("You are not logged in"),i("/login"))},children:"Check Out"}),(0,lT.jsxs)(dx,{show:e,onHide:n,backdrop:"static",keyboard:!1,children:[(0,lT.jsx)(dx.Header,{closeButton:!0,children:(0,lT.jsx)(dx.Title,{children:"Add Details"})}),(0,lT.jsx)(dx.Body,{children:(0,lT.jsxs)("form",{className:"row g-3",onSubmit:e=>{e.preventDefault()},children:[(0,lT.jsxs)("div",{className:"col-md-6",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputName4",className:"form-label",children:"Name"}),(0,lT.jsx)("input",{type:"text",className:"form-control",id:"inputName4",required:!0})]}),(0,lT.jsxs)("div",{className:"col-md-6",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputnumber4",className:"form-label",children:"Contact Number"}),(0,lT.jsx)("input",{type:"number",className:"form-control",id:"inputnumber4",required:!0})]}),(0,lT.jsxs)("div",{className:"col-12",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputAddress",className:"form-label",children:"Address"}),(0,lT.jsx)("input",{type:"text",className:"form-control",id:"inputAddress",placeholder:"1234 Main St",required:!0})]}),(0,lT.jsxs)("div",{className:"col-12",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputAddress2",className:"form-label",children:"Address 2"}),(0,lT.jsx)("input",{type:"text",className:"form-control",id:"inputAddress2",placeholder:"Apartment, studio, or floor",required:!0})]}),(0,lT.jsxs)("div",{className:"col-md-6",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputCity",className:"form-label",children:"City"}),(0,lT.jsx)("input",{type:"text",className:"form-control",id:"inputCity",required:!0})]}),(0,lT.jsxs)("div",{className:"col-md-4",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputState",className:"form-label",children:"State"}),(0,lT.jsxs)("select",{id:"inputState",className:"form-select",required:!0,children:[(0,lT.jsx)("option",{selected:!0,children:"Choose..."}),(0,lT.jsx)("option",{children:"..."})]})]}),(0,lT.jsxs)("div",{className:"col-md-2",style:o,children:[(0,lT.jsx)("label",{htmlFor:"inputZip",className:"form-label",children:"Zip"}),(0,lT.jsx)("input",{type:"text",className:"form-control",id:"inputZip",required:!0})]})]})}),(0,lT.jsxs)(dx.Footer,{children:[(0,lT.jsx)(TT,{variant:"secondary",onClick:n,children:"Close"}),(0,lT.jsx)(TT,{variant:"primary",onClick:()=>{alert("Order Placed Successfully!"),i("/")},children:"Place Order"})]})]})]})},px=()=>{const e=w((e=>e.shoppingCart.cartProducts));let t=w((e=>e.user));const n=O(),i=localStorage.getItem("cartProducts"),s=e.length>0?e:JSON.parse(i),[o,a]=(0,r.useState)(s),[l,c]=(0,r.useState)(0);(0,r.useEffect)((()=>{localStorage.setItem("cartProducts",JSON.stringify(o)),h(o)}),[o]);const u=e=>{console.log("item",e);let t=[];t=1===e.qty?o.filter((t=>t.id!==e.id)):o.map((t=>t.id===e.id?{...t,qty:t.qty-1}:t)),n(function(e){return{type:"DELETE_PRODUCTS",payload:e}}(e)),a(t),h(t)},h=e=>{let t=0;e.forEach((e=>{t+=e.qty*e.num_pages})),c(t)};return(0,lT.jsxs)(lT.Fragment,{children:[t?(0,lT.jsx)(cT,{}):(0,lT.jsx)(hT,{}),(0,lT.jsx)("h1",{children:"Shopping Cart"}),0===o.length&&(0,lT.jsx)("h2",{children:"Your cart is empty!"}),o.length>0&&(0,lT.jsxs)("table",{className:"cart-table",children:[(0,lT.jsx)("thead",{children:(0,lT.jsxs)("tr",{children:[(0,lT.jsx)("th",{children:"Image"}),(0,lT.jsx)("th",{children:"Title"}),(0,lT.jsx)("th",{children:"Quantity"}),(0,lT.jsx)("th",{children:"Price"}),(0,lT.jsx)("th",{children:"Actions"})]})}),(0,lT.jsxs)("tbody",{children:[o.map((e=>(0,lT.jsxs)("tr",{children:[(0,lT.jsx)("td",{children:(0,lT.jsx)("img",{src:e.image_url,alt:"book"})}),(0,lT.jsx)("td",{children:e.title}),(0,lT.jsxs)("td",{className:"qty-btn",children:[(0,lT.jsx)("button",{onClick:()=>(e=>{n(Ir(e));const t=o.find((t=>t.id===e.id));if(t){const t=o.map((t=>t.id===e.id?{...t,qty:t.qty+1}:t));a(t),h(t)}else{const t=[...o,{...e,qty:1}];a(t),h(t)}})(e),children:(0,lT.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})}),(0,lT.jsx)("span",{children:e.qty}),(0,lT.jsx)("button",{onClick:()=>u(e),children:(0,lT.jsx)("i",{className:"fa fa-minus","aria-hidden":"true"})})]}),(0,lT.jsxs)("td",{children:["\u20b9 ",e.qty*e.num_pages]}),(0,lT.jsx)("td",{children:(0,lT.jsx)("button",{onClick:()=>u(e),children:"Remove Item"})})]},e.id))),(0,lT.jsxs)("tr",{className:"totalcart",children:[(0,lT.jsx)("td",{colSpan:4,children:(0,lT.jsx)("b",{children:"Total Cart Value"})}),(0,lT.jsxs)("td",{children:["\u20b9 ",l]})]})]})]}),o.length>0&&(0,lT.jsx)(fx,{})]})};var mx=n(575),gx=n(517),yx=n(704),vx=n.n(yx);const wx=Object.prototype.toString,bx=Error.prototype.toString,_x=RegExp.prototype.toString,Ex="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",Sx=/^Symbol\((.*)\)(.*)$/;function Ix(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return Ex.call(e).replace(Sx,"Symbol($1)");const r=wx.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+bx.call(e)+"]":"RegExp"===r?_x.call(e):null}function Tx(e,t){let n=Ix(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=Ix(this[e],t);return null!==r?r:n}),2)}function kx(e){return null==e?[]:[].concat(e)}let xx,Cx,Nx,Ax=/\$\{\s*(\w+)\s*\}/g;xx=Symbol.toStringTag;class Ox{constructor(e,t,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[xx]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],kx(e).forEach((e=>{if(Rx.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)})),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0]}}Cx=Symbol.hasInstance,Nx=Symbol.toStringTag;class Rx extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(Ax,((e,n)=>Tx(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,i){const s=new Ox(e,t,n,r);if(i)return s;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Nx]="Error",this.name=s.name,this.message=s.message,this.type=s.type,this.value=s.value,this.path=s.path,this.errors=s.errors,this.inner=s.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Rx)}static[Cx](e){return Ox[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Px={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:i}=e;const s=null!=i&&i!==r?" (cast from the value `".concat(Tx(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(Tx(r,!0),"`")+s:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(Tx(r,!0),"`")+s}},Dx={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Lx={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Fx={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Mx={isValue:"${path} field must be ${value}"},jx={noUnknown:"${path} field has unspecified keys: ${unknown}"},Ux={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Vx={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return"".concat(t," tuple value has too few items, expected a length of ").concat(i," but got ").concat(n.length," for value: `").concat(Tx(n,!0),"`");if(n.length>i)return"".concat(t," tuple value has too many items, expected a length of ").concat(i," but got ").concat(n.length," for value: `").concat(Tx(n,!0),"`")}return Rx.formatError(Px.notType,e)}};Object.assign(Object.create(null),{mixed:Px,string:Dx,number:Lx,date:Fx,object:jx,array:Ux,boolean:Mx,tuple:Vx});const zx=e=>e&&e.__isYupSchema__;class Bx{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,s="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every((e=>e===n))};return new Bx(e,((e,t)=>{var n;let o=s(...e)?r:i;return null!=(n=null==o?void 0:o(t))?n:t}))}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!zx(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const qx="$",Kx=".";function Hx(e,t){return new Wx(e,t)}class Wx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===qx,this.isValue=this.key[0]===Kx,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?qx:this.isValue?Kx:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,mx.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}Wx.prototype.__isYupRef=!0;const Gx=e=>null==e;function Qx(e){function t(t,n,r){let{value:i,path:s="",options:o,originalValue:a,schema:l}=t;const{name:c,test:u,params:h,message:d,skipAbsent:f}=e;let{parent:p,context:m,abortEarly:g=l.spec.abortEarly,disableStackTrace:y=l.spec.disableStackTrace}=o;function v(e){return Wx.isRef(e)?e.getValue(i,p,m):e}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({value:i,originalValue:a,label:l.spec.label,path:e.path||s,spec:l.spec,disableStackTrace:e.disableStackTrace||y},h,e.params);for(const r of Object.keys(t))t[r]=v(t[r]);const n=new Rx(Rx.formatError(e.message||d,t),i,t.path,e.type||c,t.disableStackTrace);return n.params=t,n}const b=g?n:r;let _={path:s,parent:p,type:c,from:o.from,createError:w,resolve:v,options:o,originalValue:a,schema:l};const E=e=>{Rx.isError(e)?b(e):e?r(null):b(w())},S=e=>{Rx.isError(e)?b(e):n(e)};if(f&&Gx(i))return E(!0);let I;try{var T;if(I=u.call(_,i,_),"function"===typeof(null==(T=I)?void 0:T.then)){if(o.sync)throw new Error('Validation test of type: "'.concat(_.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(I).then(E,S)}}catch(k){return void S(k)}E(I)}return t.OPTIONS=e,t}function $x(e,t,n){let r,i,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,mx.forEach)(t,((a,l,c)=>{let u=l?a.slice(1,a.length-1):a,h="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,d=c?parseInt(u,10):0;if(e.innerType||h){if(h&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(s,'" must contain an index to the tuple element, e.g. "').concat(s,'[0]"'));if(n&&d>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(a,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[d],e=h?e.spec.types[d]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(s,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[u],e=e.fields[u]}i=u,s=l?"["+a+"]":"."+a})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}class Jx extends Set{describe(){const e=[];for(const t of this.values())e.push(Wx.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new Jx(this.values())}merge(e,t){const n=this.clone();return e.forEach((e=>n.add(e))),t.forEach((e=>n.delete(e))),n}}function Yx(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(zx(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let r=0;r<e.length;r++)t[r]=Yx(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[r,i]of e.entries())t.set(r,Yx(i,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const r of e)t.add(Yx(r,n))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(const[r,i]of Object.entries(e))t[r]=Yx(i,n)}return t}class Xx{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Jx,this._blacklist=new Jx,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(Px.notType)})),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation((e=>{e.nonNullable()}))}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Yx(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,i;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(i=e.disableStackTrace)?i:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&Gx(i))return i;let s=Tx(e),o=Tx(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(s," \n")+(o!==s?"result of cast: ".concat(o):""))}return i}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{path:i,originalValue:s=e,strict:o=this.spec.strict}=t,a=e;o||(a=this._cast(a,Object.assign({assert:!1},t)));let l=[];for(let c of Object.values(this.internalTests))c&&l.push(c);this.runTests({path:i,value:a,originalValue:s,options:t,tests:l},n,(e=>{if(e.length)return r(e,a);this.runTests({path:i,value:a,originalValue:s,options:t,tests:this.tests},n,r)}))}runTests(e,t,n){let r=!1,{tests:i,value:s,originalValue:o,path:a,options:l}=e,c=e=>{r||(r=!0,t(e,s))},u=e=>{r||(r=!0,n(e,s))},h=i.length,d=[];if(!h)return u([]);let f={value:s,originalValue:o,path:a,options:l,schema:this};for(let p=0;p<i.length;p++){(0,i[p])(f,c,(function(e){e&&(Array.isArray(e)?d.push(...e):d.push(e)),--h<=0&&u(d)}))}}asNestedTest(e){let{key:t,index:n,parent:r,parentPath:i,originalParent:s,options:o}=e;const a=null!=t?t:n;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const l="number"===typeof a;let c=r[a];const u=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?"".concat(i||"","[").concat(l?a:'"'.concat(a,'"'),"]"):(i?"".concat(i,"."):"")+t});return(e,t,n)=>this.resolve(u)._validate(c,u,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),i=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise(((n,s)=>r._validate(e,t,((e,t)=>{Rx.isError(e)&&(e.value=t),s(e)}),((e,t)=>{e.length?s(new Rx(e,t,void 0,void 0,i)):n(t)}))))}validateSync(e,t){var n;let r,i=this.resolve(Object.assign({},t,{value:e})),s=null!=(n=null==t?void 0:t.disableStackTrace)?n:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),((e,t)=>{throw Rx.isError(e)&&(e.value=t),e}),((t,n)=>{if(t.length)throw new Rx(t,e,void 0,void 0,s);r=n})),r}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(Rx.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(Rx.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):Yx(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=Qx({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=Qx({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Px.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Px.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Px.required;return this.clone().withMutation((t=>t.nonNullable(e).defined(e)))}notRequired(){return this.clone().withMutation((e=>e.nullable().optional()))}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=Px.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=Qx(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=kx(e).map((e=>new Wx(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new Bx(r,t):Bx.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=Qx({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Px.oneOf,n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=Qx({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Px.notOneOf,n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=Qx({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:i,nullable:s}=t.spec,o={meta:r,label:n,optional:i,nullable:s,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return o}}Xx.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Xx.prototype["".concat(n,"At")]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:i,parentPath:s,schema:o}=$x(this,e,t,r.context);return o[n](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])Xx.prototype[n]=Xx.prototype.oneOf;for(const n of["not","nope"])Xx.prototype[n]=Xx.prototype.notOneOf;const Zx=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function eC(e){var t,n;const r=Zx.exec(e);return r?{year:tC(r[1]),month:tC(r[2],1)-1,day:tC(r[3],1),hour:tC(r[4]),minute:tC(r[5]),second:tC(r[6]),millisecond:r[7]?tC(r[7].substring(0,3)):0,precision:null!=(t=null==(n=r[7])?void 0:n.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:tC(r[10]),minuteOffset:tC(r[11])}:null}function tC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let nC=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rC=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,iC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sC=new RegExp("".concat("^\\d{4}-\\d{2}-\\d{2}","T").concat("\\d{2}:\\d{2}:\\d{2}","(\\.\\d+)?").concat("(([+-]\\d{2}(:?\\d{2})?)|Z)","$")),oC=e=>Gx(e)||e===e.trim(),aC={}.toString();function lC(){return new cC}class cC extends Xx{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===aC?e:r}))}))}required(e){return super.required(e).withMutation((t=>t.test({message:e||Px.required,name:"required",skipAbsent:!0,test:e=>!!e.length})))}notRequired(){return super.notRequired().withMutation((e=>(e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e)))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dx.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dx.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dx.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"===typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||Dx.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&i||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.email;return this.matches(nC,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.url;return this.matches(rC,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.uuid;return this.matches(iC,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,r="";return e&&("object"===typeof e?({message:r="",allowOffset:t=!1,precision:n}=e):r=e),this.matches(sC,{name:"datetime",message:r||Dx.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||Dx.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=eC(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||Dx.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||void 0==n)return!0;const t=eC(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.trim;return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:oC})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.lowercase;return this.transform((e=>Gx(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Gx(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dx.uppercase;return this.transform((e=>Gx(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Gx(e)||e===e.toUpperCase()})}}lC.prototype=cC.prototype;let uC=new Date("");function hC(){return new dC}class dC extends Xx{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation((()=>{this.transform(((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=eC(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?dC.INVALID_DATE:new Date(e))))}))}prepareParam(e,t){let n;if(Wx.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fx.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fx.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function fC(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function pC(e){return(t,n)=>fC(e,t)-fC(e,n)}dC.INVALID_DATE=uC,hC.prototype=dC.prototype,hC.INVALID_DATE=uC;const mC=(e,t,n)=>{if("string"!==typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function gC(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=gC(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=gC(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(gC)}):"optional"in e?e.optional():e}let yC=e=>"[object Object]"===Object.prototype.toString.call(e);const vC=pC([]);function wC(e){return new bC(e)}class bC extends Xx{constructor(e){super({type:"object",check:e=>yC(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=vC,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{e&&this.shape(e)}))}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let i=this.fields,s=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(r).filter((e=>!this._nodes.includes(e)))),a={},l=Object.assign({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const u of o){let e=i[u],n=u in r;if(e){let n,i=r[u];l.path=(t.path?"".concat(t.path,"."):"")+u,e=e.resolve({value:i,context:t.context,parent:a});let s=e instanceof Xx?e.spec:void 0,o=null==s?void 0:s.strict;if(null!=s&&s.strip){c=c||u in r;continue}n=t.__validating&&o?r[u]:e.cast(r[u],l),void 0!==n&&(a[u]=n)}else n&&!s&&(a[u]=r[u]);n===u in a&&a[u]===r[u]||(c=!0)}return c?a:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{from:i=[],originalValue:s=e,recursive:o=this.spec.recursive}=t;t.from=[{schema:this,value:s},...i],t.__validating=!0,t.originalValue=s,super._validate(e,t,n,((e,i)=>{if(!o||!yC(i))return void r(e,i);s=s||i;let a=[];for(let n of this._nodes){let e=this.fields[n];e&&!Wx.isRef(e)&&a.push(e.asNestedTest({options:t,key:n,parent:i,parentPath:t.path,originalParent:s}))}this.runTests({tests:a,value:i,originalValue:s,options:t},n,(t=>{r(t.sort(this._sortErrors).concat(e),i)}))}))}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];n[r]=void 0===e?i:e}return t.withMutation((t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges])))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach((n=>{var r;const i=this.fields[n];let s=e;null!=(r=s)&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[n]})),t[n]=i&&"getDefault"in i?i.getDefault(s):void 0})),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((e=>{let[t,n]=e;return"".concat(t,"-").concat(n)})));function s(e,t){let s=(0,mx.split)(e)[0];r.add(s),i.has("".concat(t,"-").concat(s))||n.push([t,s])}for(const o of Object.keys(e)){let t=e[o];r.add(o),Wx.isRef(t)&&t.isSibling?s(t.path,o):zx(t)&&"deps"in t&&t.deps.forEach((e=>s(e,o)))}return vx().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=pC(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)}))}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return gC(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter((t=>{let[n,r]=t;return e.includes(n)&&e.includes(r)})))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let r=(0,mx.getter)(e,!0);return this.transform((i=>{if(!i)return i;let s=i;return((e,t)=>{const n=[...(0,mx.normalizePath)(t)];if(1===n.length)return n[0]in e;let r=n.pop(),i=(0,mx.getter)((0,mx.join)(n),!0)(e);return!(!i||!(r in i))})(i,e)&&(s=Object.assign({},i),n||delete s[e],s[t]=r(i)),s}))}json(){return this.transform(mC)}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jx.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jx.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n}))}camelCase(){return this.transformKeys(gx.camelCase)}snakeCase(){return this.transformKeys(gx.snakeCase)}constantCase(){return this.transformKeys((e=>(0,gx.snakeCase)(e).toUpperCase()))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,s]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[i]})),n.fields[i]=s.describe(t)}return n}}wC.prototype=bC.prototype;const _C=function(){const e=_i(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)({}),l=O();let c=w((e=>e.user));c&&console.log("user exists",c);const u=wC({email:lC().email("Please enter a valid email").required("Email is required"),password:lC().min(5).max(20).required("Password is required")});return(0,lT.jsxs)("div",{children:[(0,lT.jsx)(hT,{}),(0,lT.jsxs)("section",{className:"signup-container",children:[(0,lT.jsx)("div",{className:"signup-img-container",children:(0,lT.jsx)("img",{src:"/assets/bg2.jpg",className:"card-img",alt:"background",height:"1000px"})}),(0,lT.jsx)("div",{className:"signup-content-container",children:(0,lT.jsx)("div",{className:"content-wrapper",children:(0,lT.jsx)("div",{className:"main-card card",children:(0,lT.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{await u.validate({email:t,password:i},{abortEarly:!1}),console.log({email:t,password:i}),await aT.signInWithEmailAndPassword(t,i),l(Tr(!0)),e("/"),n(""),s(""),a({})}catch(o){const e={};o.inner.forEach((t=>{e[t.path]=t.message})),a(e)}},children:[(0,lT.jsx)("h1",{children:"Login"}),(0,lT.jsxs)("div",{className:"mb-3",children:[(0,lT.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),(0,lT.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:t,onChange:e=>n(e.target.value)}),(0,lT.jsx)("br",{}),o.email&&(0,lT.jsx)("h6",{children:o.email})]}),(0,lT.jsxs)("div",{className:"mb-3",children:[(0,lT.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),(0,lT.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:i,onChange:e=>s(e.target.value)}),(0,lT.jsx)("br",{}),o.password&&(0,lT.jsx)("h6",{children:o.password}),(0,lT.jsx)("br",{})]}),(0,lT.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})})})]})]})},EC=()=>{var e,t,n,i,s,o,a;const[l,c]=(0,r.useState)([]),u=w((e=>e.bookstore.productDetails)),h=O();(0,r.useEffect)((()=>{h(Er())}),[]);const{id:d}=function(){let{matches:e}=r.useContext(gi),t=e[e.length-1];return t?t.params:{}}();console.log(d),(0,r.useEffect)((()=>{c(u.filter((e=>e.id==d)))}),[u,d]),(0,r.useEffect)((()=>{console.log(l)}),[l]);return(0,lT.jsxs)("div",{children:[(0,lT.jsx)(cT,{}),(0,lT.jsx)("section",{className:"detail-section-container",children:(0,lT.jsx)("div",{className:"container",children:(0,lT.jsxs)("div",{className:"flex-container",children:[(0,lT.jsx)("div",{className:"book-img-container",children:(0,lT.jsx)("img",{src:null===(e=l[0])||void 0===e?void 0:e.image_url,alt:"book"})}),(0,lT.jsxs)("div",{className:"book-detail-container",children:[(0,lT.jsx)("h2",{children:null===(t=l[0])||void 0===t||null===(n=t.title)||void 0===n?void 0:n.toUpperCase()}),(0,lT.jsxs)("p",{children:[(0,lT.jsx)("b",{children:"Author : "}),null===(i=l[0])||void 0===i?void 0:i.authors]}),(0,lT.jsxs)("p",{children:[(0,lT.jsx)("b",{children:"Description : "}),null===(s=l[0])||void 0===s?void 0:s.description]}),(0,lT.jsxs)("p",{children:[(0,lT.jsx)("b",{children:"Rating : "}),null===(o=l[0])||void 0===o?void 0:o.rating]}),(0,lT.jsx)("p",{children:(0,lT.jsxs)("b",{children:["Price : \u20b9 ",null===(a=l[0])||void 0===a?void 0:a.num_pages]})}),(0,lT.jsx)("button",{onClick:()=>(e=>{h(Ir(e))})(d),className:"CheckoutBtn",children:"Add To Cart"})]})]})})})]})};const SC=function(){const e=_i(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)({});let u=w((e=>e.user));u&&console.log("user exists",u);const h=wC({email:lC().email("Please enter a valid email").required("Email is required"),password:lC().min(5).max(20).required("Password is required"),confirmPassword:lC().oneOf([Hx("password"),null],"Passwords must match").required("Please confirm your password")});return(0,lT.jsxs)("div",{children:[(0,lT.jsx)(hT,{}),(0,lT.jsxs)("section",{className:"signup-container",children:[(0,lT.jsx)("div",{className:"signup-img-container",children:(0,lT.jsx)("img",{src:"/assets/bg2.jpg",className:"card-img",alt:"background",height:"1000px"})}),(0,lT.jsx)("div",{className:"signup-content-container",children:(0,lT.jsx)("div",{className:"content-wrapper",children:(0,lT.jsx)("div",{className:"main-card card",children:(0,lT.jsxs)("form",{onSubmit:async r=>{r.preventDefault();try{await h.validate({email:t,password:i,confirmPassword:o},{abortEarly:!1}),await aT.createUserWithEmailAndPassword(t,i),console.log({email:t,password:i,confirmPassword:o}),e("/"),n(""),s(""),a(""),c({})}catch(l){const e={};l.inner.forEach((t=>{e[t.path]=t.message})),c(e)}},children:[(0,lT.jsx)("h1",{children:"Sign Up"}),(0,lT.jsxs)("div",{className:"mb-3",children:[(0,lT.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),(0,lT.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:t,onChange:e=>n(e.target.value)}),(0,lT.jsx)("br",{}),l.email&&(0,lT.jsx)("h6",{children:l.email})]}),(0,lT.jsxs)("div",{className:"mb-3",children:[(0,lT.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),(0,lT.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:i,onChange:e=>s(e.target.value)}),(0,lT.jsx)("br",{}),l.password&&(0,lT.jsx)("h6",{children:l.password}),(0,lT.jsx)("br",{})]}),(0,lT.jsxs)("div",{className:"mb-3",children:[(0,lT.jsx)("label",{htmlFor:"exampleInputConfirmPassword1",className:"form-label",children:"Confirm Password"}),(0,lT.jsx)("input",{type:"password",className:"form-control",id:"exampleInputConfirmPassword1",value:o,onChange:e=>a(e.target.value)}),(0,lT.jsx)("br",{}),l.confirmPassword&&(0,lT.jsx)("h6",{children:l.confirmPassword}),(0,lT.jsx)("br",{})]}),(0,lT.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign Up"})]})})})})]})]})};const IC=function(){return(0,lT.jsx)("div",{className:"App",children:(0,lT.jsx)(qi,{children:(0,lT.jsxs)(Mi,{children:[(0,lT.jsx)(Li,{path:"/shoppingCart",element:(0,lT.jsx)(px,{})}),(0,lT.jsx)(Li,{path:"",element:(0,lT.jsx)(dT,{})}),(0,lT.jsx)(Li,{path:"/",element:(0,lT.jsx)(dT,{})}),(0,lT.jsx)(Li,{path:"/bookstore/",element:(0,lT.jsx)(dT,{})}),(0,lT.jsx)(Li,{path:"/login",element:(0,lT.jsx)(_C,{})}),(0,lT.jsx)(Li,{path:"/book-details/:id",element:(0,lT.jsx)(EC,{})}),(0,lT.jsx)(Li,{path:"/signup",element:(0,lT.jsx)(SC,{})})]})})})},TC=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new He;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(ze):s.push(Be(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!Fe(n))throw new Error(at(1));a=je(n)}l="function"===typeof r?r(t):t();let c=Ue;i&&(c=qe({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Re(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=Ue(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=$e(u);let d="function"===typeof o?o(h):h();return Me(a,s,c(...d))}({reducer:kr,middleware:e=>e().concat(ze)});s.render((0,lT.jsx)(k,{store:TC,children:(0,lT.jsx)(IC,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.9a651d9e.js.map